(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2344],{77191:function(t,e,r){let n=r(78247);t.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},78247:function(t){"use strict";t.exports=function(t){if(t.length>=255)throw TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(255!==e[s])throw TypeError(i+" is ambiguous");e[s]=n}var a=t.length,o=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function decodeUnsafe(t){if("string"!=typeof t)throw TypeError("Expected String");if(0===t.length)return new Uint8Array;for(var r=0,n=0,i=0;t[r]===o;)n++,r++;for(var s=(t.length-r)*u+1>>>0,l=new Uint8Array(s);t[r];){var c=e[t.charCodeAt(r)];if(255===c)return;for(var f=0,d=s-1;(0!==c||f<i)&&-1!==d;d--,f++)c+=a*l[d]>>>0,l[d]=c%256>>>0,c=c/256>>>0;if(0!==c)throw Error("Non-zero carry");i=f,r++}for(var p=s-i;p!==s&&0===l[p];)p++;for(var g=new Uint8Array(n+(s-p)),y=n;p!==s;)g[y++]=l[p++];return g}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,i=0,s=e.length;i!==s&&0===e[i];)i++,r++;for(var u=(s-i)*l+1>>>0,c=new Uint8Array(u);i!==s;){for(var f=e[i],d=0,p=u-1;(0!==f||d<n)&&-1!==p;p--,d++)f+=256*c[p]>>>0,c[p]=f%a>>>0,f=f/a>>>0;if(0!==f)throw Error("Non-zero carry");n=d,i++}for(var g=u-n;g!==u&&0===c[g];)g++;for(var y=o.repeat(r);g<u;++g)y+=t.charAt(c[g]);return y},decodeUnsafe:decodeUnsafe,decode:function(t){var e=decodeUnsafe(t);if(e)return e;throw Error("Non-base"+a+" character")}}}},89133:function(t,e,r){var n;!function(e,i){var s={};i(s);var a=s.default;for(var o in s)a[o]=s[o];"object"==typeof t.exports?t.exports=a:void 0!==(n=(function(){return a}).call(s,r,s,t))&&(t.exports=n)}(0,function(t){"use strict";t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function hashBlocks(t,r,n,i,s){for(var a,o,u,l,c,f,d,p,g,y,m,b,w;s>=64;){for(y=0,a=r[0],o=r[1],u=r[2],l=r[3],c=r[4],f=r[5],d=r[6],p=r[7];y<16;y++)m=i+4*y,t[y]=(255&n[m])<<24|(255&n[m+1])<<16|(255&n[m+2])<<8|255&n[m+3];for(y=16;y<64;y++)b=((g=t[y-2])>>>17|g<<15)^(g>>>19|g<<13)^g>>>10,w=((g=t[y-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3,t[y]=(b+t[y-7]|0)+(w+t[y-16]|0);for(y=0;y<64;y++)b=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&f^~c&d)|0)+(p+(e[y]+t[y]|0)|0)|0,w=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&o^a&u^o&u)|0,p=d,d=f,f=c,c=l+b|0,l=u,u=o,o=a,a=b+w|0;r[0]+=a,r[1]+=o,r[2]+=u,r[3]+=l,r[4]+=c,r[5]+=f,r[6]+=d,r[7]+=p,i+=64,s-=64}return i}var r=function(){function Hash(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return Hash.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},Hash.prototype.clean=function(){for(var t=0;t<this.buffer.length;t++)this.buffer[t]=0;for(var t=0;t<this.temp.length;t++)this.temp[t]=0;this.reset()},Hash.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this.finished)throw Error("SHA256: can't update because hash was finished.");var r=0;if(this.bytesHashed+=e,this.bufferLength>0){for(;this.bufferLength<64&&e>0;)this.buffer[this.bufferLength++]=t[r++],e--;64===this.bufferLength&&(hashBlocks(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(e>=64&&(r=hashBlocks(this.temp,this.state,t,r,e),e%=64);e>0;)this.buffer[this.bufferLength++]=t[r++],e--;return this},Hash.prototype.finish=function(t){if(!this.finished){var e=this.bytesHashed,r=this.bufferLength,n=e/536870912|0,i=e<<3,s=e%64<56?64:128;this.buffer[r]=128;for(var a=r+1;a<s-8;a++)this.buffer[a]=0;this.buffer[s-8]=n>>>24&255,this.buffer[s-7]=n>>>16&255,this.buffer[s-6]=n>>>8&255,this.buffer[s-5]=n>>>0&255,this.buffer[s-4]=i>>>24&255,this.buffer[s-3]=i>>>16&255,this.buffer[s-2]=i>>>8&255,this.buffer[s-1]=i>>>0&255,hashBlocks(this.temp,this.state,this.buffer,0,s),this.finished=!0}for(var a=0;a<8;a++)t[4*a+0]=this.state[a]>>>24&255,t[4*a+1]=this.state[a]>>>16&255,t[4*a+2]=this.state[a]>>>8&255,t[4*a+3]=this.state[a]>>>0&255;return this},Hash.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},Hash.prototype._saveState=function(t){for(var e=0;e<this.state.length;e++)t[e]=this.state[e]},Hash.prototype._restoreState=function(t,e){for(var r=0;r<this.state.length;r++)this.state[r]=t[r];this.bytesHashed=e,this.finished=!1,this.bufferLength=0},Hash}();t.Hash=r;var n=function(){function HMAC(t){this.inner=new r,this.outer=new r,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var e=new Uint8Array(this.blockSize);if(t.length>this.blockSize)new r().update(t).finish(e).clean();else for(var n=0;n<t.length;n++)e[n]=t[n];for(var n=0;n<e.length;n++)e[n]^=54;this.inner.update(e);for(var n=0;n<e.length;n++)e[n]^=106;this.outer.update(e),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var n=0;n<e.length;n++)e[n]=0}return HMAC.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},HMAC.prototype.clean=function(){for(var t=0;t<this.istate.length;t++)this.ostate[t]=this.istate[t]=0;this.inner.clean(),this.outer.clean()},HMAC.prototype.update=function(t){return this.inner.update(t),this},HMAC.prototype.finish=function(t){return this.outer.finished?this.outer.finish(t):(this.inner.finish(t),this.outer.update(t,this.digestLength).finish(t)),this},HMAC.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},HMAC}();function hash(t){var e=new r().update(t),n=e.digest();return e.clean(),n}function hmac(t,e){var r=new n(t).update(e),i=r.digest();return r.clean(),i}t.HMAC=n,t.hash=hash,t.default=hash,t.hmac=hmac;var i=new Uint8Array(t.digestLength);t.hkdf=function(t,e,r,s){void 0===e&&(e=i),void 0===s&&(s=32);for(var a=new Uint8Array([1]),o=hmac(e,t),u=new n(o),l=new Uint8Array(u.digestLength),c=l.length,f=new Uint8Array(s),d=0;d<s;d++)c===l.length&&(function(t,e,r,n){var i=n[0];if(0===i)throw Error("hkdf: cannot expand more");e.reset(),i>1&&e.update(t),r&&e.update(r),e.update(n),e.finish(t),n[0]++}(l,u,r,a),c=0),f[d]=l[c++];return u.clean(),l.fill(0),a.fill(0),f},t.pbkdf2=function(t,e,r,i){for(var s=new n(t),a=s.digestLength,o=new Uint8Array(4),u=new Uint8Array(a),l=new Uint8Array(a),c=new Uint8Array(i),f=0;f*a<i;f++){var d=f+1;o[0]=d>>>24&255,o[1]=d>>>16&255,o[2]=d>>>8&255,o[3]=d>>>0&255,s.reset(),s.update(e),s.update(o),s.finish(l);for(var p=0;p<a;p++)u[p]=l[p];for(var p=2;p<=r;p++){s.reset(),s.update(l).finish(l);for(var g=0;g<a;g++)u[g]^=l[g]}for(var p=0;p<a&&f*a+p<i;p++)c[f*a+p]=u[p]}for(var f=0;f<a;f++)u[f]=l[f]=0;for(var f=0;f<4;f++)o[f]=0;return s.clean(),c}})},11074:function(t,e,r){"use strict";r.d(e,{$5:function(){return V}});var n=r(89133),i=r(29269),s=r(37471),a=r(2296),o=r(70761),u=r(69362),l=r(27693),c=r(71406),f=r(69639);let d=class{constructor(t){if(this.types=new Map,this.counter=0,t instanceof d){this.schema=t.schema,this.types=new Map(t.types);return}if(this.schema=t,this.registerAddressType(d.ADDRESS,t.addressLength,t.addressEncoding),this.registerVectorType(t.vectorType),t.types&&t.types.structs)for(let e of Object.keys(t.types.structs))this.registerStructType(e,t.types.structs[e]);if(t.types&&t.types.enums)for(let e of Object.keys(t.types.enums))this.registerEnumType(e,t.types.enums[e]);if(t.types&&t.types.aliases)for(let e of Object.keys(t.types.aliases))this.registerAlias(e,t.types.aliases[e]);!1!==t.withPrimitives&&(this.registerType(d.U8,function(t,e){return t.write8(e)},function(t){return t.read8()},t=>t<256),this.registerType(d.U16,function(t,e){return t.write16(e)},function(t){return t.read16()},t=>t<65536),this.registerType(d.U32,function(t,e){return t.write32(e)},function(t){return t.read32()},t=>t<=4294967296n),this.registerType(d.U64,function(t,e){return t.write64(e)},function(t){return t.read64()}),this.registerType(d.U128,function(t,e){return t.write128(e)},function(t){return t.read128()}),this.registerType(d.U256,function(t,e){return t.write256(e)},function(t){return t.read256()}),this.registerType(d.BOOL,function(t,e){return t.write8(e)},function(t){return"1"===t.read8().toString(10)}),this.registerType(d.STRING,function(t,e){return t.writeVec(Array.from(e),(t,e)=>t.write8(e.charCodeAt(0)))},function(t){return t.readVec(t=>t.read8()).map(t=>String.fromCharCode(Number(t))).join("")},t=>!0),this.registerType(d.HEX,function(t,e){return t.writeVec(Array.from((0,u.H)(e)),(t,e)=>t.write8(e))},function(t){let e=t.readVec(t=>t.read8());return(0,u.d)(new Uint8Array(e))}),this.registerType(d.BASE58,function(t,e){return t.writeVec(Array.from((0,s.n)(e)),(t,e)=>t.write8(e))},function(t){let e=t.readVec(t=>t.read8());return(0,s.K)(new Uint8Array(e))}),this.registerType(d.BASE64,function(t,e){return t.writeVec(Array.from((0,a.F)(e)),(t,e)=>t.write8(e))},function(t){let e=t.readVec(t=>t.read8());return(0,a.z)(new Uint8Array(e))}))}tempKey(){return`bcs-struct-${++this.counter}`}ser(t,e,r){if("string"==typeof t||Array.isArray(t)){let{name:n,params:i}=this.parseTypeName(t);return this.getTypeInterface(n).encode(this,e,r,i)}if("object"==typeof t){let n=this.tempKey(),i=new d(this);return i.registerStructType(n,t).ser(n,e,r)}throw Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(t)}`)}de(t,e,r){if("string"==typeof e){if(r)e=(0,c.NX)(e,r);else throw Error("To pass a string to `bcs.de`, specify encoding")}if("string"==typeof t||Array.isArray(t)){let{name:r,params:n}=this.parseTypeName(t);return this.getTypeInterface(r).decode(this,e,n)}if("object"==typeof t){let n=new d(this),i=this.tempKey();return n.registerStructType(i,t).de(i,e,r)}throw Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(t)}`)}hasType(t){return this.types.has(t)}registerAlias(t,e){return this.types.set(t,e),this}registerType(t,e,r,n=()=>!0){let{name:i,params:s}=this.parseTypeName(t);return this.types.set(i,{encode(t,e,r,n){let i=s.reduce((t,e,r)=>Object.assign(t,{[e]:n[r]}),{});return this._encodeRaw.call(t,new f.B(r),e,n,i)},decode(t,e,r){let n=s.reduce((t,e,n)=>Object.assign(t,{[e]:r[n]}),{});return this._decodeRaw.call(t,new l.r(e),r,n)},_encodeRaw(t,r,s,a){if(n(r))return e.call(this,t,r,s,a);throw Error(`Validation failed for type ${i}, data: ${r}`)},_decodeRaw(t,e,n){return r.call(this,t,e,n)}}),this}registerBcsType(t,e){return this.registerType(t,(t,r,n)=>{let i=n.map(t=>new o.mn({name:String(t),write:(e,r)=>{let{name:i,params:s}=this.parseTypeName(t),a=this.getTypeInterface(i),o=s.reduce((t,e,r)=>Object.assign(t,{[e]:n[r]}),{});return a._encodeRaw.call(this,r,e,s,o)},read:()=>{throw Error("Not implemented")}}));return e(...i).write(r,t),t},(t,r)=>{let n=r.map(t=>new o.mn({name:String(t),write:(t,e)=>{throw Error("Not implemented")},read:e=>{let{name:n,params:i}=this.parseTypeName(t),s=this.getTypeInterface(n),a=i.reduce((t,e,n)=>Object.assign(t,{[e]:r[n]}),{});return s._decodeRaw.call(this,e,i,a)}}));return e(...n).read(t)}),this}registerAddressType(t,e,r="hex"){switch(r){case"base64":return this.registerType(t,function(t,e){return(0,a.F)(e).reduce((t,e)=>t.write8(e),t)},function(t){return(0,a.z)(t.readBytes(e))});case"hex":return this.registerType(t,function(t,e){return(0,u.H)(e).reduce((t,e)=>t.write8(e),t)},function(t){let r=(0,u.d)(t.readBytes(e)).padStart(2*e,"0"),i=(0,u.d)(n(new TextEncoder().encode(r)));return`BFC${r}${i.slice(0,4)}`});default:throw Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(t){let{name:e,params:r}=this.parseTypeName(t);if(r.length>1)throw Error("Vector can have only one type parameter; got "+e);return this.registerType(t,function(e,r,n,i){return e.writeVec(r,(e,r)=>{let s=n[0];if(!s)throw Error(`Incorrect number of type parameters passed a to vector '${t}'`);let{name:a,params:o}=this.parseTypeName(s);if(this.hasType(a))return this.getTypeInterface(a)._encodeRaw.call(this,e,r,o,i);if(!(a in i))throw Error(`Unable to find a matching type definition for ${a} in vector; make sure you passed a generic`);let{name:u,params:l}=this.parseTypeName(i[a]);return this.getTypeInterface(u)._encodeRaw.call(this,e,r,l,i)})},function(e,r,n){return e.readVec(e=>{let i=r[0];if(!i)throw Error(`Incorrect number of type parameters passed to a vector '${t}'`);let{name:s,params:a}=this.parseTypeName(i);if(this.hasType(s))return this.getTypeInterface(s)._decodeRaw.call(this,e,a,n);if(!(s in n))throw Error(`Unable to find a matching type definition for ${s} in vector; make sure you passed a generic`);let{name:o,params:u}=this.parseTypeName(n[s]);return this.getTypeInterface(o)._decodeRaw.call(this,e,u,n)})})}registerStructType(t,e){for(let t in e){let r=this.tempKey(),n=e[t];Array.isArray(n)||"string"==typeof n||(e[t]=r,this.registerStructType(r,n))}let r=Object.freeze(e),n=Object.keys(r),{name:i,params:s}=this.parseTypeName(t);return this.registerType(t,function(t,e,a,o){if(!e||e.constructor!==Object)throw Error(`Expected ${i} to be an Object, got: ${e}`);if(a.length!==s.length)throw Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${a.length}`);for(let u of n){if(!(u in e))throw Error(`Struct ${i} requires field ${u}:${r[u]}`);let{name:n,params:l}=this.parseTypeName(r[u]);if(s.includes(n)){let r=s.indexOf(n),{name:l,params:c}=this.parseTypeName(a[r]);if(this.hasType(l)){this.getTypeInterface(l)._encodeRaw.call(this,t,e[u],c,o);continue}if(!(l in o))throw Error(`Unable to find a matching type definition for ${l} in ${i}; make sure you passed a generic`);let{name:f,params:d}=this.parseTypeName(o[l]);this.getTypeInterface(f)._encodeRaw.call(this,t,e[u],d,o)}else this.getTypeInterface(n)._encodeRaw.call(this,t,e[u],l,o)}return t},function(t,e,a){if(e.length!==s.length)throw Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${e.length}`);let o={};for(let u of n){let{name:n,params:l}=this.parseTypeName(r[u]);if(s.includes(n)){let r=s.indexOf(n),{name:l,params:c}=this.parseTypeName(e[r]);if(this.hasType(l)){o[u]=this.getTypeInterface(l)._decodeRaw.call(this,t,c,a);continue}if(!(l in a))throw Error(`Unable to find a matching type definition for ${l} in ${i}; make sure you passed a generic`);let{name:f,params:d}=this.parseTypeName(a[l]);o[u]=this.getTypeInterface(f)._decodeRaw.call(this,t,d,a)}else o[u]=this.getTypeInterface(n)._decodeRaw.call(this,t,l,a)}return o})}registerEnumType(t,e){for(let t in e){let r=this.tempKey(),n=e[t];null===n||Array.isArray(n)||"string"==typeof n||(e[t]=r,this.registerStructType(r,n))}let r=Object.freeze(e),n=Object.keys(r),{name:i,params:s}=this.parseTypeName(t);return this.registerType(t,function(t,e,a,o){if(!e)throw Error(`Unable to write enum "${i}", missing data.
Received: "${e}"`);if("object"!=typeof e)throw Error(`Incorrect data passed into enum "${i}", expected object with properties: "${n.join(" | ")}".
Received: "${JSON.stringify(e)}"`);let u=Object.keys(e)[0];if(void 0===u)throw Error(`Empty object passed as invariant of the enum "${i}"`);let l=n.indexOf(u);if(-1===l)throw Error(`Unknown invariant of the enum "${i}", allowed values: "${n.join(" | ")}"; received "${u}"`);let c=r[n[l]];if(t.write8(l),null===c)return t;let f=s.indexOf(c),d=-1===f?c:a[f];{let{name:r,params:n}=this.parseTypeName(d);return this.getTypeInterface(r)._encodeRaw.call(this,t,e[u],n,o)}},function(t,e,a){let o=t.readULEB(),u=n[o],l=r[u];if(-1===o)throw Error(`Decoding type mismatch, expected enum "${i}" invariant index, received "${o}"`);if(null===l)return{[u]:!0};let c=s.indexOf(l),f=-1===c?l:e[c];{let{name:e,params:r}=this.parseTypeName(f);return{[u]:this.getTypeInterface(e)._decodeRaw.call(this,t,r,a)}}})}getTypeInterface(t){let e=this.types.get(t);if("string"==typeof e){let t=[];for(;"string"==typeof e;){if(t.includes(e))throw Error(`Recursive definition found: ${t.join(" -> ")} -> ${e}`);t.push(e),e=this.types.get(e)}}if(void 0===e)throw Error(`Type ${t} is not registered`);return e}parseTypeName(t){if(Array.isArray(t)){let[e,...r]=t;return{name:e,params:r}}if("string"!=typeof t)throw Error(`Illegal type passed as a name of the type: ${t}`);let[e,r]=this.schema.genericSeparators||["<",">"],n=t.indexOf(e),i=Array.from(t).reverse().indexOf(r);if(-1===n&&-1===i)return{name:t,params:[]};if(-1===n||-1===i)throw Error(`Unclosed generic in name '${t}'`);return{name:t.slice(0,n),params:(0,c.fR)(t.slice(n+1,t.length-i-1),this.schema.genericSeparators)}}};d.U8="u8",d.U16="u16",d.U32="u32",d.U64="u64",d.U128="u128",d.U256="u256",d.BOOL="bool",d.VECTOR="vector",d.ADDRESS="address",d.STRING="string",d.HEX="hex-string",d.BASE58="base58-string",d.BASE64="base64-string";var p=r(21578);let g={u8:t=>(0,o.sN)({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...t}),u16:t=>(0,o.sN)({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...t}),u32:t=>(0,o.sN)({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:4294967296-1,...t}),u64:t=>(0,o.bZ)({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t}),u128:t=>(0,o.bZ)({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t}),u256:t=>(0,o.bZ)({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t}),bool:t=>(0,o.ZY)({name:"bool",size:1,read:t=>1===t.read8(),write:(t,e)=>e.write8(t?1:0),...t,validate:e=>{if(t?.validate?.(e),"boolean"!=typeof e)throw TypeError(`Expected boolean, found ${typeof e}`)}}),uleb128:t=>(0,o.pq)({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from((0,p.u)(t)),...t}),bytes:(t,e)=>(0,o.ZY)({name:`bytes[${t}]`,size:t,read:e=>e.readBytes(t),write:(e,r)=>{for(let n=0;n<t;n++)r.write8(e[n]??0)},...e,validate:r=>{if(e?.validate?.(r),!("length"in r))throw TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw TypeError(`Expected array of length ${t}, found ${r.length}`)}}),string:t=>(0,o.ws)({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...t}),fixedArray:(t,e,r)=>new o.mn({name:`${e.name}[${t}]`,read:r=>{let n=Array(t);for(let i=0;i<t;i++)n[i]=e.read(r);return n},write:(t,r)=>{for(let n of t)e.write(n,r)},...r,validate:e=>{if(r?.validate?.(e),!("length"in e))throw TypeError(`Expected array, found ${typeof e}`);if(e.length!==t)throw TypeError(`Expected array of length ${t}, found ${e.length}`)}}),option:t=>g.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:t=>null==t?{None:!0}:{Some:t},output:t=>"Some"in t?t.Some:null}),vector:(t,e)=>new o.mn({name:`vector<${t.name}>`,read:e=>{let r=e.readULEB(),n=Array(r);for(let i=0;i<r;i++)n[i]=t.read(e);return n},write:(e,r)=>{for(let n of(r.writeULEB(e.length),e))t.write(n,r)},...e,validate:t=>{if(e?.validate?.(t),!("length"in t))throw TypeError(`Expected array, found ${typeof t}`)}}),tuple:(t,e)=>new o.mn({name:`(${t.map(t=>t.name).join(", ")})`,serializedSize:e=>{let r=0;for(let n=0;n<t.length;n++){let i=t[n].serializedSize(e[n]);if(null==i)return null;r+=i}return r},read:e=>{let r=[];for(let n of t)r.push(n.read(e));return r},write:(e,r)=>{for(let n=0;n<t.length;n++)t[n].write(e[n],r)},...e,validate:r=>{if(e?.validate?.(r),!Array.isArray(r))throw TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw TypeError(`Expected array of length ${t.length}, found ${r.length}`)}}),struct(t,e,r){let n=Object.entries(e);return new o.mn({name:t,serializedSize:t=>{let e=0;for(let[r,i]of n){let n=i.serializedSize(t[r]);if(null==n)return null;e+=n}return e},read:t=>{let e={};for(let[r,i]of n)e[r]=i.read(t);return e},write:(t,e)=>{for(let[r,i]of n)i.write(t[r],e)},...r,validate:t=>{if(r?.validate?.(t),"object"!=typeof t||null==t)throw TypeError(`Expected object, found ${typeof t}`)}})},enum(t,e,r){let n=Object.entries(e);return new o.mn({name:t,read:t=>{let e=t.readULEB(),[r,i]=n[e];return{[r]:i?.read(t)??!0}},write:(t,e)=>{let[r,i]=Object.entries(t)[0];for(let t=0;t<n.length;t++){let[s,a]=n[t];if(s===r){e.writeULEB(t),a?.write(i,e);return}}},...r,validate:t=>{if(r?.validate?.(t),"object"!=typeof t||null==t)throw TypeError(`Expected object, found ${typeof t}`);let n=Object.keys(t);if(1!==n.length)throw TypeError(`Expected object with one key, found ${n.length}`);let[i]=n;if(!Object.hasOwn(e,i))throw TypeError(`Invalid enum variant ${i}`)}})},map:(t,e)=>g.vector(g.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:t=>[...t.entries()],output:t=>{let e=new Map;for(let[r,n]of t)e.set(r,n);return e}}),generic:(t,e)=>(...t)=>e(...t).transform({name:`${e.name}<${t.map(t=>t.name).join(", ")}>`,input:t=>t,output:t=>t}),lazy:t=>(0,o.um)(t)};var y=r(25780);let m=new d({genericSeparators:["<",">"],vectorType:"vector",addressLength:32,addressEncoding:"hex",types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function unsafe_u64(t){return g.u64({name:"unsafe_u64",...t}).transform({input:t=>t,output:t=>Number(t)})}function enumKind(t){return t.transform({input:t=>({[t.kind]:t}),output:t=>{let e=Object.keys(t)[0];return{kind:e,...t[e]}}})}let b=g.bytes(i.fK).transform({input:t=>"string"==typeof t?(0,u.H)((0,i.wo)(t)):t,output:t=>{let e=(0,u.d)(t).padStart(2*i.fK,"0"),r=(0,u.d)(n(new TextEncoder().encode(e)));return`BFC${e}${r.slice(0,4)}`}}),w=g.vector(g.u8()).transform({name:"ObjectDigest",input:t=>(0,s.n)(t),output:t=>(0,s.K)(new Uint8Array(t))}),v=g.struct("BenfenObjectRef",{objectId:b,version:g.u64(),digest:w}),S=g.struct("SharedObjectRef",{objectId:b,initialSharedVersion:g.u64(),mutable:g.bool()}),_=g.enum("ObjectArg",{ImmOrOwned:v,Shared:S,Receiving:v}),B=g.enum("CallArg",{Pure:g.vector(g.u8()),Object:_,ObjVec:g.vector(_)}),E=g.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:g.lazy(()=>E),struct:g.lazy(()=>M),u16:null,u32:null,u256:null}),T=enumKind(g.enum("Argument",{GasCoin:null,Input:g.struct("Input",{index:g.u16()}),Result:g.struct("Result",{index:g.u16()}),NestedResult:g.struct("NestedResult",{index:g.u16(),resultIndex:g.u16()})})),x=g.struct("ProgrammableMoveCall",{package:b,module:g.string(),function:g.string(),type_arguments:g.vector(E),arguments:g.vector(T)}).transform({input:t=>{let[e,r,n]=t.target.split("::"),s=t.typeArguments.map(t=>y.X.parseFromStr(t,!0));return{package:(0,i.wo)(e),module:r,function:n,type_arguments:s,arguments:t.arguments}},output:t=>({target:[t.package,t.module,t.function].join("::"),arguments:t.arguments,typeArguments:t.type_arguments.map(y.X.tagToString)})}),k=enumKind(g.enum("Transaction",{MoveCall:x,TransferObjects:g.struct("TransferObjects",{objects:g.vector(T),address:T}),SplitCoins:g.struct("SplitCoins",{coin:T,amounts:g.vector(T)}),MergeCoins:g.struct("MergeCoins",{destination:T,sources:g.vector(T)}),Publish:g.struct("Publish",{modules:g.vector(g.vector(g.u8())),dependencies:g.vector(b)}),MakeMoveVec:g.struct("MakeMoveVec",{type:g.enum("Option",{None:null,Some:E}),objects:g.vector(T)}),Upgrade:g.struct("Upgrade",{modules:g.vector(g.vector(g.u8())),dependencies:g.vector(b),packageId:b,ticket:T})})),A=g.struct("ProgrammableTransaction",{inputs:g.vector(B),transactions:g.vector(k)}),I=g.enum("TransactionKind",{ProgrammableTransaction:A,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),C=g.enum("TransactionExpiration",{None:null,Epoch:unsafe_u64()}),M=g.struct("StructTag",{address:b,module:g.string(),name:g.string(),typeParams:g.vector(E)}),O=g.struct("GasData",{payment:g.vector(v),owner:b,price:g.u64(),budget:g.u64()}),P=g.struct("TransactionDataV1",{kind:I,sender:b,gasData:O,expiration:C}),j=g.enum("TransactionData",{V1:P}),$=g.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),U=g.enum("IntentVersion",{V0:null}),z=g.enum("AppId",{Benfen:null}),N=g.struct("Intent",{scope:$,version:U,appId:z}),R=g.generic(["T"],t=>g.struct("IntentMessage<T>",{intent:N,value:t})),L=g.enum("CompressedSignature",{ED25519:g.fixedArray(64,g.u8()),Secp256k1:g.fixedArray(64,g.u8()),Secp256r1:g.fixedArray(64,g.u8()),ZkLogin:g.vector(g.u8())}),G=g.enum("PublicKey",{ED25519:g.fixedArray(32,g.u8()),Secp256k1:g.fixedArray(33,g.u8()),Secp256r1:g.fixedArray(33,g.u8()),ZkLogin:g.vector(g.u8())}),q=g.struct("MultiSigPkMap",{pubKey:G,weight:g.u8()}),H=g.struct("MultiSigPublicKey",{pk_map:g.vector(q),threshold:g.u16()}),K=g.struct("MultiSig",{sigs:g.vector(L),bitmap:g.u16(),multisig_pk:H}),W=g.vector(g.u8()).transform({input:t=>"string"==typeof t?(0,a.F)(t):t,output:t=>(0,a.z)(new Uint8Array(t))}),F=g.struct("SenderSignedTransaction",{intentMessage:R(j),txSignatures:g.vector(W)}),D=g.vector(F,{name:"SenderSignedData"}),V={...g,U8:g.u8(),U16:g.u16(),U32:g.u32(),U64:g.u64(),U128:g.u128(),U256:g.u256(),ULEB128:g.uleb128(),Bool:g.bool(),String:g.string(),Address:b,Argument:T,CallArg:B,CompressedSignature:L,GasData:O,MultiSig:K,MultiSigPkMap:q,MultiSigPublicKey:H,ObjectArg:_,ObjectDigest:w,ProgrammableMoveCall:x,ProgrammableTransaction:A,PublicKey:G,SenderSignedData:D,SenderSignedTransaction:F,SharedObjectRef:S,StructTag:M,BenfenObjectRef:v,Transaction:k,TransactionData:j,TransactionDataV1:P,TransactionExpiration:C,TransactionKind:I,TypeTag:E,ser:m.ser.bind(m),de:m.de.bind(m),getTypeInterface:m.getTypeInterface.bind(m),hasType:m.hasType.bind(m),parseTypeName:m.parseTypeName.bind(m),registerAddressType:m.registerAddressType.bind(m),registerAlias:m.registerAlias.bind(m),registerBcsType:m.registerBcsType.bind(m),registerEnumType:m.registerEnumType.bind(m),registerStructType:m.registerStructType.bind(m),registerType:m.registerType.bind(m),types:m.types};m.registerBcsType("utf8string",()=>g.string({name:"utf8string"})),m.registerBcsType("unsafe_u64",()=>unsafe_u64()),m.registerBcsType("enumKind",t=>enumKind(t)),[b,T,B,L,O,K,q,H,_,w,x,A,G,D,S,M,v,k,j,P,C,I,E].forEach(t=>{m.registerBcsType(t.name,()=>t)})},37471:function(t,e,r){"use strict";r.d(e,{K:function(){return toB58},n:function(){return fromB58}});var n=r(77191);let toB58=t=>n.encode(t),fromB58=t=>n.decode(t)},2296:function(t,e,r){"use strict";function fromB64(t){return Uint8Array.from(atob(t),t=>t.charCodeAt(0))}function toB64(t){if(t.length<8192)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=8192){let n=t.slice(r,r+8192);e+=String.fromCharCode(...n)}return btoa(e)}r.d(e,{F:function(){return fromB64},z:function(){return toB64}})},70761:function(t,e,r){"use strict";r.d(e,{ZY:function(){return fixedSizeBcsType},bZ:function(){return bigUIntBcsType},mn:function(){return g},pF:function(){return isSerializedBcs},pq:function(){return dynamicSizeBcsType},sN:function(){return uIntBcsType},um:function(){return lazyBcsType},ws:function(){return stringLikeBcsType}});var n,i,s,a,o=r(37471),u=r(2296),l=r(69362),c=r(27693),f=r(21578),d=r(69639),__accessCheck=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},__privateGet=(t,e,r)=>(__accessCheck(t,e,"read from private field"),r?r.call(t):e.get(t)),__privateAdd=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},__privateSet=(t,e,r,n)=>(__accessCheck(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);let p=class{constructor(t){__privateAdd(this,n,void 0),__privateAdd(this,i,void 0),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),__privateSet(this,n,t.write),__privateSet(this,i,t.serialize??((t,e)=>{let r=new d.B({size:this.serializedSize(t)??void 0,...e});return __privateGet(this,n).call(this,t,r),r.toBytes()})),this.validate=t.validate??(()=>{})}write(t,e){this.validate(t),__privateGet(this,n).call(this,t,e)}serialize(t,e){return this.validate(t),new SerializedBcs(this,__privateGet(this,i).call(this,t,e))}parse(t){let e=new c.r(t);return this.read(e)}transform({name:t,input:e,output:r}){return new p({name:t??this.name,read:t=>r(this.read(t)),write:(t,r)=>__privateGet(this,n).call(this,e(t),r),serializedSize:t=>this.serializedSize(e(t)),serialize:(t,r)=>__privateGet(this,i).call(this,e(t),r),validate:t=>this.validate(e(t))})}},g=p;n=new WeakMap,i=new WeakMap;let y=Symbol.for("@benfen/serialized-bcs");function isSerializedBcs(t){return!!t&&"object"==typeof t&&!0===t[y]}let SerializedBcs=class SerializedBcs{constructor(t,e){__privateAdd(this,s,void 0),__privateAdd(this,a,void 0),__privateSet(this,s,t),__privateSet(this,a,e)}get[y](){return!0}toBytes(){return __privateGet(this,a)}toHex(){return(0,l.d)(__privateGet(this,a))}toBase64(){return(0,u.z)(__privateGet(this,a))}toBase58(){return(0,o.K)(__privateGet(this,a))}parse(){return __privateGet(this,s).parse(__privateGet(this,a))}};function fixedSizeBcsType({size:t,...e}){return new g({...e,serializedSize:()=>t})}function uIntBcsType({readMethod:t,writeMethod:e,...r}){return fixedSizeBcsType({...r,read:e=>e[t](),write:(t,r)=>r[e](t),validate:t=>{if(t<0||t>r.maxValue)throw TypeError(`Invalid ${r.name} value: ${t}. Expected value in range 0-${r.maxValue}`);r.validate?.(t)}})}function bigUIntBcsType({readMethod:t,writeMethod:e,...r}){return fixedSizeBcsType({...r,read:e=>e[t](),write:(t,r)=>r[e](BigInt(t)),validate:t=>{let e=BigInt(t);if(e<0||e>r.maxValue)throw TypeError(`Invalid ${r.name} value: ${e}. Expected value in range 0-${r.maxValue}`);r.validate?.(e)}})}function dynamicSizeBcsType({serialize:t,...e}){let r=new g({...e,serialize:t,write:(t,e)=>{for(let n of r.serialize(t).toBytes())e.write8(n)}});return r}function stringLikeBcsType({toBytes:t,fromBytes:e,...r}){return new g({...r,read:t=>{let r=t.readULEB(),n=t.readBytes(r);return e(n)},write:(e,r)=>{let n=t(e);r.writeULEB(n.length);for(let t=0;t<n.length;t++)r.write8(n[t])},serialize:e=>{let r=t(e),n=(0,f.u)(r.length),i=new Uint8Array(n.length+r.length);return i.set(n,0),i.set(r,n.length),i},validate:t=>{if("string"!=typeof t)throw TypeError(`Invalid ${r.name} value: ${t}. Expected string`);r.validate?.(t)}})}function lazyBcsType(t){let e=null;function getType(){return e||(e=t()),e}return new g({name:"lazy",read:t=>getType().read(t),serializedSize:t=>getType().serializedSize(t),write:(t,e)=>getType().write(t,e),serialize:(t,e)=>getType().serialize(t,e).toBytes()})}s=new WeakMap,a=new WeakMap},69362:function(t,e,r){"use strict";function fromHEX(t){let e=/^BFC/i.test(t)?t.slice(3,-4):t.replace(/^0x/,""),r=e.length%2==0?e:`0${e}}`,n=r.match(/.{2}/g)?.map(t=>parseInt(t,16))??[];return Uint8Array.from(n)}function toHEX(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}r.d(e,{H:function(){return fromHEX},d:function(){return toHEX}})},27693:function(t,e,r){"use strict";r.d(e,{r:function(){return BcsReader}});var n=r(21578);let BcsReader=class BcsReader{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32();return BigInt("0x"+(this.read32().toString(16)+t.toString(16).padStart(8,"0"))).toString(10)}read128(){let t=BigInt(this.read64());return BigInt("0x"+(BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0"))).toString(10)}read256(){let t=BigInt(this.read128());return BigInt("0x"+(BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0"))).toString(10)}readBytes(t){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e,t);return this.shift(t),r}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,e=new Uint8Array(this.dataView.buffer,t),{value:r,length:i}=(0,n.y)(e);return this.shift(i),r}readVec(t){let e=this.readULEB(),r=[];for(let n=0;n<e;n++)r.push(t(this,n,e));return r}}},21578:function(t,e,r){"use strict";function ulebEncode(t){let e=[],r=0;if(0===t)return[0];for(;t>0;)e[r]=127&t,(t>>=7)&&(e[r]|=128),r+=1;return e}function ulebDecode(t){let e=0,r=0,n=0;for(;;){let i=t[n];if(n+=1,e|=(127&i)<<r,(128&i)==0)break;r+=7}return{value:e,length:n}}r.d(e,{u:function(){return ulebEncode},y:function(){return ulebDecode}})},71406:function(t,e,r){"use strict";r.d(e,{NX:function(){return decodeStr},fR:function(){return splitGenericParameters},zS:function(){return encodeStr}});var n=r(37471),i=r(2296),s=r(69362);function encodeStr(t,e){switch(e){case"base58":return(0,n.K)(t);case"base64":return(0,i.z)(t);case"hex":return(0,s.d)(t);default:throw Error("Unsupported encoding, supported values are: base64, hex")}}function decodeStr(t,e){switch(e){case"base58":return(0,n.n)(t);case"base64":return(0,i.F)(t);case"hex":return(0,s.H)(t);default:throw Error("Unsupported encoding, supported values are: base64, hex")}}function splitGenericParameters(t,e=["<",">"]){let[r,n]=e,i=[],s="",a=0;for(let e=0;e<t.length;e++){let o=t[e];if(o===r&&a++,o===n&&a--,0===a&&","===o){i.push(s.trim()),s="";continue}s+=o}return i.push(s.trim()),i}},69639:function(t,e,r){"use strict";r.d(e,{B:function(){return BcsWriter}});var n=r(21578),i=r(71406);let BcsWriter=class BcsWriter{constructor({size:t=1024,maxSize:e,allocateSize:r=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=e||t,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){let e=this.bytePosition+t;if(e>this.size){let t=Math.min(this.maxSize,this.size+this.allocateSize);if(e>t)throw Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${e}`);this.size=t;let r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return toLittleEndian(BigInt(t),8).forEach(t=>this.write8(t)),this}write128(t){return toLittleEndian(BigInt(t),16).forEach(t=>this.write8(t)),this}write256(t){return toLittleEndian(BigInt(t),32).forEach(t=>this.write8(t)),this}writeULEB(t){return(0,n.u)(t).forEach(t=>this.write8(t)),this}writeVec(t,e){return this.writeULEB(t.length),Array.from(t).forEach((r,n)=>e(this,r,n,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return(0,i.zS)(this.toBytes(),t)}};function toLittleEndian(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t/=BigInt(256),n+=1;return r}},25780:function(t,e,r){"use strict";r.d(e,{X:function(){return TypeTagSerializer}});var n=r(29269),i=r(71406);let s=/^vector<(.+)>$/,a=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let TypeTagSerializer=class TypeTagSerializer{static parseFromStr(t,e=!1){if("address"===t)return{address:null};if("bool"===t)return{bool:null};if("u8"===t)return{u8:null};if("u16"===t)return{u16:null};if("u32"===t)return{u32:null};if("u64"===t)return{u64:null};if("u128"===t)return{u128:null};else if("u256"===t)return{u256:null};else if("signer"===t)return{signer:null};let r=t.match(s);if(r)return{vector:TypeTagSerializer.parseFromStr(r[1],e)};let i=t.match(a);if(i){let t=e?(0,n.wo)(i[1]):i[1];return{struct:{address:t,module:i[2],name:i[3],typeParams:void 0===i[5]?[]:TypeTagSerializer.parseStructTypeArgs(i[5],e)}}}throw Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,e=!1){return(0,i.fR)(t).map(t=>TypeTagSerializer.parseFromStr(t,e))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${TypeTagSerializer.tagToString(t.vector)}>`;if("struct"in t){let e=t.struct,r=e.typeParams.map(TypeTagSerializer.tagToString).join(", ");return`${e.address}::${e.module}::${e.name}${r?`<${r}>`:""}`}throw Error("Invalid TypeTag")}}},56787:function(t,e,r){"use strict";function getFullnodeUrl(t){switch(t){case"mainnet":return"https://rpc-mainnet.benfen.org";case"testnet":return"https://testrpc.benfen.org";case"devnet":return"https://devrpc.benfen.org";case"localnet":return"http://127.0.0.1:9000";default:throw Error(`Unknown network: ${t}`)}}r.d(e,{I:function(){return getFullnodeUrl}})},43580:function(t,e,r){"use strict";r.d(e,{p:function(){return P},r:function(){return BenfenClientProvider}});var n,i,s,a,o,u,l,c,f,d,p,g,y,m,b,w=r(85893),v=r(67294),S=r(56787),_=r(2296),B=r(37471),E=r(69362),T=r(60452);let x=/^(?:[a-z0-9][a-z0-9-]{0,62}(?:\.[a-z0-9][a-z0-9-]{0,62})*)?@[a-z0-9][a-z0-9-]{0,62}$/i,k=/^(?:[a-z0-9][a-z0-9-]{0,62}\.)+benfen$/i;var A=r(29269),I=r(75955);let C={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};let BenfenHTTPTransportError=class BenfenHTTPTransportError extends Error{};let JsonRpcError=class JsonRpcError extends BenfenHTTPTransportError{constructor(t,e){super(t),this.code=e,this.type=C[e]??"ServerError"}};let BenfenHTTPStatusError=class BenfenHTTPStatusError extends BenfenHTTPTransportError{constructor(t,e,r){super(t),this.status=e,this.statusText=r}};var __accessCheck=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},__privateGet=(t,e,r)=>(__accessCheck(t,e,"read from private field"),r?r.call(t):e.get(t)),__privateAdd=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},__privateSet=(t,e,r,n)=>(__accessCheck(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),__privateWrapper=(t,e,r,n)=>({set _(value){__privateSet(t,e,value,r)},get _(){return __privateGet(t,e,n)}}),__privateMethod=(t,e,r)=>(__accessCheck(t,e,"access private method"),r);let M={WebSocketConstructor:"undefined"!=typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};let WebsocketClient=class WebsocketClient{constructor(t,e={}){if(__privateAdd(this,l),__privateAdd(this,f),__privateAdd(this,n,0),__privateAdd(this,i,0),__privateAdd(this,s,null),__privateAdd(this,a,null),__privateAdd(this,o,new Set),__privateAdd(this,u,new Map),this.endpoint=t,this.options={...M,...e},!this.options.WebSocketConstructor)throw Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function(t){let e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}(this.endpoint))}async makeRequest(t,e){let r=await __privateMethod(this,l,c).call(this);return new Promise((i,s)=>{__privateSet(this,n,__privateGet(this,n)+1),__privateGet(this,u).set(__privateGet(this,n),{resolve:i,reject:s,timeout:setTimeout(()=>{__privateGet(this,u).delete(__privateGet(this,n)),s(Error(`Request timeout: ${t}`))},this.options.callTimeout)}),r.send(JSON.stringify({jsonrpc:"2.0",id:__privateGet(this,n),method:t,params:e}))}).then(({error:t,result:e})=>{if(t)throw new JsonRpcError(t.message,t.code);return e})}async subscribe(t){let e=new RpcSubscription(t);return __privateGet(this,o).add(e),await e.subscribe(this),()=>e.unsubscribe(this)}};n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,u=new WeakMap,l=new WeakSet,c=function(){return __privateGet(this,a)||__privateSet(this,a,new Promise(t=>{__privateGet(this,s)?.close(),__privateSet(this,s,new this.options.WebSocketConstructor(this.endpoint)),__privateGet(this,s).addEventListener("open",()=>{__privateSet(this,i,0),t(__privateGet(this,s))}),__privateGet(this,s).addEventListener("close",()=>{__privateWrapper(this,i)._++,__privateGet(this,i)<=this.options.maxReconnects&&setTimeout(()=>{__privateMethod(this,f,d).call(this)},this.options.reconnectTimeout)}),__privateGet(this,s).addEventListener("message",({data:t})=>{let e;try{e=JSON.parse(t)}catch(e){console.error(Error(`Failed to parse RPC message: ${t}`,{cause:e}));return}if("id"in e&&null!=e.id&&__privateGet(this,u).has(e.id)){let{resolve:t,timeout:r}=__privateGet(this,u).get(e.id);clearTimeout(r),t(e)}else if("params"in e){let{params:t}=e;__privateGet(this,o).forEach(e=>{e.subscriptionId===t.subscription&&t.subscription===e.subscriptionId&&e.onMessage(t.result)})}})})),__privateGet(this,a)},f=new WeakSet,d=async function(){return __privateGet(this,s)?.close(),__privateSet(this,a,null),Promise.allSettled([...__privateGet(this,o)].map(t=>t.subscribe(this)))};let RpcSubscription=class RpcSubscription{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){let{subscriptionId:e}=this;return this.subscribed=!1,null!=e&&(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[e]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;let e=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=e)}};var http_transport_accessCheck=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},http_transport_privateGet=(t,e,r)=>(http_transport_accessCheck(t,e,"read from private field"),r?r.call(t):e.get(t)),http_transport_privateAdd=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},http_transport_privateSet=(t,e,r,n)=>(http_transport_accessCheck(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),http_transport_privateMethod=(t,e,r)=>(http_transport_accessCheck(t,e,"access private method"),r);let BenfenHTTPTransport=class BenfenHTTPTransport{constructor(t){http_transport_privateAdd(this,m),http_transport_privateAdd(this,p,0),http_transport_privateAdd(this,g,void 0),http_transport_privateAdd(this,y,void 0),http_transport_privateSet(this,g,t)}fetch(t,e){let r=http_transport_privateGet(this,g).fetch??globalThis.fetch;if(!r)throw Error("The current environment does not support fetch, you can provide a fetch implementation in the options for BenfenHTTPTransport.");return r(t,e)}async request(t){http_transport_privateSet(this,p,http_transport_privateGet(this,p)+1);let e=await this.fetch(http_transport_privateGet(this,g).rpc?.url??http_transport_privateGet(this,g).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":"0.2.7","Client-Target-Api-Version":"1.20.1",...http_transport_privateGet(this,g).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:http_transport_privateGet(this,p),method:t.method,params:t.params})});if(!e.ok)throw new BenfenHTTPStatusError(`Unexpected status code: ${e.status}`,e.status,e.statusText);let r=await e.json();if("error"in r&&null!=r.error)throw new JsonRpcError(r.error.message,r.error.code);return r.result}async subscribe(t){let e=await http_transport_privateMethod(this,m,b).call(this).subscribe(t);return async()=>!!await e()}};p=new WeakMap,g=new WeakMap,y=new WeakMap,m=new WeakSet,b=function(){if(!http_transport_privateGet(this,y)){let t=http_transport_privateGet(this,g).WebSocketConstructor??globalThis.WebSocket;if(!t)throw Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for BenfenHTTPTransport.");http_transport_privateSet(this,y,new WebsocketClient(http_transport_privateGet(this,g).websocket?.url??http_transport_privateGet(this,g).url,{WebSocketConstructor:t,...http_transport_privateGet(this,g).websocket}))}return http_transport_privateGet(this,y)};let O=Symbol.for("@benfen/BenfenClient");let BenfenClient=class BenfenClient{get[O](){return!0}constructor(t){this.transport=t.transport??new BenfenHTTPTransport({url:t.url})}async getRpcApiVersion(){let t=await this.transport.request({method:"rpc.discover",params:[]});return t.info.version}async getCoins(t){if(!t.owner||!(0,A.OM)((0,A.wo)(t.owner)))throw Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!(0,A.OM)((0,A.wo)(t.owner)))throw Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!(0,A.OM)((0,A.wo)(t.owner)))throw Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!(0,A.OM)((0,A.wo)(t.owner)))throw Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"bfcx_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"bfcx_getTotalSupply",params:[t.coinType]})}async call(t,e){return await this.transport.request({method:t,params:e})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"bfc_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"bfc_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"bfc_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"bfc_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"bfc_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!(0,A.OM)((0,A.wo)(t.owner)))throw Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!(0,A.z3)((0,I.RD)(t.id)))throw Error("Invalid Benfen Object id");return await this.transport.request({method:"bfc_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"bfc_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){t.ids.forEach(t=>{if(!t||!(0,A.z3)((0,I.RD)(t)))throw Error(`Invalid Benfen Object id ${t}`)});let e=t.ids.length!==new Set(t.ids).size;if(e)throw Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"bfc_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"bfcx_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,"descending"===(t.order||"descending")]})}async getTransactionBlock(t){if(!(0,A.iI)(t.digest))throw Error("Invalid Transaction digest");return await this.transport.request({method:"bfc_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){t.digests.forEach(t=>{if(!(0,A.iI)(t))throw Error(`Invalid Transaction digest ${t}`)});let e=t.digests.length!==new Set(t.digests).size;if(e)throw Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"bfc_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock(t){return await this.transport.request({method:"bfc_executeTransactionBlock",params:["string"==typeof t.transactionBlock?t.transactionBlock:(0,_.z)(t.transactionBlock),Array.isArray(t.signature)?t.signature:[t.signature],t.options,t.requestType]})}async signAndExecuteTransactionBlock({transactionBlock:t,signer:e,...r}){let n;t instanceof Uint8Array?n=t:(t.setSenderIfNotSet(e.toHexAddress()),n=await t.build({client:this}));let{signature:i,bytes:s}=await e.signTransactionBlock(n);return this.executeTransactionBlock({transactionBlock:s,signature:i,...r})}async getTotalTransactionBlocks(){let t=await this.transport.request({method:"bfc_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){let t=await this.transport.request({method:"bfcx_getReferenceGasPrice",params:[]});return BigInt(t)}async getStableRate(t){let e=await this.transport.request({method:"bfcx_getStableRate",params:[t.replace(/^0x/,"")]});return e}async getStakes(t){if(!t.owner||!(0,A.OM)((0,A.wo)(t.owner)))throw Error("Invalid Benfen address");return await this.transport.request({method:"bfcx_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedBfcIds.forEach(t=>{if(!t||!(0,A.z3)((0,I.RD)(t)))throw Error(`Invalid Bfc Stake id ${t}`)}),await this.transport.request({method:"bfcx_getStakesByIds",params:[t.stakedBfcIds]})}async getLatestBenfeSystemState(){return await this.transport.request({method:"bfcx_getLatestSuiSystemState",params:[]})}async getNetworkOverview(){let t=await this.transport.request({method:"bfcx_getNetworkOverview",params:[]});return t}async getInnerDao(){return await this.transport.request({method:"bfc_getInnerDaoInfo",params:[]})}async getDaoProposalWithVoter(t){return await this.transport.request({method:"bfcx_getDaoProposals",params:[t]})}async queryEvents(t){return await this.transport.request({method:"bfcx_queryEvents",params:[t.query,t.cursor,t.limit,"descending"===(t.order||"descending")]})}async subscribeEvent(t){return this.transport.subscribe({method:"bfcx_subscribeEvent",unsubscribe:"bfcx_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"bfcx_subscribeTransaction",unsubscribe:"bfcx_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){let e;if((0,T.nv)(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),e=(0,_.z)(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof t.transactionBlock)e=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)e=(0,_.z)(t.transactionBlock);else throw Error("Unknown transaction block format.");return await this.transport.request({method:"bfc_devInspectTransactionBlock",params:[t.sender,e,t.gasPrice?.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"bfc_dryRunTransactionBlock",params:["string"==typeof t.transactionBlock?t.transactionBlock:(0,_.z)(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!(0,A.z3)((0,I.RD)(t.parentId)))throw Error("Invalid Benfen Object id");return await this.transport.request({method:"bfcx_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"bfcx_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){let t=await this.transport.request({method:"bfc_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"bfc_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"bfc_getCheckpoints",params:[t.cursor,t?.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"bfcx_getCommitteeInfo",params:[t?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"bfcx_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"bfcx_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"bfcx_getEpochMetrics",params:[t?.cursor,t?.limit,t?.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"bfcx_getAllEpochAddressMetrics",params:[t?.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"bfcx_getEpochs",params:[t?.cursor,t?.limit,t?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"bfcx_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"bfcx_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"bfcx_getValidatorsApy",params:[]})}async getChainIdentifier(){let t=await this.getCheckpoint({id:"0"}),e=(0,B.n)(t.digest);return(0,E.d)(e.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"bfcx_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...e}){let{nextCursor:r,hasNextPage:n,data:i}=await this.transport.request({method:"bfcx_resolveNameServiceNames",params:[e.address,e.cursor,e.limit]});return{hasNextPage:n,nextCursor:r,data:i.map(e=>(function(t,e="at"){let r;let n=t.toLowerCase();if(n.includes("@")){if(!x.test(n))throw Error(`Invalid BenfenNS name ${t}`);let[e,i]=n.split("@");r=[...e?e.split("."):[],i]}else{if(!k.test(n))throw Error(`Invalid BenfenNS name ${t}`);r=n.split(".").slice(0,-1)}return"dot"===e?`${r.join(".")}.benfen`:`${r.slice(0,-1).join(".")}@${r[r.length-1]}`})(e,t))}}async getProtocolConfig(t){return await this.transport.request({method:"bfc_getProtocolConfig",params:[t?.version]})}async waitForTransactionBlock({signal:t,timeout:e=6e4,pollInterval:r=2e3,...n}){let i=AbortSignal.timeout(e),s=new Promise((t,e)=>{i.addEventListener("abort",()=>e(i.reason))});for(s.catch(()=>{});!i.aborted;){t?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch(t){await Promise.race([new Promise(t=>setTimeout(t,r)),s])}}throw i.throwIfAborted(),Error("Unexpected error while waiting for transaction block.")}};let P=(0,v.createContext)(null),j={localnet:{url:(0,S.I)("localnet")}},DEFAULT_CREATE_CLIENT=function(t,e){return"object"==typeof e&&null!==e&&!0===e[O]?e:new BenfenClient(e)};function BenfenClientProvider(t){let{onNetworkChange:e,network:r,children:n}=t,i=t.networks??j,s=t.createClient??DEFAULT_CREATE_CLIENT,[a,o]=(0,v.useState)(t.network??t.defaultNetwork??Object.keys(i)[0]),u=t.network??a,l=(0,v.useMemo)(()=>s(u,i[u]),[s,u,i]),c=(0,v.useMemo)(()=>({client:l,networks:i,network:u,config:i[u]instanceof BenfenClient?null:i[u],selectNetwork:t=>{u!==t&&(r||t===a||o(t),e?.(t))}}),[l,i,a,u,r,e]);return(0,w.jsx)(P.Provider,{value:c,children:n})}},30653:function(t,e,r){"use strict";r.d(e,{n:function(){return WalletProvider}});var n=r(85893),i=r(67294);function createInMemoryStore(){let t=new Map;return{getItem:e=>t.get(e),setItem(e,r){t.set(e,r)},removeItem(e){t.delete(e)}}}let s="undefined"!=typeof window&&window.localStorage?localStorage:createInMemoryStore(),a=["bfc:signTransactionBlock"],o=["Benfen Wallet"];var u=r(55052),l=r(10777),c=r(45003);let f=["standard:connect","standard:events"];function getRegisteredWallets(t,e){let r=(0,c.M)(),n=r.get(),i=n.filter(t=>(function(t,e=[]){return[...f,...e].every(e=>e in t.features)})(t,e));return[...t.map(t=>i.find(e=>e.name===t)).filter(Boolean),...i.filter(e=>!t.includes(e.name))]}function getWalletUniqueIdentifier(t){return t?.id??t?.name}var d=r(78921),p=r(28645),g=r(42348),y=r(16745),m=r(43973),b=r(782);function WalletProvider({preferredWallets:t=o,requiredFeatures:e=a,storage:r=s,storageKey:l="bfc-dapp-kit:wallet-connection-info",autoConnect:c=!1,children:f}){let d=(0,i.useRef)(function({wallets:t,storage:e,storageKey:r,autoConnectEnabled:n}){return(0,m.M)()((0,b.tJ)((e,r)=>({autoConnectEnabled:n,wallets:t,accounts:[],currentWallet:null,currentAccount:null,lastConnectedAccountAddress:null,lastConnectedWalletName:null,connectionStatus:"disconnected",setConnectionStatus(t){e(()=>({connectionStatus:t}))},setWalletConnected(t,r,n){e(()=>({accounts:r,currentWallet:t,currentAccount:n,lastConnectedWalletName:getWalletUniqueIdentifier(t),lastConnectedAccountAddress:n?.address,connectionStatus:"connected"}))},setWalletDisconnected(){e(()=>({accounts:[],currentWallet:null,currentAccount:null,lastConnectedWalletName:null,lastConnectedAccountAddress:null,connectionStatus:"disconnected"}))},setAccountSwitched(t){e(()=>({currentAccount:t,lastConnectedAccountAddress:t.address}))},setWalletRegistered(t){e(()=>({wallets:t}))},setWalletUnregistered(t,n){n===r().currentWallet?e(()=>({wallets:t,accounts:[],currentWallet:null,currentAccount:null,lastConnectedWalletName:null,lastConnectedAccountAddress:null,connectionStatus:"disconnected"})):e(()=>({wallets:t}))},updateWalletAccounts(t){let n=r().currentAccount;e(()=>({accounts:t,currentAccount:n&&t.find(({address:t})=>t===n.address)||t[0]}))}}),{name:r,storage:(0,b.FL)(()=>e),partialize:({lastConnectedWalletName:t,lastConnectedAccountAddress:e})=>({lastConnectedWalletName:t,lastConnectedAccountAddress:e})}))}({autoConnectEnabled:c,wallets:getRegisteredWallets(t,e),storage:r||createInMemoryStore(),storageKey:l}));return(0,n.jsx)(u.z.Provider,{value:d.current,children:(0,n.jsx)(WalletConnectionManager,{preferredWallets:t,requiredFeatures:e,children:f})})}function WalletConnectionManager({preferredWallets:t=o,requiredFeatures:e=a,children:r}){return!function(t,e){let r=(0,y.X)(t=>t.setWalletRegistered),n=(0,y.X)(t=>t.setWalletUnregistered);(0,i.useEffect)(()=>{let i=(0,c.M)(),s=[],a=window.setInterval(()=>{let n=i.get(),a=n.filter(t=>!s.includes(t));a.length>0&&(r(getRegisteredWallets(t,e)),s=[...n])},100),o=i.on("register",()=>{r(getRegisteredWallets(t,e))}),u=i.on("unregister",r=>{n(getRegisteredWallets(t,e),r)});return()=>{o(),u(),clearInterval(a)}},[t,e,r,n])}(t,e),!function(){let{currentWallet:t}=(0,p.B)(),e=(0,y.X)(t=>t.updateWalletAccounts);(0,i.useEffect)(()=>{let r=t?.features["standard:events"].on("change",({accounts:t})=>{t&&e(t)});return r},[t?.features,e])}(),!function(){let{mutateAsync:t}=(0,d.O)(),e=(0,y.X)(t=>t.autoConnectEnabled),r=(0,y.X)(t=>t.lastConnectedWalletName),n=(0,y.X)(t=>t.lastConnectedAccountAddress),s=(0,g.r)(),{isConnected:a}=(0,p.B)(),[o,u]=(0,i.useState)(!1);(0,i.useLayoutEffect)(()=>{u(!0)},[]);let{data:c,isError:f}=(0,l.a)({queryKey:["@benfen/bfc.js/dapp-kit","autoconnect",{isConnected:a,autoConnectEnabled:e,lastConnectedWalletName:r,lastConnectedAccountAddress:n,walletCount:s.length}],queryFn:async()=>{if(!e)return"disabled";if(!r||!n||a)return"attempted";let i=s.find(t=>getWalletUniqueIdentifier(t)===r);return i&&await t({wallet:i,accountAddress:n,silent:!0}),"attempted"},enabled:e,persister:void 0,gcTime:0,staleTime:0,networkMode:"always",retry:!1,retryOnMount:!1,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1})}(),r}},78604:function(t,e,r){"use strict";r.d(e,{G:function(){return n}});let n={all:{baseScope:"wallet"},connectWallet:formMutationKeyFn("connect-wallet"),autoconnectWallet:formMutationKeyFn("autoconnect-wallet"),disconnectWallet:formMutationKeyFn("disconnect-wallet"),signPersonalMessage:formMutationKeyFn("sign-personal-message"),signTransactionBlock:formMutationKeyFn("sign-transaction-block"),signAndExecuteTransactionBlock:formMutationKeyFn("sign-and-execute-transaction-block"),switchAccount:formMutationKeyFn("switch-account"),switchChain:formMutationKeyFn("switch-chain")};function formMutationKeyFn(t){return function(e=[]){return[{...n.all,baseEntity:t},...e]}}},55052:function(t,e,r){"use strict";r.d(e,{z:function(){return i}});var n=r(67294);let i=(0,n.createContext)(null)},81651:function(t,e,r){"use strict";r.d(e,{K0:function(){return WalletNoAccountSelectedError},oS:function(){return WalletNotConnectedError},rl:function(){return WalletFeatureNotSupportedError}});let WalletNotConnectedError=class WalletNotConnectedError extends Error{};let WalletNoAccountSelectedError=class WalletNoAccountSelectedError extends Error{};let WalletFeatureNotSupportedError=class WalletFeatureNotSupportedError extends Error{}},51853:function(t,e,r){"use strict";r.d(e,{m:function(){return createNetworkConfig}});var n=r(2712);function createNetworkConfig(t){function useNetworkConfig(){let{config:t}=(0,n.F)();if(!t)throw Error("No network config found");return t}function useNetworkVariables(){let{variables:t}=useNetworkConfig();return t??{}}return{networkConfig:t,useNetworkConfig,useNetworkVariables,useNetworkVariable:function(t){let e=useNetworkVariables();return e[t]}}}},2712:function(t,e,r){"use strict";r.d(e,{F:function(){return useBenfenClientContext},U:function(){return useBenfenClient}});var n=r(67294),i=r(43580);function useBenfenClientContext(){let t=(0,n.useContext)(i.p);if(!t)throw Error("Could not find BenfenClientContext. Ensure that you have set up the BenfenClientProvider");return t}function useBenfenClient(){return useBenfenClientContext().client}},78921:function(t,e,r){"use strict";r.d(e,{O:function(){return useConnectWallet}});var n=r(98029),i=r(78604),s=r(16745);function useConnectWallet({mutationKey:t,...e}={}){let r=(0,s.X)(t=>t.setWalletConnected),a=(0,s.X)(t=>t.setConnectionStatus);return(0,n.D)({mutationKey:i.G.connectWallet(t),mutationFn:async({wallet:t,accountAddress:e,...n})=>{try{a("connecting");let i=await t.features["standard:connect"].connect(n),s=i.accounts.filter(t=>t.chains.some(t=>"bfc"===t.split(":")[0])),o=function(t,e){if(0===t.length)return null;if(e){let r=t.find(t=>t.address===e);return r??t[0]}return t[0]}(s,e);return r(t,s,o),{accounts:s}}catch(t){throw a("disconnected"),t}},...e})}},39922:function(t,e,r){"use strict";r.d(e,{t:function(){return useCurrentAccount}});var n=r(16745);function useCurrentAccount(){return(0,n.X)(t=>t.currentAccount)}},28645:function(t,e,r){"use strict";r.d(e,{B:function(){return useCurrentWallet}});var n=r(16745);function useCurrentWallet(){let t=(0,n.X)(t=>t.currentWallet),e=(0,n.X)(t=>t.connectionStatus);switch(e){case"connecting":return{connectionStatus:e,currentWallet:null,isDisconnected:!1,isConnecting:!0,isConnected:!1};case"disconnected":return{connectionStatus:e,currentWallet:null,isDisconnected:!0,isConnecting:!1,isConnected:!1};case"connected":return{connectionStatus:e,currentWallet:t,isDisconnected:!1,isConnecting:!1,isConnected:!0}}}},18177:function(t,e,r){"use strict";r.d(e,{b:function(){return useDisconnectWallet}});var n=r(98029),i=r(78604),s=r(81651),a=r(28645),o=r(16745);function useDisconnectWallet({mutationKey:t,...e}={}){let{currentWallet:r}=(0,a.B)(),u=(0,o.X)(t=>t.setWalletDisconnected);return(0,n.D)({mutationKey:i.G.disconnectWallet(t),mutationFn:async()=>{if(!r)throw new s.oS("No wallet is connected.");try{await r.features["standard:disconnect"]?.disconnect()}catch(t){console.error("Failed to disconnect the application from the current wallet.",t)}u()},...e})}},84984:function(t,e,r){"use strict";r.d(e,{O:function(){return useSignAndExecuteTransactionBlock}});var n=r(98029),i=r(78604),s=r(81651),a=r(2712),o=r(39922),u=r(28645);function useSignAndExecuteTransactionBlock({mutationKey:t,executeFromWallet:e,...r}={}){let{currentWallet:l}=(0,u.B)(),c=(0,o.t)(),f=(0,a.U)();return(0,n.D)({mutationKey:i.G.signAndExecuteTransactionBlock(t),mutationFn:async({requestType:t,options:r,...n})=>{if(!l)throw new s.oS("No wallet is connected.");let i=n.account??c;if(!i)throw new s.K0("No wallet account is selected to sign and execute the transaction block with.");if(e){let e=l.features["bfc:signAndExecuteTransactionBlock"];if(!e)throw new s.rl("This wallet doesn't support the `signAndExecuteTransactionBlock` feature.");return e.signAndExecuteTransactionBlock({...n,account:i,chain:n.chain??i.chains[0],requestType:t,options:r})}let a=l.features["bfc:signTransactionBlock"];if(!a)throw new s.rl("This wallet doesn't support the `signTransactionBlock` feature.");let{signature:o,transactionBlockBytes:u}=await a.signTransactionBlock({...n,account:i,chain:n.chain??i.chains[0]});return f.executeTransactionBlock({transactionBlock:u,signature:o,requestType:t,options:r})},...r})}},36374:function(t,e,r){"use strict";r.d(e,{L:function(){return useSignPersonalMessage}});var n=r(98029),i=r(81651),s=r(78604),a=r(39922),o=r(28645);function useSignPersonalMessage({mutationKey:t,...e}={}){let{currentWallet:r}=(0,o.B)(),u=(0,a.t)();return(0,n.D)({mutationKey:s.G.signPersonalMessage(t),mutationFn:async t=>{if(!r)throw new i.oS("No wallet is connected.");let e=t.account??u;if(!e)throw new i.K0("No wallet account is selected to sign the personal message with.");let n=r.features["bfc:signPersonalMessage"];if(n)return await n.signPersonalMessage({...t,account:e});let s=r.features["bfc:signMessage"];if(s){console.warn("This wallet doesn't support the `signPersonalMessage` feature... falling back to `signMessage`.");let{messageBytes:r,signature:n}=await s.signMessage({...t,account:e});return{bytes:r,signature:n}}throw new i.rl("This wallet doesn't support the `signPersonalMessage` feature.")},...e})}},96126:function(t,e,r){"use strict";r.d(e,{R:function(){return useSignTransactionBlock}});var n=r(98029),i=r(81651),s=r(78604),a=r(39922),o=r(28645);function useSignTransactionBlock({mutationKey:t,...e}={}){let{currentWallet:r}=(0,o.B)(),u=(0,a.t)();return(0,n.D)({mutationKey:s.G.signTransactionBlock(t),mutationFn:async t=>{if(!r)throw new i.oS("No wallet is connected.");let e=t.account??u;if(!e)throw new i.K0("No wallet account is selected to sign the transaction block with.");let n=r.features["bfc:signTransactionBlock"];if(!n)throw new i.rl("This wallet doesn't support the `SignTransactionBlock` feature.");return await n.signTransactionBlock({...t,account:e,chain:t.chain??e.chains[0]})},...e})}},16745:function(t,e,r){"use strict";r.d(e,{X:function(){return useWalletStore}});var n=r(67294),i=r(73445),s=r(55052);function useWalletStore(t){let e=(0,n.useContext)(s.z);if(!e)throw Error("Could not find WalletContext. Ensure that you have set up the WalletProvider.");return(0,i.oR)(e,t)}},42348:function(t,e,r){"use strict";r.d(e,{r:function(){return useWallets}});var n=r(16745);function useWallets(){return(0,n.X)(t=>t.wallets)}},60452:function(t,e,r){"use strict";r.d(e,{l2:function(){return tp},Q6:function(){return td},a6:function(){return ty},nv:function(){return isTransactionBlock}});let StructError=class StructError extends TypeError{constructor(t,e){let r;let{message:n,explanation:i,...s}=t,{path:a}=t,o=0===a.length?n:`At path: ${a.join(".")} -- ${n}`;super(i??o),null!=i&&(this.cause=o),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}};function isObject(t){return"object"==typeof t&&null!=t}function print(t){return"symbol"==typeof t?t.toString():"string"==typeof t?JSON.stringify(t):`${t}`}function*toFailures(t,e,r,n){var i;for(let s of(isObject(i=t)&&"function"==typeof i[Symbol.iterator]||(t=[t]),t)){let t=function(t,e,r,n){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});let{path:i,branch:s}=e,{type:a}=r,{refinement:o,message:u=`Expected a value of type \`${a}\`${o?` with refinement \`${o}\``:""}, but received: \`${print(n)}\``}=t;return{value:n,type:a,refinement:o,key:i[i.length-1],path:i,branch:s,...t,message:u}}(s,e,r,n);t&&(yield t)}}function*run(t,e,r={}){let{path:n=[],branch:i=[t],coerce:s=!1,mask:a=!1}=r,o={path:n,branch:i};if(s&&(t=e.coercer(t,o),a&&"type"!==e.type&&isObject(e.schema)&&isObject(t)&&!Array.isArray(t)))for(let r in t)void 0===e.schema[r]&&delete t[r];let u="valid";for(let n of e.validator(t,o))n.explanation=r.message,u="not_valid",yield[n,void 0];for(let[l,c,f]of e.entries(t,o)){let e=run(c,f,{path:void 0===l?n:[...n,l],branch:void 0===l?i:[...i,c],coerce:s,mask:a,message:r.message});for(let r of e)r[0]?(u=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):s&&(c=r[1],void 0===l?t=c:t instanceof Map?t.set(l,c):t instanceof Set?t.add(c):isObject(t)&&(void 0!==c||l in t)&&(t[l]=c))}if("not_valid"!==u)for(let n of e.refiner(t,o))n.explanation=r.message,u="not_refined",yield[n,void 0];"valid"===u&&(yield[void 0,t])}let Struct=class Struct{constructor(t){let{type:e,schema:r,validator:n,refiner:i,coercer:s=t=>t,entries:a=function*(){}}=t;this.type=e,this.schema=r,this.entries=a,this.coercer=s,n?this.validator=(t,e)=>{let r=n(t,e);return toFailures(r,e,this,t)}:this.validator=()=>[],i?this.refiner=(t,e)=>{let r=i(t,e);return toFailures(r,e,this,t)}:this.refiner=()=>[]}assert(t,e){return dist_assert(t,this,e)}create(t,e){return create(t,this,e)}is(t){return dist_is(t,this)}mask(t,e){return mask(t,this,e)}validate(t,e={}){return validate(t,this,e)}};function dist_assert(t,e,r){let n=validate(t,e,{message:r});if(n[0])throw n[0]}function create(t,e,r){let n=validate(t,e,{coerce:!0,message:r});if(!n[0])return n[1];throw n[0]}function mask(t,e,r){let n=validate(t,e,{coerce:!0,mask:!0,message:r});if(!n[0])return n[1];throw n[0]}function dist_is(t,e){let r=validate(t,e);return!r[0]}function validate(t,e,r={}){let n=run(t,e,r),i=function(t){let{done:e,value:r}=t.next();return e?void 0:r}(n);if(i[0]){let t=new StructError(i[0],function*(){for(let t of n)t[0]&&(yield t[0])});return[t,void 0]}{let t=i[1];return[void 0,t]}}function dist_define(t,e){return new Struct({type:t,schema:null,validator:e})}function any(){return dist_define("any",()=>!0)}function array(t){return new Struct({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(let[r,n]of e.entries())yield[r,n,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||`Expected an array value, but received: ${print(t)}`})}function integer(){return dist_define("integer",t=>"number"==typeof t&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${print(t)}`)}function literal(t){let e=print(t),r=typeof t;return new Struct({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${print(r)}`})}function object(t){let e=t?Object.keys(t):[],r=dist_define("never",()=>!1);return new Struct({type:"object",schema:t||null,*entries(n){if(t&&isObject(n)){let i=new Set(Object.keys(n));for(let r of e)i.delete(r),yield[r,n[r],t[r]];for(let t of i)yield[t,n[t],r]}},validator:t=>isObject(t)||`Expected an object, but received: ${print(t)}`,coercer:t=>isObject(t)?{...t}:t})}function optional(t){return new Struct({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function string(){return dist_define("string",t=>"string"==typeof t||`Expected a string, but received: ${print(t)}`)}function union(t){let e=t.map(t=>t.type).join(" | ");return new Struct({type:"union",schema:null,coercer(e){for(let r of t){let[t,n]=r.validate(e,{coerce:!0});if(!t)return n}return e},validator(r,n){let i=[];for(let e of t){let[...t]=run(r,e,n),[s]=t;if(!s[0])return[];for(let[e]of t)e&&i.push(e)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${print(r)}`,...i]}})}var n,i,s,a,o,u,l,c,f,d,p,g,y,m,b,w,v,S,_,B,E,T,x=r(2296),k=r(70761),A=r(11074),I=r(29269),C=r(75955),M=r(34105);let O=object({digest:string(),objectId:string(),version:union([dist_define("number",t=>"number"==typeof t&&!isNaN(t)||`Expected a number, but received: ${print(t)}`),string(),dist_define("bigint",t=>"bigint"==typeof t)])}),P=union([object({ImmOrOwned:O}),object({Shared:object({objectId:string(),initialSharedVersion:union([integer(),string()]),mutable:dist_define("boolean",t=>"boolean"==typeof t)})}),object({Receiving:O})]),j=object({Pure:array(integer())}),$=object({Object:P}),U=union([j,$]),z={Pure:function(t,e){return{Pure:Array.from(t instanceof Uint8Array?t:(0,k.pF)(t)?t.toBytes():A.$5.ser(e,t,{maxSize:1/0}).toBytes())}},ObjectRef:({objectId:t,digest:e,version:r})=>({Object:{ImmOrOwned:{digest:e,version:r,objectId:(0,I.wo)(t)}}}),SharedObjectRef:({objectId:t,mutable:e,initialSharedVersion:r})=>({Object:{Shared:{mutable:e,initialSharedVersion:r,objectId:(0,I.wo)(t)}}}),ReceivingRef:({objectId:t,digest:e,version:r})=>({Object:{Receiving:{digest:e,version:r,objectId:(0,I.wo)(t)}}})};function getIdFromCallArg(t){return"string"==typeof t?(0,I.wo)(t):"ImmOrOwned"in t.Object?(0,I.wo)(t.Object.ImmOrOwned.objectId):"Receiving"in t.Object?(0,I.wo)(t.Object.Receiving.objectId):(0,I.wo)(t.Object.Shared.objectId)}function extractMutableReference(t){return"object"==typeof t&&"MutableReference"in t?t.MutableReference:void 0}function extractReference(t){return"object"==typeof t&&"Reference"in t?t.Reference:void 0}function extractStructTag(t){if("object"==typeof t&&"Struct"in t)return t;let e=extractReference(t),r=extractMutableReference(t);return"object"==typeof e&&"Struct"in e?e:"object"==typeof r&&"Struct"in r?r:void 0}let N={address:M.Rx,module:"object",name:"ID"},R={address:M.ht,module:"ascii",name:"String"},L={address:M.ht,module:"string",name:"String"},G={address:M.ht,module:"option",name:"Option"},isSameStruct=(t,e)=>t.address===e.address&&t.module===e.module&&t.name===e.name;function expectType(t,e){if(void 0!==e&&typeof e!==t)throw Error(`Expect ${e} to be ${t}, received ${typeof e}`)}let q=["Address","Bool","U8","U16","U32","U64","U128","U256"];var H=r(37471),K=r(19346),W=r(25780);let F=union([object({kind:literal("Input"),index:integer(),value:optional(any()),type:optional(literal("object"))}),object({kind:literal("Input"),index:integer(),value:optional(any()),type:literal("pure")})]),D=[F,object({kind:literal("GasCoin")}),object({kind:literal("Result"),index:integer()}),object({kind:literal("NestedResult"),index:integer(),resultIndex:integer()})],V=union([...D]),Z=object({kind:literal("MoveCall"),target:dist_define("target",string().validator),typeArguments:array(string()),arguments:array(V)}),X=object({kind:literal("TransferObjects"),objects:array(V),address:V}),J=object({kind:literal("SplitCoins"),coin:V,amounts:array(V)}),Y=object({kind:literal("MergeCoins"),destination:V,sources:array(V)}),Q=object({kind:literal("MakeMoveVec"),type:optional((n=string(),i=dist_define("unknown",()=>!0),s=new Struct({type:"record",schema:null,*entries(t){if(isObject(t))for(let e in t){let r=t[e];yield[e,e,n],yield[e,r,i]}},validator:t=>isObject(t)||`Expected an object, but received: ${print(t)}`}),union([object({None:union([literal(!0),literal(null)])}),object({Some:s})]))),objects:array(V)}),tt=object({kind:literal("Publish"),modules:array(array(integer())),dependencies:array(string())});var te=((a=te||{})[a.COMPATIBLE=0]="COMPATIBLE",a[a.ADDITIVE=128]="ADDITIVE",a[a.DEP_ONLY=192]="DEP_ONLY",a);let tr=object({kind:literal("Upgrade"),modules:array(array(integer())),dependencies:array(string()),packageId:string(),ticket:V}),tn=[Z,X,J,Y,tt,tr,Q],ti=union([...tn]),ts={MoveCall:t=>create({kind:"MoveCall",target:t.target,arguments:t.arguments??[],typeArguments:t.typeArguments??[]},Z),TransferObjects:(t,e)=>("Input"===e.kind&&"pure"===e.type&&"object"!=typeof e.value&&(e.value=z.Pure(A.$5.Address.serialize(e.value))),create({kind:"TransferObjects",objects:t,address:e},X)),SplitCoins:(t,e)=>(e.forEach(t=>{"Input"===t.kind&&"pure"===t.type&&"object"!=typeof t.value&&(t.value=z.Pure(A.$5.U64.serialize(t.value)))}),create({kind:"SplitCoins",coin:t,amounts:e},J)),MergeCoins:(t,e)=>create({kind:"MergeCoins",destination:t,sources:e},Y),Publish:({modules:t,dependencies:e})=>create({kind:"Publish",modules:t.map(t=>"string"==typeof t?Array.from((0,x.F)(t)):t),dependencies:e.map(t=>(0,I.tc)(t))},tt),Upgrade:({modules:t,dependencies:e,packageId:r,ticket:n})=>create({kind:"Upgrade",modules:t.map(t=>"string"==typeof t?Array.from((0,x.F)(t)):t),dependencies:e.map(t=>(0,I.tc)(t)),packageId:r,ticket:n},tr),MakeMoveVec:({type:t,objects:e})=>create({kind:"MakeMoveVec",type:t?{Some:W.X.parseFromStr(t)}:{None:null},objects:e},Q)},ta=optional((o=union([object({Epoch:integer()}),object({None:union([literal(!0),literal(null)])})]),new Struct({...o,validator:(t,e)=>null===t||o.validator(t,e),refiner:(t,e)=>null===t||o.refiner(t,e)}))),to=dist_define("StringEncodedBigint",t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}}),tu=object({budget:optional(to),price:optional(to),payment:optional(array(O)),owner:optional(string())}),tl=object({version:literal(1),sender:optional(string()),expiration:ta,gasConfig:tu,inputs:array(F),transactions:array(ti)});function prepareHexAddress(t){let e=t;return/^bfc/i.test(t)&&(e=(0,C.Og)(t)),(0,I.wo)(e).replace("0x","")}let TransactionBlockDataBuilder=class TransactionBlockDataBuilder{constructor(t){this.version=1,this.sender=t?.sender,this.expiration=t?.expiration,this.gasConfig=t?.gasConfig??{},this.inputs=t?.inputs??[],this.transactions=t?.transactions??[]}static fromKindBytes(t){var e;let r=A.$5.TransactionKind.parse(t),n="ProgrammableTransaction"in r?r.ProgrammableTransaction:null;if(!n)throw Error("Unable to deserialize from bytes.");let i=(e={version:1,gasConfig:{},inputs:n.inputs.map((t,e)=>create({kind:"Input",value:t,index:e,type:dist_is(t,j)?"pure":"object"},F)),transactions:n.transactions},create(e,tl));return TransactionBlockDataBuilder.restore(i)}static fromBytes(t){var e;let r=A.$5.TransactionData.parse(t),n=r?.V1,i="ProgrammableTransaction"in n.kind?n?.kind?.ProgrammableTransaction:null;if(!n||!i)throw Error("Unable to deserialize from bytes.");let s=(e={version:1,sender:n.sender,expiration:n.expiration,gasConfig:n.gasData,inputs:i.inputs.map((t,e)=>create({kind:"Input",value:t,index:e,type:dist_is(t,j)?"pure":"object"},F)),transactions:i.transactions},create(e,tl));return TransactionBlockDataBuilder.restore(s)}static restore(t){dist_assert(t,tl);let e=new TransactionBlockDataBuilder;return Object.assign(e,t),e}static getDigestFromBytes(t){let e=function(t,e){let r=Array.from(`${t}::`).map(t=>t.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),(0,K.R)(n,{dkLen:32})}("TransactionData",t);return(0,H.K)(e)}build({maxSizeBytes:t=1/0,overrides:e,onlyTransactionKind:r}={}){let n=this.inputs.map(t=>(dist_assert(t.value,U),t.value)),i={ProgrammableTransaction:{inputs:n,transactions:this.transactions}};if(r)return A.$5.TransactionKind.serialize(i,{maxSize:t}).toBytes();let s=e?.expiration??this.expiration,a=e?.sender??this.sender,o={...this.gasConfig,...e?.gasConfig};if(!a)throw Error("Missing transaction sender");if(!o.budget)throw Error("Missing gas budget");if(!o.payment)throw Error("Missing gas payment");if(!o.price)throw Error("Missing gas price");let u={sender:prepareHexAddress(a),expiration:s||{None:!0},gasData:{payment:o.payment,owner:prepareHexAddress(this.gasConfig.owner??a),price:BigInt(o.price),budget:BigInt(o.budget)},kind:{ProgrammableTransaction:{inputs:n,transactions:this.transactions}}};return A.$5.TransactionData.serialize({V1:u},{maxSize:t}).toBytes()}getDigest(){let t=this.build({onlyTransactionKind:!1});return TransactionBlockDataBuilder.getDigestFromBytes(t)}snapshot(){return create(this,tl)}};var __accessCheck=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},__privateGet=(t,e,r)=>(__accessCheck(t,e,"read from private field"),r?r.call(t):e.get(t)),__privateAdd=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},__privateSet=(t,e,r,n)=>(__accessCheck(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),__privateMethod=(t,e,r)=>(__accessCheck(t,e,"access private method"),r);let tc={maxPureArgumentSize:16384,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:131072};function expectClient(t){if(!t.client)throw Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}let th=Symbol.for("@benfen/transaction"),tf={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},td=10000n,tp=100n,chunk=(t,e)=>Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e));function isTransactionBlock(t){return!!t&&"object"==typeof t&&!0===t[th]}let tg=class{constructor(t){__privateAdd(this,l),__privateAdd(this,f),__privateAdd(this,p),__privateAdd(this,y),__privateAdd(this,b),__privateAdd(this,v),__privateAdd(this,_),__privateAdd(this,E),__privateAdd(this,u,void 0),__privateSet(this,u,new TransactionBlockDataBuilder(t?t.blockData:void 0))}static fromKind(t){let e=new tg;return __privateSet(e,u,TransactionBlockDataBuilder.fromKindBytes("string"==typeof t?(0,x.F)(t):t)),e}static from(t){let e=new tg;return"string"==typeof t&&t.startsWith("{")?__privateSet(e,u,TransactionBlockDataBuilder.restore(JSON.parse(t))):__privateSet(e,u,TransactionBlockDataBuilder.fromBytes("string"==typeof t?(0,x.F)(t):t)),e}setSender(t){__privateGet(this,u).sender=t}setSenderIfNotSet(t){__privateGet(this,u).sender||(__privateGet(this,u).sender=t)}setExpiration(t){__privateGet(this,u).expiration=t}setGasPrice(t){__privateGet(this,u).gasConfig.price=String(t)}setGasBudget(t){__privateGet(this,u).gasConfig.budget=String(t)}setGasOwner(t){__privateGet(this,u).gasConfig.owner=t}setGasPayment(t){__privateGet(this,u).gasConfig.payment=t.map(t=>mask(t,O))}get blockData(){return __privateGet(this,u).snapshot()}get[th](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:function(t){function pure(e,r){return t(e,r)}return pure.u8=e=>t(A.$5.U8.serialize(e)),pure.u16=e=>t(A.$5.U16.serialize(e)),pure.u32=e=>t(A.$5.U32.serialize(e)),pure.u64=e=>t(A.$5.U64.serialize(e)),pure.u128=e=>t(A.$5.U128.serialize(e)),pure.u256=e=>t(A.$5.U256.serialize(e)),pure.bool=e=>t(A.$5.Bool.serialize(e)),pure.string=e=>t(A.$5.String.serialize(e)),pure.address=e=>t(A.$5.Address.serialize(e)),pure.id=pure.address,pure}((t,e)=>(0,k.pF)(t)?__privateMethod(this,l,c).call(this,"pure",{Pure:Array.from(t.toBytes())}):__privateMethod(this,l,c).call(this,"pure",t instanceof Uint8Array?z.Pure(t):e?z.Pure(t,e):t))}),this.pure}get gas(){return{kind:"GasCoin"}}object(t){if("object"==typeof t&&"kind"in t)return t;let e=getIdFromCallArg(t),r=__privateGet(this,u).inputs.find(t=>"object"===t.type&&e===getIdFromCallArg(t.value));return r&&dist_is(r.value,$)&&"Shared"in r.value.Object&&dist_is(t,$)&&"Shared"in t.Object&&(r.value.Object.Shared.mutable=r.value.Object.Shared.mutable||t.Object.Shared.mutable),r??__privateMethod(this,l,c).call(this,"object","string"==typeof t?(0,I.wo)(t):t)}objectRef(...t){return this.object(z.ObjectRef(...t))}receivingRef(...t){return this.object(z.ReceivingRef(...t))}sharedObjectRef(...t){return this.object(z.SharedObjectRef(...t))}add(t){let e=__privateGet(this,u).transactions.push(t);return function(t){let e=[],nestedResultFor=r=>e[r]??(e[r]={kind:"NestedResult",index:t,resultIndex:r});return new Proxy({kind:"Result",index:t},{set(){throw Error("The transaction result is a proxy, and does not support setting properties directly")},get(t,e){if(e in t)return Reflect.get(t,e);if(e===Symbol.iterator)return function*(){let t=0;for(;;)yield nestedResultFor(t),t++};if("symbol"==typeof e)return;let r=parseInt(e,10);if(!Number.isNaN(r)&&!(r<0))return nestedResultFor(r)}})}(e-1)}splitCoins(t,e){return this.add(ts.SplitCoins("string"==typeof t?this.object(t):t,e.map(t=>"number"==typeof t||"bigint"==typeof t||"string"==typeof t?this.pure.u64(t):__privateMethod(this,f,d).call(this,t))))}mergeCoins(t,e){return this.add(ts.MergeCoins("string"==typeof t?this.object(t):t,e.map(t=>"string"==typeof t?this.object(t):t)))}publish({modules:t,dependencies:e}){return this.add(ts.Publish({modules:t,dependencies:e}))}upgrade({modules:t,dependencies:e,packageId:r,ticket:n}){return this.add(ts.Upgrade({modules:t,dependencies:e,packageId:r,ticket:"string"==typeof n?this.object(n):n}))}moveCall({arguments:t,typeArguments:e,target:r}){return this.add(ts.MoveCall({arguments:t?.map(t=>__privateMethod(this,f,d).call(this,t)),typeArguments:e,target:r}))}transferObjects(t,e){return this.add(ts.TransferObjects(t.map(t=>"string"==typeof t?this.object(t):t),"string"==typeof e?this.pure.address(e):__privateMethod(this,f,d).call(this,e)))}makeMoveVec({type:t,objects:e}){return this.add(ts.MakeMoveVec({type:t,objects:e.map(t=>"string"==typeof t?this.object(t):t)}))}serialize(){return JSON.stringify(__privateGet(this,u).snapshot())}async sign(t){let{signer:e,...r}=t,n=await this.build(r);return e.signTransactionBlock(n)}async build(t={}){return await __privateMethod(this,E,T).call(this,t),__privateGet(this,u).build({maxSizeBytes:__privateMethod(this,p,g).call(this,"maxTxSizeBytes",t),onlyTransactionKind:t.onlyTransactionKind})}async getDigest(t={}){return await __privateMethod(this,E,T).call(this,t),__privateGet(this,u).getDigest()}},ty=tg;u=new WeakMap,l=new WeakSet,c=function(t,e){let r=__privateGet(this,u).inputs.length,n=create({kind:"Input",value:"bigint"==typeof e?String(e):e,index:r,type:t},F);return __privateGet(this,u).inputs.push(n),n},f=new WeakSet,d=function(t){return(0,k.pF)(t)?this.pure(t):t},p=new WeakSet,g=function(t,{protocolConfig:e,limits:r}){if(r&&"number"==typeof r[t])return r[t];if(!e)return tc[t];let n=e?.attributes[tf[t]];if(!n)throw Error(`Missing expected protocol config: "${tf[t]}"`);let i="u64"in n?n.u64:"u32"in n?n.u32:n.f64;if(!i)throw Error(`Unexpected protocol config value found for: "${tf[t]}"`);return Number(i)},y=new WeakSet,m=function(t){let e=__privateMethod(this,p,g).call(this,"maxPureArgumentSize",t);__privateGet(this,u).inputs.forEach((t,r)=>{if(dist_is(t.value,j)&&t.value.Pure.length>e)throw Error(`Input at index ${r} is too large, max pure input size is ${e} bytes, got ${t.value.Pure.length} bytes`)})},b=new WeakSet,w=async function(t){let e=__privateMethod(this,p,g).call(this,"maxGasObjects",t);if(__privateGet(this,u).gasConfig.payment&&__privateGet(this,u).gasConfig.payment.length>e)throw Error(`Payment objects exceed maximum amount: ${e}`);if(t.onlyTransactionKind||__privateGet(this,u).gasConfig.payment)return;let r=__privateGet(this,u).gasConfig.owner??__privateGet(this,u).sender,n=await expectClient(t).getCoins({owner:r,coinType:M.p$,limit:e}),i=n.data.filter(t=>{let e=__privateGet(this,u).inputs.find(e=>!!dist_is(e.value,U)&&"Object"in e.value&&"ImmOrOwned"in e.value.Object&&(0,C.RD)(t.coinObjectId)===(0,C.RD)(e.value.Object.ImmOrOwned.objectId));return!e}).slice(0,e-1).map(t=>({objectId:t.coinObjectId,digest:t.digest,version:t.version}));if(!i.length)throw Error("No valid gas coins found for the transaction.");this.setGasPayment(i)},v=new WeakSet,S=async function(t){t.onlyTransactionKind||__privateGet(this,u).gasConfig.price||this.setGasPrice(await expectClient(t).getReferenceGasPrice())},_=new WeakSet,B=async function(t){let{inputs:e,transactions:r}=__privateGet(this,u),n=[],i=[];if(e.forEach(t=>{if("object"===t.type&&"string"==typeof t.value){i.push({id:(0,I.wo)(t.value),input:t});return}}),r.forEach(t=>{if("MoveCall"===t.kind){let r=t.arguments.some(t=>"Input"===t.kind&&!dist_is(e[t.index].value,U));r&&n.push(t)}if("SplitCoins"===t.kind&&t.amounts.forEach(t=>{if("Input"===t.kind){let r=e[t.index];"object"!=typeof r.value&&(r.value=z.Pure(A.$5.U64.serialize(r.value)))}}),"TransferObjects"===t.kind&&"Input"===t.address.kind){let r=e[t.address.index];"object"!=typeof r.value&&(r.value=z.Pure(A.$5.Address.serialize(r.value)))}}),n.length&&await Promise.all(n.map(async r=>{let[n,s,a]=r.target.split("::"),o=await expectClient(t).getNormalizedMoveFunction({package:(0,I.tc)(n),module:s,function:a}),u=o.parameters.length-1,l=o.parameters.length>0&&function(t){let e=extractStructTag(t)?.Struct;return e?.address==="0x2"&&e?.module==="tx_context"&&e?.name==="TxContext"}(o.parameters[u]),c=l?o.parameters.slice(0,u):o.parameters;if(c.length!==r.arguments.length)throw Error("Incorrect number of arguments.");c.forEach((t,n)=>{let s=r.arguments[n];if("Input"!==s.kind)return;let a=e[s.index];if(dist_is(a.value,U))return;let o=a.value,u=function getPureSerializationType(t,e){if("string"==typeof t&&q.includes(t)){if(t in["U8","U16","U32","U64","U128","U256"])expectType("number",e);else if("Bool"===t)expectType("boolean",e);else if("Address"===t&&(expectType("string",e),e&&!(0,I.OM)(e)))throw Error("Invalid bfc Address");return t.toLowerCase()}if("string"==typeof t)throw Error(`Unknown pure normalized type ${JSON.stringify(t,null,2)}`);if("Vector"in t){if((void 0===e||"string"==typeof e)&&"U8"===t.Vector)return"string";if(void 0!==e&&!Array.isArray(e))throw Error(`Expect ${e} to be a array, received ${typeof e}`);let r=getPureSerializationType(t.Vector,e?e[0]:void 0);if(void 0===r)return;return`vector<${r}>`}if("Struct"in t){if(isSameStruct(t.Struct,R))return"string";if(isSameStruct(t.Struct,L))return"utf8string";if(isSameStruct(t.Struct,N))return"address";if(isSameStruct(t.Struct,G)){let r={Vector:t.Struct.typeArguments[0]};return getPureSerializationType(r,e)}}}(t,o);if(u){a.value=z.Pure(o,u);return}let l=extractStructTag(t);if(null!=l||"object"==typeof t&&"TypeParameter"in t){if("string"!=typeof o)throw Error(`Expect the argument to be an object id string, got ${JSON.stringify(o,null,2)}`);i.push({id:o,input:a,normalizedType:t});return}throw Error(`Unknown call arg type ${JSON.stringify(t,null,2)} for value ${JSON.stringify(o,null,2)}`)})})),i.length){let e=[...new Set(i.map(({id:t})=>t))],r=chunk(e,50),n=(await Promise.all(r.map(e=>expectClient(t).multiGetObjects({ids:e,options:{showOwner:!0}})))).flat(),s=new Map(e.map((t,e)=>[t,n[e]])),a=Array.from(s).filter(([t,e])=>e.error).map(([t,e])=>t);if(a.length)throw Error(`The following input objects are invalid: ${a.join(", ")}`);i.forEach(({id:t,input:e,normalizedType:r})=>{let n=s.get(t),i=n.data?.owner,a=i&&"object"==typeof i&&"Shared"in i?i.Shared.initial_shared_version:void 0;if(a){var o;let n=null!=r&&null==extractMutableReference(r)&&null==extractReference(r),i=(o=e.value,(("object"==typeof o&&"Object"in o&&"Shared"in o.Object?o.Object.Shared:void 0)?.mutable??!1)||n||null!=r&&null!=extractMutableReference(r));e.value=z.SharedObjectRef({objectId:t,initialSharedVersion:a,mutable:i})}else r&&function(t){let e=extractStructTag(t);return!!e&&"0x2"===e.Struct.address&&"transfer"===e.Struct.module&&"Receiving"===e.Struct.name}(r)?e.value=z.ReceivingRef(n.data):e.value=z.ObjectRef(n.data)})}},E=new WeakSet,T=async function(t){if(!t.onlyTransactionKind&&!__privateGet(this,u).sender)throw Error("Missing transaction sender");if(t.protocolConfig||t.limits||!t.client||(t.protocolConfig=await t.client.getProtocolConfig()),await Promise.all([__privateMethod(this,v,S).call(this,t),__privateMethod(this,_,B).call(this,t)]),!t.onlyTransactionKind&&(await __privateMethod(this,b,w).call(this,t),!__privateGet(this,u).gasConfig.budget)){let e=expectClient(t),r=await e.dryRunTransactionBlock({transactionBlock:__privateGet(this,u).build({maxSizeBytes:__privateMethod(this,p,g).call(this,"maxTxSizeBytes",t),overrides:{gasConfig:{budget:String(__privateMethod(this,p,g).call(this,"maxTxGas",t)),payment:[]}}})});if("success"!==r.effects.status.status)throw Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let n=td*BigInt(tp),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost);this.setGasBudget(s)}__privateMethod(this,y,m).call(this,t)}},29269:function(t,e,r){"use strict";r.d(e,{$A:function(){return parseStructTag},OM:function(){return isValidBenfenAddress},fK:function(){return a},iI:function(){return isValidTransactionDigest},kX:function(){return function normalizeStructTag(t){let{address:e,module:r,name:n,typeParams:i}="string"==typeof t?parseStructTag(t):t,s=i?.length>0?`<${i.map(t=>"string"==typeof t?t:normalizeStructTag(t)).join(",")}>`:"";return`${e}::${r}::${n}${s}`}},tc:function(){return normalizeBenfenObjectId},wo:function(){return normalizeHexAddress},z3:function(){return isValidBenfenObjectId}}),r(70794);var n=r(37471),i=r(71406),s=r(75955);function isValidTransactionDigest(t){try{let e=(0,n.n)(t);return 32===e.length}catch(t){return!1}}let a=32;function isValidBenfenAddress(t){var e,r;let n=t;return/^bfc/i.test(t)&&(n=t.slice(3,-4)),e=n,/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0&&(r=n,(/^(0x|0X)/.test(r)?(r.length-2)/2:r.length/2)===a)}function isValidBenfenObjectId(t){return isValidBenfenAddress(t)}function parseStructTag(t){let[e,r]=t.split("::"),n=t.slice(e.length+r.length+4),s=n.includes("<")?n.slice(0,n.indexOf("<")):n,a=n.includes("<")?(0,i.fR)(n.slice(n.indexOf("<")+1,n.lastIndexOf(">"))).map(t=>{var e;return(e=t.trim()).includes("::")?parseStructTag(e):e}):[];return{address:normalizeHexAddress(e),module:r,name:s,typeParams:a}}function normalizeHexAddress(t,e=!1){let r=t.toLowerCase();return/^bfc/i.test(t)&&(r=(0,s.Og)(t)),!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(2*a,"0")}`}function normalizeBenfenObjectId(t,e=!1){return normalizeHexAddress(t,e)}},75955:function(t,e,r){"use strict";r.d(e,{Og:function(){return bfc2HexAddress},RD:function(){return hex2BfcAddress}});var n=r(89133),i=r(69362);function hex2BfcAddress(t){if(/^BFC/i.test(t))return t;let e=t.replace(/^0x/,"").padStart(64,"0").toLowerCase(),r=(0,i.d)(n(new TextEncoder().encode(e)));return`BFC${e}${r.slice(0,4)}`}function bfc2HexAddress(t){return t.startsWith("0x")||!/^BFC/i.test(t)?t:`0x${t.slice(3,-4)}`}},34105:function(t,e,r){"use strict";r.d(e,{Hc:function(){return s},Rx:function(){return u},ht:function(){return o},nf:function(){return a},p$:function(){return c},tX:function(){return l}});var n=r(29269),i=r(75955);let s=9,a=BigInt(1e9),o="0x1",u="0x2",l=(0,n.tc)("0x6"),c=`${u}::bfc::BFC`;(0,i.RD)("0x5")},66114:function(t,e,r){"use strict";r.d(e,{RB:function(){return publicKeyFromRawBytes},qz:function(){return verifyPersonalMessage},Em:function(){return verifyTransactionBlock}});var n,i,s,a,o={};r.r(o),r.d(o,{dQ:function(){return bitMask},ci:function(){return utils_bytesToHex},bytesToNumberBE:function(){return utils_bytesToNumberBE},ty:function(){return utils_bytesToNumberLE},eV:function(){return abstract_utils_concatBytes},n$:function(){return createHmacDrbg},ql:function(){return utils_ensureBytes},hexToBytes:function(){return utils_hexToBytes},tL:function(){return utils_numberToBytesBE},S5:function(){return numberToBytesLE},FF:function(){return validateObject}});var u=r(11074),l=r(2296),c=r(19346),f=r(66409),d=r(29269),p=((n=p||{})[n.Benfen=0]="Benfen",n),g=((i=g||{})[i.V0=0]="V0",i),y=((s=y||{})[s.TransactionData=0]="TransactionData",s[s.TransactionEffects=1]="TransactionEffects",s[s.CheckpointSummary=2]="CheckpointSummary",s[s.PersonalMessage=3]="PersonalMessage",s);function bytesEqual(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}let PublicKey=class PublicKey{equals(t){return bytesEqual(this.toRawBytes(),t.toRawBytes())}toBase64(){return(0,l.z)(this.toRawBytes())}toString(){throw Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toBenfenPublicKey(){let t=this.toBenfenBytes();return(0,l.z)(t)}verifyWithIntent(t,e,r){let n=function(t,e){let r=[t,0,0],n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),n}(r,t),i=(0,c.R)(n,{dkLen:32});return this.verify(i,e)}verifyPersonalMessage(t,e){return this.verifyWithIntent(u.$5.vector(u.$5.u8()).serialize(t).toBytes(),e,y.PersonalMessage)}verifyTransactionBlock(t,e){return this.verifyWithIntent(t,e,y.TransactionData)}toBenfenBytes(){let t=this.toRawBytes(),e=new Uint8Array(t.length+1);return e.set([this.flag()]),e.set(t,1),e}toHexAddress(){return(0,d.wo)((0,f.ci)((0,c.R)(this.toBenfenBytes(),{dkLen:32})).slice(0,2*d.fK))}};let m={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},b={ED25519:32,Secp256k1:33,Secp256r1:33},w={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"},v=u.$5.struct("ZkLoginSignature",{inputs:u.$5.struct("ZkLoginSignatureInputs",{proofPoints:u.$5.struct("ZkLoginSignatureInputsProofPoints",{a:u.$5.vector(u.$5.string()),b:u.$5.vector(u.$5.vector(u.$5.string())),c:u.$5.vector(u.$5.string())}),issBase64Details:u.$5.struct("ZkLoginSignatureInputsClaim",{value:u.$5.string(),indexMod4:u.$5.u8()}),headerBase64:u.$5.string(),addressSeed:u.$5.string()}),maxEpoch:u.$5.u64(),userSignature:u.$5.vector(u.$5.u8())});var __accessCheck=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},__privateGet=(t,e,r)=>(__accessCheck(t,e,"read from private field"),r?r.call(t):e.get(t)),__privateAdd=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},__privateSet=(t,e,r,n)=>(__accessCheck(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);let ZkLoginPublicIdentifier=class ZkLoginPublicIdentifier extends PublicKey{constructor(t){super(),__privateAdd(this,a,void 0),"string"==typeof t?__privateSet(this,a,(0,l.F)(t)):t instanceof Uint8Array?__privateSet(this,a,t):__privateSet(this,a,Uint8Array.from(t))}equals(t){return super.equals(t)}toRawBytes(){return __privateGet(this,a)}flag(){return m.ZkLogin}async verify(t,e){throw Error("does not support")}verifyPersonalMessage(t,e){return Promise.resolve(!0)}verifyTransactionBlock(t,e){return Promise.resolve(!0)}};function toZkLoginPublicIdentifier(t,e){let r=function(t,e){let r=t.toString(16);return(0,f.nr)(r.padStart(2*e,"0").slice(-(2*e)))}(t,32),n=new TextEncoder().encode(e),i=new Uint8Array(1+n.length+r.length);return i.set([n.length],0),i.set(n,1),i.set(r,1+n.length),new ZkLoginPublicIdentifier(i)}function parseSerializedSignature(t){let e=(0,l.F)(t),r=w[e[0]];switch(r){case"MultiSig":let n=u.$5.MultiSig.parse(e.slice(1));return{serializedSignature:t,signatureScheme:r,multisig:n,bytes:e};case"ZkLogin":return function(t){let e="string"==typeof t?(0,l.F)(t):t;if(e[0]!==m.ZkLogin)throw Error("Invalid signature scheme");let r=e.slice(1),{inputs:n,maxEpoch:i,userSignature:s}=v.parse("string"==typeof r?(0,l.F)(r):r),{issBase64Details:a,addressSeed:o}=n,u=function(t,e){let r=function(t,e){if(t.length<2)throw Error(`Input (s = ${t}) is not tightly packed because s.length < 2`);let r=function(t){let e=[];for(let r=0;r<t.length;r++){let n=t.charAt(r),i=function(t){if(1!==t.length)throw Error("Invalid base64Url character: "+t);let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t);if(-1===e)throw Error("Invalid base64Url character: "+t);let r=e.toString(2).padStart(6,"0"),n=Array.from(r).map(Number);return n}(n);e=e.concat(i)}return e}(t),n=e%4;if(0===n);else if(1===n)r=r.slice(2);else if(2===n)r=r.slice(4);else throw Error(`Input (s = ${t}) is not tightly packed because i%4 = 3 (i = ${e}))`);let i=(e+t.length-1)%4;if(3===i);else if(2===i)r=r.slice(0,r.length-2);else if(1===i)r=r.slice(0,r.length-4);else throw Error(`Input (s = ${t}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);if(r.length%8!=0)throw Error("We should never reach here...");let s=new Uint8Array(Math.floor(r.length/8)),a=0;for(let t=0;t<r.length;t+=8){let e=r.slice(t,t+8),n=parseInt(e.join(""),2);s[a++]=n}return new TextDecoder().decode(s)}(t.value,t.indexMod4),[n,i]=function(t){if(!("}"===t.slice(-1)||","===t.slice(-1)))throw Error("Invalid claim");let e=JSON.parse("{"+t.slice(0,-1)+"}");if(1!==Object.keys(e).length)throw Error("Invalid claim");let r=Object.keys(e)[0];return[r,e[r]]}(r);if(n!==e)throw Error(`Invalid field name: found ${n} expected ${e}`);return i}(a,"iss"),c=toZkLoginPublicIdentifier(BigInt(o),u),f=c.toHexAddress();return{serializedSignature:(0,l.z)(e),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:i,userSignature:s,iss:u,address:f,addressSeed:BigInt(o)},signature:e,publicKey:c.toRawBytes()}}(t);case"ED25519":case"Secp256k1":case"Secp256r1":let i=b[r],s=e.slice(1,e.length-i),a=e.slice(1+s.length);return{serializedSignature:t,signatureScheme:r,signature:s,publicKey:a,bytes:e};default:throw Error("Unsupported signature scheme")}}a=new WeakMap;var S=r(50780);let Ed25519PublicKey=class Ed25519PublicKey extends PublicKey{constructor(t){if(super(),"string"==typeof t?this.data=(0,l.F)(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),32!==this.data.length)throw Error(`Invalid public key input. Expected 32 bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return m.ED25519}async verify(t,e){let r;if("string"==typeof e){let t=parseSerializedSignature(e);if("ED25519"!==t.signatureScheme)throw Error("Invalid signature scheme");if(!bytesEqual(this.toRawBytes(),t.publicKey))throw Error("Signature does not match public key");r=t.signature}else r=e;return S.sign.detached.verify(t,r,this.toRawBytes())}};function number(t){if(!Number.isSafeInteger(t)||t<0)throw Error(`Wrong positive integer: ${t}`)}function bytes(t,...e){if(!(t instanceof Uint8Array))throw Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function exists(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}Ed25519PublicKey.SIZE=32;let _="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,u8a=t=>t instanceof Uint8Array,createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),rotr=(t,e)=>t<<32-e|t>>>e,B=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!B)throw Error("Non little-endian hardware is not supported");function toBytes(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}(t)),!u8a(t))throw Error(`expected Uint8Array, got ${typeof t}`);return t}let Hash=class Hash{clone(){return this._cloneInto()}};function utils_randomBytes(t=32){if(_&&"function"==typeof _.getRandomValues)return _.getRandomValues(new Uint8Array(t));throw Error("crypto.getRandomValues must be defined")}let SHA2=class SHA2 extends Hash{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=createView(this.buffer)}update(t){exists(this);let{view:e,buffer:r,blockLen:n}=this;t=toBytes(t);let i=t.length;for(let s=0;s<i;){let a=Math.min(n-this.pos,i-s);if(a===n){let e=createView(t);for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===n&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){exists(this),function(t,e){bytes(t);let r=e.outputLen;if(t.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}(t,this),this.finished=!0;let{buffer:e,view:r,blockLen:n,isLE:i}=this,{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let t=s;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);let i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),u=n?4:0,l=n?0:4;t.setUint32(e+u,a,n),t.setUint32(e+l,o,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);let a=createView(t),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=o/4,l=this.get();if(u>l.length)throw Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)a.setUint32(4*t,l[t],i)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return t.length=n,t.pos=a,t.finished=i,t.destroyed=s,n%e&&t.buffer.set(r),t}};let Chi=(t,e,r)=>t&e^~t&r,Maj=(t,e,r)=>t&e^t&r^e&r,E=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),T=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),x=new Uint32Array(64);let SHA256=class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=0|T[0],this.B=0|T[1],this.C=0|T[2],this.D=0|T[3],this.E=0|T[4],this.F=0|T[5],this.G=0|T[6],this.H=0|T[7]}get(){let{A:t,B:e,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[t,e,r,n,i,s,a,o]}set(t,e,r,n,i,s,a,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)x[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){let e=x[t-15],r=x[t-2],n=rotr(e,7)^rotr(e,18)^e>>>3,i=rotr(r,17)^rotr(r,19)^r>>>10;x[t]=i+x[t-7]+n+x[t-16]|0}let{A:r,B:n,C:i,D:s,E:a,F:o,G:u,H:l}=this;for(let t=0;t<64;t++){let e=rotr(a,6)^rotr(a,11)^rotr(a,25),c=l+e+Chi(a,o,u)+E[t]+x[t]|0,f=rotr(r,2)^rotr(r,13)^rotr(r,22),d=f+Maj(r,n,i)|0;l=u,u=o,o=a,a=s+c|0,s=i,i=n,n=r,r=c+d|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,n,i,s,a,o,u,l)}roundClean(){x.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};let k=function(t){let hashC=e=>t().update(toBytes(e)).digest(),e=t();return hashC.outputLen=e.outputLen,hashC.blockLen=e.blockLen,hashC.create=()=>t(),hashC}(()=>new SHA256);BigInt(0);let A=BigInt(1),I=BigInt(2),utils_u8a=t=>t instanceof Uint8Array,C=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function utils_bytesToHex(t){if(!utils_u8a(t))throw Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=C[t[r]];return e}function hexToNumber(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function utils_hexToBytes(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){let n=2*e,i=t.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw Error("Invalid byte sequence");r[e]=s}return r}function utils_bytesToNumberBE(t){return hexToNumber(utils_bytesToHex(t))}function utils_bytesToNumberLE(t){if(!utils_u8a(t))throw Error("Uint8Array expected");return hexToNumber(utils_bytesToHex(Uint8Array.from(t).reverse()))}function utils_numberToBytesBE(t,e){return utils_hexToBytes(t.toString(16).padStart(2*e,"0"))}function numberToBytesLE(t,e){return utils_numberToBytesBE(t,e).reverse()}function utils_ensureBytes(t,e,r){let n;if("string"==typeof e)try{n=utils_hexToBytes(e)}catch(r){throw Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else if(utils_u8a(e))n=Uint8Array.from(e);else throw Error(`${t} must be hex string or Uint8Array`);let i=n.length;if("number"==typeof r&&i!==r)throw Error(`${t} expected ${r} bytes, got ${i}`);return n}function abstract_utils_concatBytes(...t){let e=new Uint8Array(t.reduce((t,e)=>t+e.length,0)),r=0;return t.forEach(t=>{if(!utils_u8a(t))throw Error("Uint8Array expected");e.set(t,r),r+=t.length}),e}let bitMask=t=>(I<<BigInt(t-1))-A,u8n=t=>new Uint8Array(t),u8fr=t=>Uint8Array.from(t);function createHmacDrbg(t,e,r){if("number"!=typeof t||t<2)throw Error("hashLen must be a number");if("number"!=typeof e||e<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=u8n(t),i=u8n(t),s=0,reset=()=>{n.fill(1),i.fill(0),s=0},h=(...t)=>r(i,n,...t),reseed=(t=u8n())=>{i=h(u8fr([0]),t),n=h(),0!==t.length&&(i=h(u8fr([1]),t),n=h())},gen=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let t=0,r=[];for(;t<e;){n=h();let e=n.slice();r.push(e),t+=n.length}return abstract_utils_concatBytes(...r)};return(t,e)=>{let r;for(reset(),reseed(t);!(r=e(gen()));)reseed();return reset(),r}}let M={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function validateObject(t,e,r={}){let checkField=(e,r,n)=>{let i=M[r];if("function"!=typeof i)throw Error(`Invalid validator "${r}", expected function`);let s=t[e];if((!n||void 0!==s)&&!i(s,t))throw Error(`Invalid param ${String(e)}=${s} (${typeof s}), expected ${r}`)};for(let[t,r]of Object.entries(e))checkField(t,r,!1);for(let[t,e]of Object.entries(r))checkField(t,e,!0);return t}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let O=BigInt(0),P=BigInt(1),j=BigInt(2),$=BigInt(3),U=BigInt(4),z=BigInt(5),N=BigInt(8);function modular_mod(t,e){let r=t%e;return r>=O?r:e+r}function pow2(t,e,r){let n=t;for(;e-- >O;)n*=n,n%=r;return n}function invert(t,e){if(t===O||e<=O)throw Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=modular_mod(t,e),n=e,i=O,s=P,a=P,o=O;for(;r!==O;){let t=n/r,e=n%r,u=i-a*t,l=s-o*t;n=r,r=e,i=a,s=o,a=u,o=l}let u=n;if(u!==P)throw Error("invert: does not exist");return modular_mod(i,e)}BigInt(9),BigInt(16);let R=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nLength(t,e){let r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Field(t,e,r=!1,n={}){if(t<=O)throw Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:s}=nLength(t,e);if(s>2048)throw Error("Field lengths over 2048 bytes are not supported");let a=function(t){if(t%U===$){let e=(t+P)/U;return function(t,r){let n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw Error("Cannot find square root");return n}}if(t%N===z){let e=(t-z)/N;return function(t,r){let n=t.mul(r,j),i=t.pow(n,e),s=t.mul(r,i),a=t.mul(t.mul(s,j),i),o=t.mul(s,t.sub(a,t.ONE));if(!t.eql(t.sqr(o),r))throw Error("Cannot find square root");return o}}return function(t){let e,r,n;let i=(t-P)/j;for(e=t-P,r=0;e%j===O;e/=j,r++);for(n=j;n<t&&function(t,e,r){if(r<=O||e<O)throw Error("Expected power/modulo > 0");if(r===P)return O;let n=P;for(;e>O;)e&P&&(n=n*t%r),t=t*t%r,e>>=P;return n}(n,i,t)!==t-P;n++);if(1===r){let e=(t+P)/U;return function(t,r){let n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw Error("Cannot find square root");return n}}let s=(e+P)/j;return function(t,a){if(t.pow(a,i)===t.neg(t.ONE))throw Error("Cannot find square root");let o=r,u=t.pow(t.mul(t.ONE,n),e),l=t.pow(a,s),c=t.pow(a,e);for(;!t.eql(c,t.ONE);){if(t.eql(c,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(c);e<o&&!t.eql(r,t.ONE);e++)r=t.sqr(r);let r=t.pow(u,P<<BigInt(o-e-1));u=t.sqr(r),l=t.mul(l,r),c=t.mul(c,u),o=e}return l}}(t)}(t),o=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:bitMask(i),ZERO:O,ONE:P,create:e=>modular_mod(e,t),isValid:e=>{if("bigint"!=typeof e)throw Error(`Invalid field element: expected bigint, got ${typeof e}`);return O<=e&&e<t},is0:t=>t===O,isOdd:t=>(t&P)===P,neg:e=>modular_mod(-e,t),eql:(t,e)=>t===e,sqr:e=>modular_mod(e*e,t),add:(e,r)=>modular_mod(e+r,t),sub:(e,r)=>modular_mod(e-r,t),mul:(e,r)=>modular_mod(e*r,t),pow:(t,e)=>(function(t,e,r){if(r<O)throw Error("Expected power > 0");if(r===O)return t.ONE;if(r===P)return e;let n=t.ONE,i=e;for(;r>O;)r&P&&(n=t.mul(n,i)),i=t.sqr(i),r>>=P;return n})(o,t,e),div:(e,r)=>modular_mod(e*invert(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>invert(e,t),sqrt:n.sqrt||(t=>a(o,t)),invertBatch:t=>(function(t,e){let r=Array(e.length),n=e.reduce((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n)),t.ONE),i=t.inv(n);return e.reduceRight((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n)),i),r})(o,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?numberToBytesLE(t,s):utils_numberToBytesBE(t,s),fromBytes:t=>{if(t.length!==s)throw Error(`Fp.fromBytes: expected ${s}, got ${t.length}`);return r?utils_bytesToNumberLE(t):utils_bytesToNumberBE(t)}});return Object.freeze(o)}function getFieldBytesLength(t){if("bigint"!=typeof t)throw Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function getMinHashLength(t){let e=getFieldBytesLength(t);return e+Math.ceil(e/2)}let HMAC=class HMAC extends Hash{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw Error("Hash should be wrapped by utils.wrapConstructor");number(t.outputLen),number(t.blockLen)}(t);let r=toBytes(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?t.create().update(r).digest():r);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return exists(this),this.iHash.update(t),this}digestInto(t){exists(this),bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return t.finished=n,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};let hmac=(t,e,r)=>new HMAC(t,e).update(r).digest();hmac.create=(t,e)=>new HMAC(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let L=BigInt(0),G=BigInt(1);function validateBasic(t){return!function(t){let e=R.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});validateObject(t,e)}(t.Fp),validateObject(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}let{bytesToNumberBE:q,hexToBytes:H}=o,K={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){let{Err:e}=K;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:q(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=K,r="string"==typeof t?H(t):t;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:s}=K._parseInt(r.subarray(2)),{d:a,l:o}=K._parseInt(s);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(t){let slice=t=>8&Number.parseInt(t[0],16)?"00"+t:t,h=t=>{let e=t.toString(16);return 1&e.length?`0${e}`:e},e=slice(h(t.s)),r=slice(h(t.r)),n=e.length/2,i=r.length/2,s=h(n),a=h(i);return`30${h(i+n+4)}02${a}${r}02${s}${e}`}},W=BigInt(0),F=BigInt(1),D=(BigInt(2),BigInt(3));function createCurve(t,e){let create=e=>(function(t){let e=function(t){let e=validateBasic(t);return validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n:n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function modN(t){return modular_mod(t,n)}let{ProjectivePoint:a,normPrivateKeyToScalar:o,weierstrassEquation:u,isWithinCurveOrder:l}=function(t){let e=/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function(t){let e=validateBasic(t);validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,n=e.toBytes||((t,e,n)=>{let i=e.toAffine();return abstract_utils_concatBytes(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=e.fromBytes||(t=>{let e=t.subarray(1),n=r.fromBytes(e.subarray(0,r.BYTES)),i=r.fromBytes(e.subarray(r.BYTES,2*r.BYTES));return{x:n,y:i}});function weierstrassEquation(t){let{a:n,b:i}=e,s=r.sqr(t),a=r.mul(s,t);return r.add(r.add(a,r.mul(t,n)),i)}if(!r.eql(r.sqr(e.Gy),weierstrassEquation(e.Gx)))throw Error("bad generator point: equation left != right");function isWithinCurveOrder(t){return"bigint"==typeof t&&W<t&&t<e.n}function assertGE(t){if(!isWithinCurveOrder(t))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function normPrivateKeyToScalar(t){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:s,n:a}=e;if(n&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=utils_bytesToHex(t)),"string"!=typeof t||!n.includes(t.length))throw Error("Invalid key");t=t.padStart(2*i,"0")}try{r="bigint"==typeof t?t:utils_bytesToNumberBE(utils_ensureBytes("private key",t,i))}catch(e){throw Error(`private key must be ${i} bytes, hex or bigint, not ${typeof t}`)}return s&&(r=modular_mod(r,a)),assertGE(r),r}let s=new Map;function assertPrjPoint(t){if(!(t instanceof Point))throw Error("ProjectivePoint expected")}let Point=class Point{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw Error("x required");if(null==e||!r.isValid(e))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(t){let{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw Error("invalid affine point");if(t instanceof Point)throw Error("projective point not allowed");let is0=t=>r.eql(t,r.ZERO);return is0(e)&&is0(n)?Point.ZERO:new Point(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){let e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(Point.fromAffine)}static fromHex(t){let e=Point.fromAffine(i(utils_ensureBytes("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return Point.BASE.multiply(normPrivateKeyToScalar(t))}_setWindowSize(t){this._WINDOW_SIZE=t,s.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:t,y:n}=this.toAffine();if(!r.isValid(t)||!r.isValid(n))throw Error("bad point: x or y not FE");let i=r.sqr(n),s=weierstrassEquation(t);if(!r.eql(i,s))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw Error("Field doesn't support isOdd")}equals(t){assertPrjPoint(t);let{px:e,py:n,pz:i}=this,{px:s,py:a,pz:o}=t,u=r.eql(r.mul(e,o),r.mul(s,i)),l=r.eql(r.mul(n,o),r.mul(a,i));return u&&l}negate(){return new Point(this.px,r.neg(this.py),this.pz)}double(){let{a:t,b:n}=e,i=r.mul(n,D),{px:s,py:a,pz:o}=this,u=r.ZERO,l=r.ZERO,c=r.ZERO,f=r.mul(s,s),d=r.mul(a,a),p=r.mul(o,o),g=r.mul(s,a);return g=r.add(g,g),c=r.mul(s,o),c=r.add(c,c),u=r.mul(t,c),l=r.mul(i,p),l=r.add(u,l),u=r.sub(d,l),l=r.add(d,l),l=r.mul(u,l),u=r.mul(g,u),c=r.mul(i,c),p=r.mul(t,p),g=r.sub(f,p),g=r.mul(t,g),g=r.add(g,c),c=r.add(f,f),f=r.add(c,f),f=r.add(f,p),f=r.mul(f,g),l=r.add(l,f),p=r.mul(a,o),p=r.add(p,p),f=r.mul(p,g),u=r.sub(u,f),c=r.mul(p,d),c=r.add(c,c),c=r.add(c,c),new Point(u,l,c)}add(t){assertPrjPoint(t);let{px:n,py:i,pz:s}=this,{px:a,py:o,pz:u}=t,l=r.ZERO,c=r.ZERO,f=r.ZERO,d=e.a,p=r.mul(e.b,D),g=r.mul(n,a),y=r.mul(i,o),m=r.mul(s,u),b=r.add(n,i),w=r.add(a,o);b=r.mul(b,w),w=r.add(g,y),b=r.sub(b,w),w=r.add(n,s);let v=r.add(a,u);return w=r.mul(w,v),v=r.add(g,m),w=r.sub(w,v),v=r.add(i,s),l=r.add(o,u),v=r.mul(v,l),l=r.add(y,m),v=r.sub(v,l),f=r.mul(d,w),l=r.mul(p,m),f=r.add(l,f),l=r.sub(y,f),f=r.add(y,f),c=r.mul(l,f),y=r.add(g,g),y=r.add(y,g),m=r.mul(d,m),w=r.mul(p,w),y=r.add(y,m),m=r.sub(g,m),m=r.mul(d,m),w=r.add(w,m),g=r.mul(y,w),c=r.add(c,g),g=r.mul(v,w),l=r.mul(b,l),l=r.sub(l,g),g=r.mul(b,y),f=r.mul(v,f),f=r.add(f,g),new Point(l,c,f)}subtract(t){return this.add(t.negate())}is0(){return this.equals(Point.ZERO)}wNAF(t){return o.wNAFCached(this,s,t,t=>{let e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(Point.fromAffine)})}multiplyUnsafe(t){let n=Point.ZERO;if(t===W)return n;if(assertGE(t),t===F)return this;let{endo:i}=e;if(!i)return o.unsafeLadder(this,t);let{k1neg:s,k1:a,k2neg:u,k2:l}=i.splitScalar(t),c=n,f=n,d=this;for(;a>W||l>W;)a&F&&(c=c.add(d)),l&F&&(f=f.add(d)),d=d.double(),a>>=F,l>>=F;return s&&(c=c.negate()),u&&(f=f.negate()),f=new Point(r.mul(f.px,i.beta),f.py,f.pz),c.add(f)}multiply(t){let n,i;assertGE(t);let{endo:s}=e;if(s){let{k1neg:e,k1:a,k2neg:u,k2:l}=s.splitScalar(t),{p:c,f:f}=this.wNAF(a),{p:d,f:p}=this.wNAF(l);c=o.constTimeNegate(e,c),d=o.constTimeNegate(u,d),d=new Point(r.mul(d.px,s.beta),d.py,d.pz),n=c.add(d),i=f.add(p)}else{let{p:e,f:r}=this.wNAF(t);n=e,i=r}return Point.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(t,e,r){let n=Point.BASE,mul=(t,e)=>e!==W&&e!==F&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),i=mul(this,e).add(mul(t,r));return i.is0()?void 0:i}toAffine(t){let{px:e,py:n,pz:i}=this,s=this.is0();null==t&&(t=s?r.ONE:r.inv(i));let a=r.mul(e,t),o=r.mul(n,t),u=r.mul(i,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw Error("invZ was invalid");return{x:a,y:o}}isTorsionFree(){let{h:t,isTorsionFree:r}=e;if(t===F)return!0;if(r)return r(Point,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:t,clearCofactor:r}=e;return t===F?this:r?r(Point,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),n(Point,this,t)}toHex(t=!0){return utils_bytesToHex(this.toRawBytes(t))}};Point.BASE=new Point(e.Gx,e.Gy,r.ONE),Point.ZERO=new Point(r.ZERO,r.ONE,r.ZERO);let a=e.nBitLength,o=function(t,e){let constTimeNegate=(t,e)=>{let r=e.negate();return t?r:e},opts=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate,unsafeLadder(e,r){let n=t.ZERO,i=e;for(;r>L;)r&G&&(n=n.add(i)),i=i.double(),r>>=G;return n},precomputeWindow(t,e){let{windows:r,windowSize:n}=opts(e),i=[],s=t,a=s;for(let t=0;t<r;t++){a=s,i.push(a);for(let t=1;t<n;t++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(e,r,n){let{windows:i,windowSize:s}=opts(e),a=t.ZERO,o=t.BASE,u=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let t=0;t<i;t++){let e=t*s,i=Number(n&u);n>>=c,i>s&&(i-=l,n+=G);let f=e+Math.abs(i)-1,d=t%2!=0,p=i<0;0===i?o=o.add(constTimeNegate(d,r[e])):a=a.add(constTimeNegate(p,r[f]))}return{p:a,f:o}},wNAFCached(t,e,r,n){let i=t._WINDOW_SIZE||1,s=e.get(t);return s||(s=this.precomputeWindow(t,i),1!==i&&e.set(t,n(s))),this.wNAF(i,s,r)}}}(Point,e.endo?Math.ceil(a/2):a);return{CURVE:e,ProjectivePoint:Point,normPrivateKeyToScalar,weierstrassEquation,isWithinCurveOrder}}({...e,toBytes(t,e,n){let i=e.toAffine(),s=r.toBytes(i.x),a=abstract_utils_concatBytes;return n?a(Uint8Array.from([e.hasEvenY()?2:3]),s):a(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(t){let e=t.length,n=t[0],a=t.subarray(1);if(e===i&&(2===n||3===n)){let t=utils_bytesToNumberBE(a);if(!(W<t&&t<r.ORDER))throw Error("Point is not on curve");let e=u(t),i=r.sqrt(e),s=(i&F)===F;return(1&n)==1!==s&&(i=r.neg(i)),{x:t,y:i}}if(e===s&&4===n){let t=r.fromBytes(a.subarray(0,r.BYTES)),e=r.fromBytes(a.subarray(r.BYTES,2*r.BYTES));return{x:t,y:e}}throw Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),numToNByteStr=t=>utils_bytesToHex(utils_numberToBytesBE(t,e.nByteLength));function isBiggerThanHalfOrder(t){let e=n>>F;return t>e}let slcNum=(t,e,r)=>utils_bytesToNumberBE(t.slice(e,r));let Signature=class Signature{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){let r=e.nByteLength;return t=utils_ensureBytes("compactSignature",t,2*r),new Signature(slcNum(t,0,r),slcNum(t,r,2*r))}static fromDER(t){let{r:e,s:r}=K.toSig(utils_ensureBytes("DER",t));return new Signature(e,r)}assertValidity(){if(!l(this.r))throw Error("r must be 0 < r < CURVE.n");if(!l(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new Signature(this.r,this.s,t)}recoverPublicKey(t){let{r:i,s,recovery:o}=this,u=f(utils_ensureBytes("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let l=2===o||3===o?i+e.n:i;if(l>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&o)==0?"02":"03",d=a.fromHex(c+numToNByteStr(l)),p=invert(l,n),g=modN(-u*p),y=modN(s*p),m=a.BASE.multiplyAndAddUnsafe(d,g,y);if(!m)throw Error("point at infinify");return m.assertValidity(),m}hasHighS(){return isBiggerThanHalfOrder(this.s)}normalizeS(){return this.hasHighS()?new Signature(this.r,modN(-this.s),this.recovery):this}toDERRawBytes(){return utils_hexToBytes(this.toDERHex())}toDERHex(){return K.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return utils_hexToBytes(this.toCompactHex())}toCompactHex(){return numToNByteStr(this.r)+numToNByteStr(this.s)}};function isProbPub(t){let e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?n===i||n===s:r?n===2*i||n===2*s:t instanceof a}let c=e.bits2int||function(t){let r=utils_bytesToNumberBE(t),n=8*t.length-e.nBitLength;return n>0?r>>BigInt(n):r},f=e.bits2int_modN||function(t){return modN(c(t))},d=bitMask(e.nBitLength);function int2octets(t){if("bigint"!=typeof t)throw Error("bigint expected");if(!(W<=t&&t<d))throw Error(`bigint expected < 2^${e.nBitLength}`);return utils_numberToBytesBE(t,e.nByteLength)}let p={lowS:e.lowS,prehash:!1},g={lowS:e.lowS,prehash:!1};return a.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return a.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(isProbPub(t))throw Error("first arg must be private key");if(!isProbPub(e))throw Error("second arg must be public key");let n=a.fromHex(e);return n.multiply(o(t)).toRawBytes(r)},sign:function(t,i,s=p){let{seed:u,k2sig:d}=function(t,i,s=p){if(["recovered","canonical"].some(t=>t in s))throw Error("sign() legacy options not supported");let{hash:u,randomBytes:d}=e,{lowS:g,prehash:y,extraEntropy:m}=s;null==g&&(g=!0),t=utils_ensureBytes("msgHash",t),y&&(t=utils_ensureBytes("prehashed msgHash",u(t)));let b=f(t),w=o(i),v=[int2octets(w),int2octets(b)];if(null!=m){let t=!0===m?d(r.BYTES):m;v.push(utils_ensureBytes("extraEntropy",t))}let S=abstract_utils_concatBytes(...v);return{seed:S,k2sig:function(t){let e=c(t);if(!l(e))return;let r=invert(e,n),i=a.BASE.multiply(e).toAffine(),s=modN(i.x);if(s===W)return;let o=modN(r*modN(b+s*w));if(o===W)return;let u=(i.x===s?0:2)|Number(i.y&F),f=o;return g&&isBiggerThanHalfOrder(o)&&(f=isBiggerThanHalfOrder(o)?modN(-o):o,u^=1),new Signature(s,f,u)}}}(t,i,s),g=createHmacDrbg(e.hash.outputLen,e.nByteLength,e.hmac);return g(u,d)},verify:function(t,r,i,s=g){let o,u;if(r=utils_ensureBytes("msgHash",r),i=utils_ensureBytes("publicKey",i),"strict"in s)throw Error("options.strict was renamed to lowS");let{lowS:l,prehash:c}=s;try{if("string"==typeof t||t instanceof Uint8Array)try{u=Signature.fromDER(t)}catch(e){if(!(e instanceof K.Err))throw e;u=Signature.fromCompact(t)}else if("object"==typeof t&&"bigint"==typeof t.r&&"bigint"==typeof t.s){let{r:e,s:r}=t;u=new Signature(e,r)}else throw Error("PARSE");o=a.fromHex(i)}catch(t){if("PARSE"===t.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&u.hasHighS())return!1;c&&(r=e.hash(r));let{r:d,s:p}=u,y=f(r),m=invert(p,n),b=modN(y*m),w=modN(d*m),v=a.BASE.multiplyAndAddUnsafe(o,b,w)?.toAffine();if(!v)return!1;let S=modN(v.x);return S===d},ProjectivePoint:a,Signature,utils:{isValidPrivateKey(t){try{return o(t),!0}catch(t){return!1}},normPrivateKeyToScalar:o,randomPrivateKey:()=>{let t=getMinHashLength(e.n);return function(t,e,r=!1){let n=t.length,i=getFieldBytesLength(e),s=getMinHashLength(e);if(n<16||n<s||n>1024)throw Error(`expected ${s}-1024 bytes of input, got ${n}`);let a=r?utils_bytesToNumberBE(t):utils_bytesToNumberLE(t),o=modular_mod(a,e-P)+P;return r?numberToBytesLE(o,i):utils_numberToBytesBE(o,i)}(e.randomBytes(t),e.n)},precompute:(t=8,e=a.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}})({...t,hash:e,hmac:(t,...r)=>hmac(e,t,function(...t){let e=new Uint8Array(t.reduce((t,e)=>t+e.length,0)),r=0;return t.forEach(t=>{if(!u8a(t))throw Error("Uint8Array expected");e.set(t,r),r+=t.length}),e}(...r)),randomBytes:utils_randomBytes});return Object.freeze({...create(e),create})}BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let V=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Z=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),X=BigInt(1),J=BigInt(2),divNearest=(t,e)=>(t+e/J)/e,Y=Field(V,void 0,void 0,{sqrt:function(t){let e=BigInt(3),r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),o=BigInt(88),u=t*t*t%V,l=u*u*t%V,c=pow2(l,e,V)*l%V,f=pow2(c,e,V)*l%V,d=pow2(f,J,V)*u%V,p=pow2(d,n,V)*d%V,g=pow2(p,i,V)*p%V,y=pow2(g,a,V)*g%V,m=pow2(y,o,V)*y%V,b=pow2(m,a,V)*g%V,w=pow2(b,e,V)*l%V,v=pow2(w,s,V)*p%V,S=pow2(v,r,V)*u%V,_=pow2(S,J,V);if(!Y.eql(Y.sqr(_),t))throw Error("Cannot find square root");return _}}),Q=createCurve({a:BigInt(0),b:BigInt(7),Fp:Y,n:Z,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-X*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),s=divNearest(e*t,Z),a=divNearest(-r*t,Z),o=modular_mod(t-s*e-a*n,Z),u=modular_mod(-s*r-a*e,Z),l=o>i,c=u>i;if(l&&(o=Z-o),c&&(u=Z-u),o>i||u>i)throw Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:o,k2neg:c,k2:u}}}},k);BigInt(0),Q.ProjectivePoint;var tt=r(17748);let Secp256k1PublicKey=class Secp256k1PublicKey extends PublicKey{constructor(t){if(super(),"string"==typeof t?this.data=(0,l.F)(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),33!==this.data.length)throw Error(`Invalid public key input. Expected 33 bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return m.Secp256k1}async verify(t,e){let r;if("string"==typeof e){let t=parseSerializedSignature(e);if("Secp256k1"!==t.signatureScheme)throw Error("Invalid signature scheme");if(!bytesEqual(this.toRawBytes(),t.publicKey))throw Error("Signature does not match public key");r=t.signature}else r=e;return Q.verify(Q.Signature.fromCompact(r),(0,tt.JQ)(t),this.toRawBytes())}};Secp256k1PublicKey.SIZE=33;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let te=Field(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),tr=te.create(BigInt("-3")),tn=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),ti=createCurve({a:tr,b:tn,Fp:te,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},k);let Secp256r1PublicKey=class Secp256r1PublicKey extends PublicKey{constructor(t){if(super(),"string"==typeof t?this.data=(0,l.F)(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),33!==this.data.length)throw Error(`Invalid public key input. Expected 33 bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return m.Secp256r1}async verify(t,e){let r;if("string"==typeof e){let t=parseSerializedSignature(e);if("Secp256r1"!==t.signatureScheme)throw Error("Invalid signature scheme");if(!bytesEqual(this.toRawBytes(),t.publicKey))throw Error("Signature does not match public key");r=t.signature}else r=e;return ti.verify(ti.Signature.fromCompact(r),(0,tt.JQ)(t),this.toRawBytes())}};Secp256r1PublicKey.SIZE=33;let MultiSigPublicKey=class MultiSigPublicKey extends PublicKey{constructor(t){if(super(),"string"==typeof t?(this.rawBytes=(0,l.F)(t),this.multisigPublicKey=u.$5.MultiSigPublicKey.parse(this.rawBytes)):t instanceof Uint8Array?(this.rawBytes=t,this.multisigPublicKey=u.$5.MultiSigPublicKey.parse(this.rawBytes)):(this.multisigPublicKey=t,this.rawBytes=u.$5.MultiSigPublicKey.serialize(t).toBytes()),this.multisigPublicKey.threshold<1)throw Error("Invalid threshold");let e=new Set;this.publicKeys=this.multisigPublicKey.pk_map.map(({pubKey:t,weight:r})=>{let[n,i]=Object.entries(t)[0],s=Uint8Array.from(i).toString();if(e.has(s))throw Error("Multisig does not support duplicate public keys");if(e.add(s),r<1)throw Error("Invalid weight");return{publicKey:publicKeyFromRawBytes(n,Uint8Array.from(i)),weight:r}});let r=this.publicKeys.reduce((t,{weight:e})=>t+e,0);if(this.multisigPublicKey.threshold>r)throw Error("Unreachable threshold");if(this.publicKeys.length>10)throw Error("Max number of signers in a multisig is 10");if(this.publicKeys.length<1)throw Error("Min number of signers in a multisig is 1")}static fromPublicKeys({threshold:t,publicKeys:e}){return new MultiSigPublicKey({pk_map:e.map(({publicKey:t,weight:e})=>{let r=w[t.flag()];return{pubKey:{[r]:Array.from(t.toRawBytes())},weight:e}}),threshold:t})}equals(t){return super.equals(t)}toRawBytes(){return this.rawBytes}getPublicKeys(){return this.publicKeys}toHexAddress(){let t=new Uint8Array(653);t.set([m.MultiSig]),t.set(u.$5.u16().serialize(this.multisigPublicKey.threshold).toBytes(),1);let e=3;for(let{publicKey:r,weight:n}of this.publicKeys){let i=r.toBenfenBytes();t.set(i,e),e+=i.length,t.set([n],e++)}return(0,d.wo)((0,f.ci)((0,c.R)(t.slice(0,e),{dkLen:32})))}flag(){return m.MultiSig}async verify(t,e){let r=parseSerializedSignature(e);if("MultiSig"!==r.signatureScheme)throw Error("Invalid signature scheme");let{multisig:n}=r,i=0;if(!bytesEqual(u.$5.MultiSigPublicKey.serialize(this.multisigPublicKey).toBytes(),u.$5.MultiSigPublicKey.serialize(n.multisig_pk).toBytes()))return!1;for(let{publicKey:e,weight:r,signature:s}of function(t){let e=Array(t.sigs.length);for(let r=0;r<t.sigs.length;r++){let[n,i]=Object.entries(t.sigs[r])[0],s=(function(t){if(t<0||t>1024)throw Error("Invalid bitmap");let e=[];for(let r=0;r<10;r++)(t&1<<r)!=0&&e.push(r);return Uint8Array.from(e)})(t.bitmap).at(r),a=t.multisig_pk.pk_map[s],o=Uint8Array.from(Object.values(a.pubKey)[0]);if("MultiSig"===n)throw Error("MultiSig is not supported inside MultiSig");let u=publicKeyFromRawBytes(n,o);e[r]={signatureScheme:n,signature:Uint8Array.from(i),publicKey:u,weight:a.weight}}return e}(n)){if(!await e.verify(t,s))return!1;i+=r}return i>=this.multisigPublicKey.threshold}combinePartialSignatures(t){if(t.length>10)throw Error("Max number of signatures in a multisig is 10");let e=0,r=Array(t.length);for(let n=0;n<t.length;n++){let i,s,a=parseSerializedSignature(t[n]);if("MultiSig"===a.signatureScheme)throw Error("MultiSig is not supported inside MultiSig");i="ZkLogin"===a.signatureScheme?toZkLoginPublicIdentifier(a.zkLogin?.addressSeed,a.zkLogin?.iss).toRawBytes():a.publicKey,r[n]={[a.signatureScheme]:Array.from(a.signature.map(t=>Number(t)))};for(let t=0;t<this.publicKeys.length;t++)if(bytesEqual(i,this.publicKeys[t].publicKey.toRawBytes())){if(e&1<<t)throw Error("Received multiple signatures from the same public key");s=t;break}if(void 0===s)throw Error("Received signature from unknown public key");e|=1<<s}let n={sigs:r,bitmap:e,multisig_pk:this.multisigPublicKey},i=u.$5.MultiSig.serialize(n,{maxSize:8192}).toBytes(),s=new Uint8Array(i.length+1);return s.set([m.MultiSig]),s.set(i,1),(0,l.z)(s)}};async function verifyPersonalMessage(t,e){let r=parseSignature(e);if(!await r.publicKey.verifyPersonalMessage(t,r.serializedSignature))throw Error("Signature is not valid for the provided message");return r.publicKey}async function verifyTransactionBlock(t,e){let r=parseSignature(e);if(!await r.publicKey.verifyTransactionBlock(t,r.serializedSignature))throw Error("Signature is not valid for the provided TransactionBlock");return r.publicKey}function parseSignature(t){let e=parseSerializedSignature(t);if("MultiSig"===e.signatureScheme)return{...e,publicKey:new MultiSigPublicKey(e.multisig.multisig_pk)};let r=publicKeyFromRawBytes(e.signatureScheme,e.publicKey);return{...e,publicKey:r}}function publicKeyFromRawBytes(t,e){switch(t){case"ED25519":return new Ed25519PublicKey(e);case"Secp256k1":return new Secp256k1PublicKey(e);case"Secp256r1":return new Secp256r1PublicKey(e);case"MultiSig":return new MultiSigPublicKey(e);case"ZkLogin":return new ZkLoginPublicIdentifier(e);default:throw Error(`Unsupported signature scheme ${t}`)}}},91881:function(t,e,r){"use strict";r.d(e,{EP:function(){return rotlSH},SD:function(){return rotlBH},Vl:function(){return split},gm:function(){return rotlSL},mk:function(){return rotlBL}});let n=BigInt(4294967296-1),i=BigInt(32);function fromBig(t,e=!1){return e?{h:Number(t&n),l:Number(t>>i&n)}:{h:0|Number(t>>i&n),l:0|Number(t&n)}}function split(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:s,l:a}=fromBig(t[i],e);[r[i],n[i]]=[s,a]}return[r,n]}let rotlSH=(t,e,r)=>t<<r|e>>>32-r,rotlSL=(t,e,r)=>e<<r|t>>>32-r,rotlBH=(t,e,r)=>e<<r-32|t>>>64-r,rotlBL=(t,e,r)=>t<<r-32|e>>>64-r;e.ZP={fromBig,split,toBig:(t,e)=>BigInt(t>>>0)<<i|BigInt(e>>>0),shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH,rotlSL,rotlBH,rotlBL,add:function(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/4294967296|0)|0,l:0|i}},add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/4294967296|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,i)=>e+r+n+i+(t/4294967296|0)|0,add5H:(t,e,r,n,i,s)=>e+r+n+i+s+(t/4294967296|0)|0,add5L:(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0)}},19346:function(t,e,r){"use strict";r.d(e,{R:function(){return l}});var n=r(93527),i=r(66409);let s=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);let BLAKE=class BLAKE extends i.kb{constructor(t,e,r={},s,a,o){if(super(),this.blockLen=t,this.outputLen=e,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,(0,n.k8)(t),(0,n.k8)(e),(0,n.k8)(s),e<0||e>s)throw Error("outputLen bigger than keyLen");if(void 0!==r.key&&(r.key.length<1||r.key.length>s))throw Error("key length must be undefined or 1.."+s);if(void 0!==r.salt&&r.salt.length!==a)throw Error("salt must be undefined or "+a);if(void 0!==r.personalization&&r.personalization.length!==o)throw Error("personalization must be undefined or "+o);this.buffer=new Uint8Array(t),this.buffer32=(0,i.Jq)(this.buffer)}update(t){(0,n.$h)(this);let{blockLen:e,buffer:r,buffer32:s}=this;t=(0,i.O0)(t);let a=t.length,o=t.byteOffset,u=t.buffer;for(let n=0;n<a;){this.pos===e&&(i.iA||(0,i.l1)(s),this.compress(s,0,!1),i.iA||(0,i.l1)(s),this.pos=0);let l=Math.min(e-this.pos,a-n),c=o+n;if(l===e&&!(c%4)&&n+l<a){let t=new Uint32Array(u,c,Math.floor((a-n)/4));i.iA||(0,i.l1)(t);for(let r=0;n+e<a;r+=s.length,n+=e)this.length+=e,this.compress(t,r,!1);i.iA||(0,i.l1)(t);continue}r.set(t.subarray(n,n+l),this.pos),this.pos+=l,this.length+=l,n+=l}return this}digestInto(t){(0,n.$h)(this),(0,n.eB)(t,this);let{pos:e,buffer32:r}=this;this.finished=!0,this.buffer.subarray(e).fill(0),i.iA||(0,i.l1)(r),this.compress(r,0,!0),i.iA||(0,i.l1)(r);let s=(0,i.Jq)(t);this.get().forEach((t,e)=>s[e]=(0,i.UM)(t))}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){let{buffer:e,length:r,finished:n,destroyed:i,outputLen:s,pos:a}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.length=r,t.finished=n,t.destroyed=i,t.outputLen=s,t.buffer.set(e),t.pos=a,t}};var a=r(91881);let o=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),u=new Uint32Array(32);function G1b(t,e,r,n,i,s){let o=i[s],l=i[s+1],c=u[2*t],f=u[2*t+1],d=u[2*e],p=u[2*e+1],g=u[2*r],y=u[2*r+1],m=u[2*n],b=u[2*n+1],w=a.ZP.add3L(c,d,o);f=a.ZP.add3H(w,f,p,l),c=0|w,({Dh:b,Dl:m}={Dh:b^f,Dl:m^c}),({Dh:b,Dl:m}={Dh:a.ZP.rotr32H(b,m),Dl:a.ZP.rotr32L(b,m)}),({h:y,l:g}=a.ZP.add(y,g,b,m)),({Bh:p,Bl:d}={Bh:p^y,Bl:d^g}),({Bh:p,Bl:d}={Bh:a.ZP.rotrSH(p,d,24),Bl:a.ZP.rotrSL(p,d,24)}),u[2*t]=c,u[2*t+1]=f,u[2*e]=d,u[2*e+1]=p,u[2*r]=g,u[2*r+1]=y,u[2*n]=m,u[2*n+1]=b}function G2b(t,e,r,n,i,s){let o=i[s],l=i[s+1],c=u[2*t],f=u[2*t+1],d=u[2*e],p=u[2*e+1],g=u[2*r],y=u[2*r+1],m=u[2*n],b=u[2*n+1],w=a.ZP.add3L(c,d,o);f=a.ZP.add3H(w,f,p,l),c=0|w,({Dh:b,Dl:m}={Dh:b^f,Dl:m^c}),({Dh:b,Dl:m}={Dh:a.ZP.rotrSH(b,m,16),Dl:a.ZP.rotrSL(b,m,16)}),({h:y,l:g}=a.ZP.add(y,g,b,m)),({Bh:p,Bl:d}={Bh:p^y,Bl:d^g}),({Bh:p,Bl:d}={Bh:a.ZP.rotrBH(p,d,63),Bl:a.ZP.rotrBL(p,d,63)}),u[2*t]=c,u[2*t+1]=f,u[2*e]=d,u[2*e+1]=p,u[2*r]=g,u[2*r+1]=y,u[2*n]=m,u[2*n+1]=b}let BLAKE2b=class BLAKE2b extends BLAKE{constructor(t={}){super(128,void 0===t.dkLen?64:t.dkLen,t,64,16,16),this.v0l=0|o[0],this.v0h=0|o[1],this.v1l=0|o[2],this.v1h=0|o[3],this.v2l=0|o[4],this.v2h=0|o[5],this.v3l=0|o[6],this.v3h=0|o[7],this.v4l=0|o[8],this.v4h=0|o[9],this.v5l=0|o[10],this.v5h=0|o[11],this.v6l=0|o[12],this.v6h=0|o[13],this.v7l=0|o[14],this.v7h=0|o[15];let e=t.key?t.key.length:0;if(this.v0l^=this.outputLen|e<<8|16842752,t.salt){let e=(0,i.Jq)((0,i.O0)(t.salt));this.v4l^=(0,i.UM)(e[0]),this.v4h^=(0,i.UM)(e[1]),this.v5l^=(0,i.UM)(e[2]),this.v5h^=(0,i.UM)(e[3])}if(t.personalization){let e=(0,i.Jq)((0,i.O0)(t.personalization));this.v6l^=(0,i.UM)(e[0]),this.v6h^=(0,i.UM)(e[1]),this.v7l^=(0,i.UM)(e[2]),this.v7h^=(0,i.UM)(e[3])}if(t.key){let e=new Uint8Array(this.blockLen);e.set((0,i.O0)(t.key)),this.update(e)}}get(){let{v0l:t,v0h:e,v1l:r,v1h:n,v2l:i,v2h:s,v3l:a,v3h:o,v4l:u,v4h:l,v5l:c,v5h:f,v6l:d,v6h:p,v7l:g,v7h:y}=this;return[t,e,r,n,i,s,a,o,u,l,c,f,d,p,g,y]}set(t,e,r,n,i,s,a,o,u,l,c,f,d,p,g,y){this.v0l=0|t,this.v0h=0|e,this.v1l=0|r,this.v1h=0|n,this.v2l=0|i,this.v2h=0|s,this.v3l=0|a,this.v3h=0|o,this.v4l=0|u,this.v4h=0|l,this.v5l=0|c,this.v5h=0|f,this.v6l=0|d,this.v6h=0|p,this.v7l=0|g,this.v7h=0|y}compress(t,e,r){this.get().forEach((t,e)=>u[e]=t),u.set(o,16);let{h:n,l:i}=a.ZP.fromBig(BigInt(this.length));u[24]=o[8]^i,u[25]=o[9]^n,r&&(u[28]=~u[28],u[29]=~u[29]);let l=0;for(let r=0;r<12;r++)G1b(0,4,8,12,t,e+2*s[l++]),G2b(0,4,8,12,t,e+2*s[l++]),G1b(1,5,9,13,t,e+2*s[l++]),G2b(1,5,9,13,t,e+2*s[l++]),G1b(2,6,10,14,t,e+2*s[l++]),G2b(2,6,10,14,t,e+2*s[l++]),G1b(3,7,11,15,t,e+2*s[l++]),G2b(3,7,11,15,t,e+2*s[l++]),G1b(0,5,10,15,t,e+2*s[l++]),G2b(0,5,10,15,t,e+2*s[l++]),G1b(1,6,11,12,t,e+2*s[l++]),G2b(1,6,11,12,t,e+2*s[l++]),G1b(2,7,8,13,t,e+2*s[l++]),G2b(2,7,8,13,t,e+2*s[l++]),G1b(3,4,9,14,t,e+2*s[l++]),G2b(3,4,9,14,t,e+2*s[l++]);this.v0l^=u[0]^u[16],this.v0h^=u[1]^u[17],this.v1l^=u[2]^u[18],this.v1h^=u[3]^u[19],this.v2l^=u[4]^u[20],this.v2h^=u[5]^u[21],this.v3l^=u[6]^u[22],this.v3h^=u[7]^u[23],this.v4l^=u[8]^u[24],this.v4h^=u[9]^u[25],this.v5l^=u[10]^u[26],this.v5h^=u[11]^u[27],this.v6l^=u[12]^u[28],this.v6h^=u[13]^u[29],this.v7l^=u[14]^u[30],this.v7h^=u[15]^u[31],u.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};let l=(0,i.K$)(t=>new BLAKE2b(t))}}]);
//# sourceMappingURL=2344.0aed8802770e1a1f.js.map