(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4431],{6793:function(e,t,n){"use strict";var a=n(85893);n(67294);var s=n(41664),i=n.n(s),o=n(51731);t.Z=e=>{let{dapps:t}=e;return(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.ll,{className:"text-xl",children:"Dapp Bookmarks"}),(0,a.jsx)(o.aY,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:t.map((e,t)=>(0,a.jsx)("div",{className:"border p-2 rounded-lg shadow-sm hover:shadow-md",children:(0,a.jsx)(i(),{href:e.url,legacyBehavior:!0,children:(0,a.jsxs)("a",{className:"text-blue-500 hover:underline text-lg block",children:[e.name," →"]})})},t))})]})}},57161:function(e,t,n){"use strict";n.d(t,{K:function(){return BlockBook}});var a=n(87066);let BlockBook=class BlockBook{async getUTXOs(e){return this.request.get("/api/v2/utxo/".concat(e)).then(e=>e.data)}async getTransaction(e){return this.request.get("/api/v2/tx/".concat(e)).then(e=>e.data)}constructor(e){this.request=a.Z.create({baseURL:e,timeout:1e4})}}},92602:function(e,t){"use strict";t.Z={switchNetwork:[{id:"switchNetwork livenet",name:"switchNetwork livenet",value:"livenet"},{id:"switchNetwork testnet",name:"switchNetwork testnet",value:"testnet"}],switchChain:[{id:"Bitcoin Mainnet",name:"Bitcoin Mainnet",value:"BITCOIN_MAINNET"},{id:"Bitcoin Testnet",name:"Bitcoin Testnet",value:"BITCOIN_TESTNET"},{id:"Bitcoin Testnet4 (Beta)",name:"(不支持) Bitcoin Testnet4 (Beta)",value:"BITCOIN_TESTNET4"},{id:"Bitcoin Signet",name:"Bitcoin Signet",value:"BITCOIN_SIGNET"},{id:"Fractal Bitcoin Mainnet",name:"(不支持) Fractal Bitcoin Mainnet",value:"FRACTAL_BITCOIN_MAINNET"},{id:"Fractal Bitcoin Testnet",name:"(不支持) Fractal Bitcoin Testnet",value:"FRACTAL_BITCOIN_TESTNET"}],signMessage:[{id:"signMessage ecdsa default",name:"SignMessage ECDSA Default",value:JSON.stringify({msg:"Hello World"})},{id:"signMessage ecdsa",name:"SignMessage ECDSA",value:JSON.stringify({msg:"abcdefghijk123456789",type:"ecdsa"})},{id:"signMessage bip322-simple",name:"SignMessage Bip322-Simple",value:JSON.stringify({msg:"hello onekey!",type:"bip322-simple"})}],sendBitcoin:e=>[{id:"sendBitcoin",name:"SendBitcoin",value:JSON.stringify({toAddress:e,satoshis:1e3})}],pushTx:[{id:"pushTx",name:"PushTx",value:"02000000000101ed7f3b53b6bfd3b9e72c794ff95549ea774f017e6e62b0ca735ded29dc8dbc7e0000000000fdffffff02f26a000000000000225120145ddbafe27a50b48ff2321ae186132971b44a6757879ad35739e152d009c0f30000000000000000096a5d0614c0a233144101408928d42444aba4eb0edfb578a14dbc848d5a7354ee66d3cb170511d169e3dfcff3a5f326d01c0227acc6edd5d56c943215eea72e128b28d705da8482b18d9a6500000000"}],signPsbt:[{id:"signPsbt",name:"signPsbt",value:JSON.stringify({psbtHex:"020000000",options:{autoFinalized:!1,toSignInputs:[{index:0,address:"tb1q8h8....mjxzny"},{index:1,publicKey:"tb1q8h8....mjxzny",sighashTypes:[1]},{index:2,publicKey:"02062...8779693f"}]}})}],signPsbts:[{id:"signPsbts",name:"signPsbts",value:JSON.stringify({psbtHexs:["020000000","020000000"],options:[{autoFinalized:!1,toSignInputs:[{index:0,address:"tb1q8h8....mjxzny"},{index:1,publicKey:"tb1q8h8....mjxzny",sighashTypes:[1]},{index:2,publicKey:"02062...8779693f"}]},{autoFinalized:!1,toSignInputs:[{index:0,address:"tb1q8h8....mjxzny"},{index:1,publicKey:"tb1q8h8....mjxzny",sighashTypes:[1]},{index:2,publicKey:"02062...8779693f"}]}]})}],pushPsbt:[{id:"signPsbts",name:"signPsbts",value:"020000000"}]}},44174:function(e,t,n){"use strict";n.a(e,async function(e,a){try{n.d(t,{X:function(){return createPSBT}});var s=n(17656),i=n(4690),o=n(57161),l=n(70252),r=n(48764).Buffer,c=e([i]);async function addInputsAndOutputs(e,t,n,a,i,o,l){let c=0,d=0,u=[];for(let a of t){var f;let t=await l.getTransaction(a.txid),g=t.hex,h=s.Transaction.fromHex(g),p=h.outs[a.vout],x=p.script.toString("hex");u.push(a),c+=parseInt(a.value);let m={hash:a.txid,index:a.vout,sequence:4294967295};console.log("scriptHex",x),function(e,t){let n=e.startsWith("bc1")||e.startsWith("tb1"),a=e.startsWith("3")||e.startsWith("2");return!!n||!!(a&&(t.startsWith("0014")||t.startsWith("0020")))}(n,x)?m.witnessUtxo={script:r.from(x,"hex"),value:parseInt(a.value)}:m.nonWitnessUtxo=r.from(g,"hex"),e.addInput(m);let b=(f=u.length,(148*f+68)*o),v=i+b;if(c>=v){d=b;break}}e.addOutput({address:a,value:i});let g=c-i-d;return g>0&&e.addOutput({address:n,value:g}),u}async function createPSBT(e,t,n,a,i){let r;if(!t||!n)throw Error("toAddress or amount is required");if(i===s.networks.bitcoin?r="https://go.getblock.io/".concat((0,l.P)("WU1HRxULSUpQQ1saWw8GUwRJQlERFUhSXVtfERVFF18=")):i===s.networks.testnet&&(r="https://go.getblock.io/".concat((0,l.P)("DUIXSEAPHktSEgweW1cBUwcdEQYWEEtTW1hRTUMVFQg="))),!r)throw Error("unsupported network");let c=new o.K(r),d=new s.Psbt({network:i});d.setVersion(2),d.setLocktime(0);let u=await c.getUTXOs(e);if(0===u.length)throw Error("当前地址没有在 Blockbook 找到 UTXO");let f=await addInputsAndOutputs(d,u,e,t,n,a,c);return JSON.stringify({psbtHex:d.toHex(),options:{autoFinalized:!1,toSignInputs:f.map((t,n)=>({index:n,address:e}))}})}i=(c.then?(await c)():c)[0],s.initEccLib(i),a()}catch(e){a(e)}})},6912:function(e,t,n){"use strict";n.d(t,{Z:function(){return ConnectButton}});var a=n(85893),s=n(67294),i=n(9663),o=n(51731),l=n(53617),r=n(23225),c=n(96544),d=n(27361),u=n.n(d),f=n(78299);let g={address:"地址",publicKey:"公钥",chainId:"网络"};function ConnectButton(e){let{fetchWallets:t,onConnect:n,onDisconnect:d}=e,{settings:h}=(0,f.r)(),p=(0,s.useRef)(null),x=(0,s.useRef)(!1),[m,b]=(0,s.useState)([]),{setProvider:v,setAccount:y,provider:N,account:w}=(0,r.O)(),j=(0,s.useCallback)(async e=>{try{let{provider:t,...a}=await n(e);v(t),y(a)}catch(e){console.log("connectWallet error",e),(0,c.Am)({title:"连接失败",description:u()(e,"message","")})}},[n,y,v]),k=(0,s.useCallback)(async()=>{x.current=!1,await (null==d?void 0:d()),v(null),y(null)},[d,y,v]),T=(0,s.useCallback)(()=>{setTimeout(()=>{try{var e;null===(e=p.current)||void 0===e||e.click()}catch(e){}},150)},[]),B=(0,s.useCallback)(async e=>{let n=await (null==t?void 0:t());if((null==n?void 0:n.length)===0){T();return}let{directConnection:a}=null!=e?e:{directConnection:!1};(null==n?void 0:n.length)===1||(null==n?void 0:n.length)>0&&a?(T(),await j(n[0])):b(n)},[T,j,t]);return(0,s.useEffect)(()=>{let e=setTimeout(async()=>{!x.current&&(console.log("settings.autoConnect",h.autoConnect),h.autoConnect&&(x.current=!0,await B({directConnection:!0})))},500);return()=>{clearTimeout(e)}},[h.autoConnect]),(0,a.jsx)(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"flex flex-col flex-wrap gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-row flex-wrap justify-between",children:[(0,a.jsxs)(l.Vq,{children:[(0,a.jsx)(l.hg,{asChild:!0,children:(0,a.jsx)(i.z,{onClick:()=>B(),children:"Connect Wallet"})}),(0,a.jsxs)(l.cZ,{children:[(0,a.jsx)(l.GG,{ref:p}),(0,a.jsxs)(l.fK,{children:[(0,a.jsx)(l.$N,{children:"选择钱包开始连接"}),!!m&&m.map(e=>{var t;return(0,a.jsx)(l.GG,{asChild:!0,children:(0,a.jsxs)(i.z,{onClick:()=>j(e),className:"gap-2",children:[e.logo&&(0,a.jsx)("img",{alt:e.name,src:e.logo,className:"w-5 h-5 rounded-full"}),(0,a.jsx)("span",{className:"font-medium",children:e.name}),null===(t=e.tags)||void 0===t?void 0:t.map(e=>(0,a.jsx)("span",{className:"text-xs font-light",children:e},e))]})},e.id)}),!m||0===m.length&&(0,a.jsxs)(l.Be,{children:["没有钱包可用，请安装 OneKey Extension",(0,a.jsx)("a",{target:"_blank",href:"https://www.onekey.so/download/",children:"Install OneKey Extension →"})]})]})]})]}),N&&(0,a.jsx)(i.z,{variant:"destructive",onClick:k,children:"断开链接"})]}),w&&(0,a.jsx)("div",{className:"flex grid-cols-1 xl:grid-cols-2 flex-wrap gap-x-6 gap-y-3 mt-4",children:Object.keys(w).map(e=>{var t;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{children:["".concat(null!==(t=null==g?void 0:g[e])&&void 0!==t?t:e),": "]}),(0,a.jsx)("span",{className:"font-normal flex flex-wrap text-break",children:"".concat(null==w?void 0:w[e])})]},e)})})]})})}},53617:function(e,t,n){"use strict";n.d(t,{$N:function(){return h},Be:function(){return p},GG:function(){return u},Vq:function(){return r},cZ:function(){return g},fK:function(){return DialogHeader},hg:function(){return c}});var a=n(85893),s=n(67294),i=n(12854),o=n(41352),l=n(13441);let r=i.fC,c=i.xz,d=i.h_,u=i.x8,f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s})});f.displayName=i.aV.displayName;let g=s.forwardRef((e,t)=>{let{className:n,children:s,...r}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(f,{}),(0,a.jsxs)(i.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[35%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...r,children:[s,(0,a.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});g.displayName=i.VY.displayName;let DialogHeader=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};DialogHeader.displayName="DialogHeader";let h=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",n),...s})});h.displayName=i.Dx.displayName;let p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...s})});p.displayName=i.dk.displayName},70252:function(e,t,n){"use strict";n.d(t,{P:function(){return function getApiKey(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(t){let t=a.from(e,"base64").toString();return getApiKey(t,!1)}let n="";for(let t=0;t<e.length;t++){let a=e.charCodeAt(t),i=s.charCodeAt(t%s.length);n+=String.fromCharCode(a^i)}return n}}});var a=n(48764).Buffer;let s="https://api.onekeytest.com"},2594:function(){},89214:function(){},85568:function(){},52361:function(){},94616:function(){},22644:function(){}}]);
//# sourceMappingURL=4431.4de5f67159d2bcfd.js.map