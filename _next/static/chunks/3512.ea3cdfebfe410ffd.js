(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3512],{27561:function(e,n,t){var l=t(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,l(e)+1).replace(i,""):e}},67990:function(e){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},23279:function(e,n,t){var l=t(13218),i=t(7771),a=t(14841),s=Math.max,o=Math.min;e.exports=function(e,n,t){var r,c,d,u,v,x,g=0,h=!1,m=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function invokeFunc(n){var t=r,l=c;return r=c=void 0,g=n,u=e.apply(l,t)}function shouldInvoke(e){var t=e-x,l=e-g;return void 0===x||t>=n||t<0||m&&l>=d}function timerExpired(){var e,t,l,a=i();if(shouldInvoke(a))return trailingEdge(a);v=setTimeout(timerExpired,(e=a-x,t=a-g,l=n-e,m?o(l,d-t):l))}function trailingEdge(e){return(v=void 0,f&&r)?invokeFunc(e):(r=c=void 0,u)}function debounced(){var e,t=i(),l=shouldInvoke(t);if(r=arguments,c=this,x=t,l){if(void 0===v)return g=e=x,v=setTimeout(timerExpired,n),h?invokeFunc(e):u;if(m)return clearTimeout(v),v=setTimeout(timerExpired,n),invokeFunc(x)}return void 0===v&&(v=setTimeout(timerExpired,n)),u}return n=a(n)||0,l(t)&&(h=!!t.leading,d=(m="maxWait"in t)?s(a(t.maxWait)||0,n):d,f="trailing"in t?!!t.trailing:f),debounced.cancel=function(){void 0!==v&&clearTimeout(v),g=0,r=x=c=v=void 0},debounced.flush=function(){return void 0===v?u:trailingEdge(i())},debounced}},7771:function(e,n,t){var l=t(55639);e.exports=function(){return l.Date.now()}},14841:function(e,n,t){var l=t(27561),i=t(13218),a=t(33448),s=0/0,o=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return s;if(i(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=i(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=l(e);var t=r.test(e);return t||c.test(e)?d(e.slice(2),t?2:8):o.test(e)?s:+e}},64044:function(e,n,t){"use strict";t.d(n,{D:function(){return InputWithSave}});var l=t(85893),i=t(67294),a=t(23279),s=t.n(a),o=t(40293);function InputWithSave(e){let{storageKey:n,onChange:t,defaultValue:a,type:r="text"}=e,[c,d]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=localStorage.getItem(n)||a||"";d(e),t(e)},[n,a,t]);let u=(0,i.useCallback)(s()(e=>{localStorage.setItem(n,e),t(e)},300),[n,t]);return(0,i.useEffect)(()=>()=>u.cancel(),[u]),(0,l.jsx)(o.I,{type:r,value:c,className:"w-full p-2 border border-gray-300 rounded-md",onChange:e=>{let{value:n}=e.target;d(n),u(n)},placeholder:"输入内容"},n)}},33512:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return BTCExample}});var l=t(85893),i=t(99710),a=t(67294),s=t(9663),o=t(51731),r=t(29791),c=t(64044),d=t(27361),u=t.n(d);function LoopEvmSignMessage(){let[e,n]=(0,a.useState)(),[t,i]=(0,a.useState)(1e3),[d,v]=(0,a.useState)(!1),x=(0,a.useRef)(0),connectWallet=async()=>{var e,t;let[l]=await (null===(t=window)||void 0===t?void 0:null===(e=t.ethereum)||void 0===e?void 0:e.request({method:"eth_requestAccounts",params:[]}));n(l)},handleSignMessage=async n=>{try{var t,l;let i=await (null===(l=window)||void 0===l?void 0:null===(t=l.ethereum)||void 0===t?void 0:t.request({method:"personal_sign",params:["call ".concat(n),e]}));console.log("personal_sign ".concat(n," result"),i)}catch(e){console.log("personal_sign ".concat(n," error"),u()(e,"message",""))}},handleBatchSignMessage=async e=>{console.log("Batch sign message start ===>");let n=Array.from({length:e},(e,n)=>handleSignMessage(n));await Promise.all(n)};return(0,a.useEffect)(()=>{let n;return d?(e||connectWallet(),n=setInterval(()=>{x.current+=1,handleSignMessage(x.current)},t)):clearInterval(n),()=>{clearInterval(n)}},[e,t,d]),(0,l.jsxs)(o.Zb,{children:[(0,l.jsx)(o.Ol,{className:"text-xl font-medium",children:"调用 EVM Persional"}),(0,l.jsx)(o.SZ,{children:"用于测试无限循环调用"}),(0,l.jsx)(o.aY,{children:(0,l.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,l.jsx)(s.z,{onClick:connectWallet,children:"连接钱包"}),e&&(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["当前账号：",e]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"循环调用间隔时间 (ms)"}),(0,l.jsx)(c.D,{type:"number",storageKey:"loop-call-interval",defaultValue:"1000",onChange:e=>{i(Number(e))}})]}),(0,l.jsx)(s.z,{onClick:()=>handleBatchSignMessage(10),children:"连续调用 10 次"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"循环调用开关"}),(0,l.jsx)(r.r,{checked:d,onCheckedChange:v})]})]})})]})}function LoopEvmSignTx(){let[e,n]=(0,a.useState)(),[t,i]=(0,a.useState)(1e3),[d,v]=(0,a.useState)(!1),x=(0,a.useRef)(0),connectWallet=async()=>{var e,t;let[l]=await (null===(t=window)||void 0===t?void 0:null===(e=t.ethereum)||void 0===e?void 0:e.request({method:"eth_requestAccounts",params:[]}));n(l)},handleSignTx=async(e,n,t)=>{try{var l,i;let a=await (null===(i=window)||void 0===i?void 0:null===(l=i.ethereum)||void 0===l?void 0:l.request({method:"eth_sendTransaction",params:[{from:e,to:n,value:"0x".concat(Number(t).toString(16)),gasLimit:"0x5028",gasPrice:"0xbebc200"}]}));console.log("eth_sendTransaction ".concat(t," result"),a)}catch(e){console.log("eth_sendTransaction ".concat(t," error"),u()(e,"message",""))}},handleBatchSignTx=async n=>{console.log("Batch sign tx start ===>");let t=Array.from({length:n},(n,t)=>handleSignTx(e,e,t));await Promise.all(t)};return(0,a.useEffect)(()=>{let n;return d?(e||connectWallet(),n=setInterval(()=>{x.current+=1,handleSignTx(e,e,x.current)},t)):clearInterval(n),()=>{clearInterval(n)}},[e,t,d]),(0,l.jsxs)(o.Zb,{children:[(0,l.jsx)(o.Ol,{className:"text-xl font-medium",children:"调用 EVM eth_sendTransaction"}),(0,l.jsx)(o.SZ,{children:"用于测试无限循环调用"}),(0,l.jsx)(o.aY,{children:(0,l.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,l.jsx)(s.z,{onClick:connectWallet,children:"连接钱包"}),e&&(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["当前账号：",e]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"循环调用间隔时间 (ms)"}),(0,l.jsx)(c.D,{type:"number",storageKey:"loop-call-interval",defaultValue:"1000",onChange:e=>{i(Number(e))}})]}),(0,l.jsx)(s.z,{onClick:()=>handleBatchSignTx(10),children:"连续调用 10 次"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"循环调用开关"}),(0,l.jsx)(r.r,{checked:d,onCheckedChange:v})]})]})})]})}let v={evm:async()=>{var e,n;let[t]=await (null===(n=window)||void 0===n?void 0:null===(e=n.ethereum)||void 0===e?void 0:e.request({method:"eth_requestAccounts",params:[]}));return t},cfx:async()=>{var e,n;let[t]=await (null===(n=window)||void 0===n?void 0:null===(e=n.conflux)||void 0===e?void 0:e.request({method:"cfx_requestAccounts",params:[]}));return t},btc:async()=>{var e,n;let[t]=await (null===(n=window)||void 0===n?void 0:null===(e=n.unisat)||void 0===e?void 0:e.requestAccounts());return t},aptos:async()=>{var e,n;let{address:t}=await (null===(n=window)||void 0===n?void 0:null===(e=n.aptos)||void 0===e?void 0:e.connect());return t}};function MultipleCallConnectWallet(){return(0,l.jsxs)(o.Zb,{children:[(0,l.jsx)(o.Ol,{className:"text-xl font-medium",children:"连接 EVM、CFX、APTOS、BTC 账户"}),(0,l.jsx)(o.SZ,{children:"用于测试并发多链连接 wallet"}),(0,l.jsx)(o.aY,{children:(0,l.jsx)("div",{className:"flex flex-col gap-5",children:(0,l.jsx)(s.z,{onClick:()=>{console.log("Connect wallet start ===>"),Object.keys(v).forEach(async e=>{v[e]().then(n=>{console.log("Connect wallet ".concat(e," address"),n)}).catch(n=>{console.log("Connect wallet ".concat(e," error"),u()(n,"message",""))}),await new Promise(e=>setTimeout(e,1e3))})},children:"批量连接钱包"})})})]})}let x={evm:async()=>{var e,n,t,l;let[i]=await (null===(n=window)||void 0===n?void 0:null===(e=n.ethereum)||void 0===e?void 0:e.request({method:"eth_requestAccounts",params:[]})),a=await (null===(l=window)||void 0===l?void 0:null===(t=l.ethereum)||void 0===t?void 0:t.request({method:"personal_sign",params:["call sign message",i]}));return JSON.stringify(a)},cfx:async()=>{var e,n,t,l;let[i]=await (null===(n=window)||void 0===n?void 0:null===(e=n.conflux)||void 0===e?void 0:e.request({method:"cfx_requestAccounts",params:[]})),a=await (null===(l=window)||void 0===l?void 0:null===(t=l.conflux)||void 0===t?void 0:t.request({method:"personal_sign",params:["call sign message",i]}));return JSON.stringify(a)},btc:async()=>{var e,n;let t=await (null===(n=window)||void 0===n?void 0:null===(e=n.unisat)||void 0===e?void 0:e.signMessage("Hello"));return JSON.stringify(t)},aptos:async()=>{var e,n;let t=await (null===(n=window)||void 0===n?void 0:null===(e=n.aptos)||void 0===e?void 0:e.signMessage({address:!1,application:!0,chainId:!0,message:"This is a sample message",nonce:12345}));return JSON.stringify(t)}};function MultipleCallSignMessage(){return(0,l.jsxs)(o.Zb,{children:[(0,l.jsx)(o.Ol,{className:"text-xl font-medium",children:"调用 EVM、CFX、APTOS、BTC Sign Message"}),(0,l.jsx)(o.SZ,{children:"用于测试并发多链签署 sign message, 请先调用批量连接钱包。"}),(0,l.jsx)(o.aY,{children:(0,l.jsx)("div",{className:"flex flex-col gap-5",children:(0,l.jsx)(s.z,{onClick:()=>{console.log("Call wallet Sign Message start ===>"),Object.keys(x).forEach(async e=>{x[e]().then(n=>{console.log("Call wallet Sign Message ".concat(e," address"),n)}).catch(n=>{console.log("Call wallet Sign Message ".concat(e," error"),u()(n,"message",""))}),await new Promise(e=>setTimeout(e,1e3))})},children:"批量 sign message"})})})]})}let g={evm:async()=>{var e,n,t,l;let[i]=await (null===(n=window)||void 0===n?void 0:null===(e=n.ethereum)||void 0===e?void 0:e.request({method:"eth_requestAccounts",params:[]})),a=await (null===(l=window)||void 0===l?void 0:null===(t=l.ethereum)||void 0===t?void 0:t.request({method:"eth_sendTransaction",params:[{from:i,to:i,value:"0x1",gasLimit:"0x5028",gasPrice:"0xbebc200"}]}));return JSON.stringify(a)},cfx:async()=>{var e,n,t,l;let[i]=await (null===(n=window)||void 0===n?void 0:null===(e=n.conflux)||void 0===e?void 0:e.request({method:"cfx_requestAccounts",params:[]})),a=await (null===(l=window)||void 0===l?void 0:null===(t=l.conflux)||void 0===t?void 0:t.request({method:"cfx_sendTransaction",params:[{from:i,to:i,value:"0x1",gasLimit:"0x5028",gasPrice:"0xbebc200"}]}));return JSON.stringify(a)},btc:async()=>{var e,n,t,l;let[i]=await (null===(n=window)||void 0===n?void 0:null===(e=n.unisat)||void 0===e?void 0:e.requestAccounts()),a=await (null===(l=window)||void 0===l?void 0:null===(t=l.unisat)||void 0===t?void 0:t.sendBitcoin(i,1e3));return JSON.stringify(a)},aptos:async()=>{var e,n,t,l;let{address:i}=await (null===(n=window)||void 0===n?void 0:null===(e=n.aptos)||void 0===e?void 0:e.connect()),a=await (null===(l=window)||void 0===l?void 0:null===(t=l.aptos)||void 0===t?void 0:t.signTransaction({arguments:[i,"10000"],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0x1::aptos_coin::AptosCoin"]}));return JSON.stringify(a)}};function MultipleCallSignTx(){return(0,l.jsxs)(o.Zb,{children:[(0,l.jsx)(o.Ol,{className:"text-xl font-medium",children:"调用 EVM、CFX、APTOS、BTC Sign Tx"}),(0,l.jsx)(o.SZ,{children:"用于测试并发多链签署 sign tx, 请先调用批量连接钱包。"}),(0,l.jsx)(o.aY,{children:(0,l.jsx)("div",{className:"flex flex-col gap-5",children:(0,l.jsx)(s.z,{onClick:()=>{console.log("Call wallet Sign Tx start ===>"),Object.keys(g).forEach(async e=>{g[e]().then(n=>{console.log("Call wallet Sign Tx ".concat(e," address"),n)}).catch(n=>{console.log("Call wallet Sign Tx ".concat(e," error"),u()(n,"message",""))}),await new Promise(e=>setTimeout(e,1e3))})},children:"批量 sign tx"})})})]})}function BTCExample(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(i.s,{title:"单链循环调用",children:[(0,l.jsx)(LoopEvmSignMessage,{}),(0,l.jsx)(LoopEvmSignTx,{})]}),(0,l.jsxs)(i.s,{title:"多链复杂调用",children:[(0,l.jsx)(MultipleCallConnectWallet,{}),(0,l.jsx)(MultipleCallSignMessage,{}),(0,l.jsx)(MultipleCallSignTx,{})]})]})}}}]);
//# sourceMappingURL=3512.ea3cdfebfe410ffd.js.map