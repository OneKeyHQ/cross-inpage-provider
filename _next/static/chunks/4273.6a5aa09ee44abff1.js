(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4273],{6793:function(e,n,t){"use strict";var a=t(85893);t(67294);var s=t(41664),i=t.n(s),r=t(51731);n.Z=e=>{let{dapps:n}=e;return(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.ll,{className:"text-xl",children:"Dapp Bookmarks"}),(0,a.jsx)(r.aY,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.map((e,n)=>(0,a.jsx)("div",{className:"border p-2 rounded-lg shadow-sm hover:shadow-md",children:(0,a.jsx)(i(),{href:e.url,legacyBehavior:!0,children:(0,a.jsxs)("a",{className:"text-blue-500 hover:underline text-lg block",children:[e.name," →"]})})},n))})]})}},90132:function(e,n,t){"use strict";t.d(n,{F:function(){return a}});let a=[{name:"SEAM",url:"https://app.seam.money/"},{name:"Aptos Names",url:"https://www.aptosnames.com/"},{name:"Liquid Swap",url:"https://liquidswap.com/#/"}]},41747:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Example}});var a=t(85893),s=t(90132),i=t(6912),r=t(67294),o=t(27361),c=t.n(o),l=t(87066),d=t(66409),u=t(99710),f=t(23225),g=t(6793),p=t(91471),m=t(50780),x=t.n(m),b=t(22751),y=t(96544),j=t(84284),w=t(48764).Buffer;function Example(){var e,n;let t=(0,r.useRef)([{uuid:"injected",name:"Injected Wallet",inject:"aptos"},{uuid:"injected-onekey",name:"Injected OneKey",inject:"$onekey.aptos"}]),{provider:o,setAccount:m,account:h}=(0,f.O)(),onConnectWallet=async e=>{var n;let a=null===(n=t.current)||void 0===n?void 0:n.find(n=>n.uuid===e.id);if(!a)return Promise.reject("Wallet not found");let s=c()(window,a.inject);if(!s){(0,y.Am)({title:"Wallet not found",description:"Please install the wallet extension"});return}let{address:i,publicKey:r}=await (null==s?void 0:s.connect()),o=await (null==s?void 0:s.network());return{provider:s,address:i,publicKey:r,chainId:o}};return(0,r.useEffect)(()=>{var e;o&&(o.onNetworkChange(e=>{console.log("aptos [onNetworkChange] ".concat(JSON.stringify(e))),e&&e.chainId&&m({...h,chainId:null==e?void 0:e.chainId})}),o.onAccountChange(e=>{console.log("aptos [onAccountChange] ".concat(JSON.stringify(e))),(null==e?void 0:e.address)&&(null==e?void 0:e.publicKey)&&m({...h,address:e.address,publicKey:e.publicKey})}),null===(e=o.onDisconnect)||void 0===e||e.call(o,e=>{console.log("aptos [onDisconnect] ".concat(JSON.stringify(e)))}))},[h,o,m]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{fetchWallets:()=>Promise.resolve(t.current.map(e=>({id:e.uuid,name:e.name}))),onConnect:onConnectWallet,onDisconnect:()=>null==o?void 0:o.disconnect()}),(0,a.jsxs)(u.s,{title:"Basics",children:[(0,a.jsx)(u.u,{title:"connect",description:"连接 Wallet",disableRequestContent:!0,onExecute:async e=>{let n=await (null==o?void 0:o.connect());return JSON.stringify(n)}}),(0,a.jsx)(u.u,{title:"getNetwork",description:"getNetwork",disableRequestContent:!0,onExecute:async e=>{let n=await (null==o?void 0:o.getNetwork());return JSON.stringify(n)}}),(0,a.jsx)(u.u,{title:"getNetworkURL",description:"getNetworkURL",disableRequestContent:!0,onExecute:async e=>{let n=await (null==o?void 0:o.getNetworkURL());return JSON.stringify(n)}}),(0,a.jsx)(u.u,{title:"isConnected",description:"isConnected",disableRequestContent:!0,allowCallWithoutProvider:!0,onExecute:async e=>{var n;let t=null!==(n=null==o?void 0:o.isConnected())&&void 0!==n&&n;return JSON.stringify(t)}}),(0,a.jsx)(u.u,{title:"account",description:"当前账户",disableRequestContent:!0,onExecute:async e=>{let n=await (null==o?void 0:o.account());return JSON.stringify(n)}}),(0,a.jsx)(u.u,{title:"network",description:"当前网络",disableRequestContent:!0,onExecute:async e=>{let n=await (null==o?void 0:o.network());return n}})]}),(0,a.jsxs)(u.s,{title:"Transfer",children:[(0,a.jsx)(u.u,{title:"signMessage",description:"signMessage",presupposeParams:p.Z.signMessage,onExecute:async e=>{let n=JSON.parse(e),t=await (null==o?void 0:o.signMessage(n));return JSON.stringify(t)},onValidate:(e,n)=>{let{fullMessage:t,signature:a}=JSON.parse(n),s=x().sign.detached.verify(w.from(t),(0,d.nr)(a),(0,d.nr)((0,b.stripHexPrefix)(null==h?void 0:h.publicKey)));return Promise.resolve(s.toString())}}),(0,a.jsx)(u.u,{title:"signTransaction",description:"signTransaction",presupposeParams:p.Z.signTransaction(null!==(e=null==h?void 0:h.address)&&void 0!==e?e:""),onExecute:async e=>{let n=JSON.parse(e),t=await (null==o?void 0:o.signTransaction(n));return t},onValidate:async(e,n)=>{let t=JSON.parse(n),a=new Uint8Array(t),s=await l.Z.request({method:"POST",url:"https://api.mainnet.aptoslabs.com/v1/transactions",headers:{"Content-Type":"application/x.aptos.signed_transaction+bcs"},data:a});return console.log(s.data),Promise.resolve(JSON.stringify(s.data))}}),(0,a.jsx)(u.u,{title:"signAndSubmitTransaction",description:"signAndSubmitTransaction",presupposeParams:p.Z.signTransaction(null!==(n=null==h?void 0:h.address)&&void 0!==n?n:""),onExecute:async e=>{let n=JSON.parse(e),t=await (null==o?void 0:o.signAndSubmitTransaction(n));return JSON.stringify(t)}}),(0,a.jsx)(u.u,{title:"signAndSubmitTransaction-Script",description:"signAndSubmitTransaction-Script (会报错，是正常的)",presupposeParams:[{id:"script",name:"script",description:"script",value:""}],onExecute:async e=>{let n=new j.Kj.Script((0,d.nr)("0102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f20"),[new j.Kj.TypeTagU8,new j.Kj.TypeTagU64,new j.Kj.TypeTagU128,new j.Kj.TypeTagBool,new j.Kj.TypeTagAddress,new j.Kj.TypeTagSigner,new j.Kj.TypeTagVector(new j.Kj.TypeTagU8),new j.Kj.TypeTagStruct(new j.Kj.StructTag(new j.Kj.AccountAddress((0,d.nr)("1".repeat(64))),new j.Kj.Identifier("coin"),new j.Kj.Identifier("transfer"),[]))],[new j.Kj.TransactionArgumentU8(1),new j.Kj.TransactionArgumentU64(BigInt("18446744073709551615")),new j.Kj.TransactionArgumentU128(BigInt("340282366920938463463374607431768211455")),new j.Kj.TransactionArgumentBool(!0),new j.Kj.TransactionArgumentAddress(new j.Kj.AccountAddress((0,d.nr)("1".repeat(64)))),new j.Kj.TransactionArgumentU8Vector((0,d.nr)("0102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f20"))]),t=new j.Kj.TransactionPayloadScript(n),a=await (null==o?void 0:o.signAndSubmitTransaction(t));return JSON.stringify(a)}}),(0,a.jsx)(u.u,{title:"signAndSubmitTransaction-mock-Wormhole-Claim",description:"signAndSubmitTransaction-mock-Wormhole-Claim (会报错，是正常的)",presupposeParams:[{id:"script",name:"script",description:"script",value:""}],onExecute:async e=>{let n=new j.Kj.Script((0,d.nr)("0a11ce70b0700000a0601000402040403080c05141617050e161640537f087d403f0072010100020000030203030001010403040400010303060c0a020a020003060c0c060a02060a0201080800010104136d6561736167655f7472616e736d697474657210746f6b656e5f6d657373656e676572075265636569707415726563656976655f6d657373616765167468616e646c655f726563656976655f6d657373616765177e171882e6653018738cb3f3c888c0647fae3b8784f5c65a4d9b38c67c3b73888ed9a3c1b64257aef27b6e40f24896eae8b13e83ba701e38d51a086e637f8972d87f85f2e8370fae3db5d0b471a7f9892743d75e9c0e5f4a3f7ba5634f889cd6403becc804d57d34b64879d18181c80e0b00e1e020f070b000e010e020011000011010102"),[],[new j.Kj.TransactionArgumentU8Vector((0,d.nr)("0000000000000000600000000090000000007ca6e000000000000000000000000001682ae6375c4e4a97e4b583bc394c861a46d89629e6702a472080ea3caaf6ba9dffaa6effad2290a9ba9adaaad5af5c618e42782d00000000000000000000000000000000000000000000000000000000833589fcd6edb6e08f4c7c32d4f71b54bda02913eb2d1d9bbfca9d892e124e858f1dc449935a3f785f8860892e03fb9814db183900000000000000000000000000000000000000000000000000000000000000000027100000000000000000000000005618207d27d78f09f61a5d92190d58c453feb4b7")),new j.Kj.TransactionArgumentU8Vector((0,d.nr)("1f8799b9e37368636df06804e4c575a431bb279b7dfae2375e5b274873ea8948024872966e1bf8b39607b2312e6337452d53139b68fa7d981dbbab0b94534e211c1e78000f700303aa5534ddaa4397fcaa1eaea194447e9357218b88cc4942507f7b14bb727686ff941a43beae83695dc7007df40e9bef1bff146b39e7a8b436831c"))]),t=new j.Kj.TransactionPayloadScript(n),a=await (null==o?void 0:o.signAndSubmitTransaction({payload:t}));return JSON.stringify(a)}})]}),(0,a.jsx)(g.Z,{dapps:s.F})]})}},91471:function(e,n){"use strict";n.Z={signMessage:[{id:"signMessage",name:"signMessage",value:JSON.stringify({address:!1,application:!0,chainId:!0,message:"This is a sample message",nonce:12345})}],signTransaction:e=>[{id:"signTransaction",name:"signTransaction",value:JSON.stringify({arguments:[e,"100000"],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0x1::aptos_coin::AptosCoin"]})},{id:"signTransferUSDC",name:"signTransferUSDC",value:JSON.stringify({arguments:[e,"1000"],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC"]})},{id:"signTransferDooDoo",name:"signTransferDooDoo",value:JSON.stringify({arguments:[e,"1000"],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0x73eb84966be67e4697fc5ae75173ca6c35089e802650f75422ab49a8729704ec::coin::DooDoo"]})}],signGenericTransaction:e=>[{id:"signGenericTransaction",name:"signGenericTransaction",value:JSON.stringify({args:[e,"100000"],func:"0x1::coin::transfer",type_args:["0x1::aptos_coin::AptosCoin"]})},{id:"transferUSDC",name:"transferUSDC",value:JSON.stringify({arguments:[e,"1000"],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC"]})},{id:"transferDooDoo",name:"transferDooDoo",value:JSON.stringify({arguments:[e,"1000"],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0x73eb84966be67e4697fc5ae75173ca6c35089e802650f75422ab49a8729704ec::coin::DooDoo"]})}]}},6912:function(e,n,t){"use strict";t.d(n,{Z:function(){return ConnectButton}});var a=t(85893),s=t(67294),i=t(9663),r=t(51731),o=t(53617),c=t(23225),l=t(96544),d=t(27361),u=t.n(d),f=t(78299);let g={address:"地址",publicKey:"公钥",chainId:"网络"};function ConnectButton(e){let{fetchWallets:n,onConnect:t,onDisconnect:d}=e,{settings:p}=(0,f.r)(),m=(0,s.useRef)(null),x=(0,s.useRef)(!1),[b,y]=(0,s.useState)([]),{setProvider:j,setAccount:w,provider:h,account:v}=(0,c.O)(),N=(0,s.useCallback)(async e=>{try{let{provider:n,...a}=await t(e);j(n),w(a)}catch(e){console.log("connectWallet error",e),(0,l.Am)({title:"连接失败",description:u()(e,"message","")})}},[t,w,j]),T=(0,s.useCallback)(async()=>{x.current=!1,await (null==d?void 0:d()),j(null),w(null)},[d,w,j]),S=(0,s.useCallback)(()=>{setTimeout(()=>{try{var e;null===(e=m.current)||void 0===e||e.click()}catch(e){}},150)},[]),C=(0,s.useCallback)(async e=>{let t=await (null==n?void 0:n());if((null==t?void 0:t.length)===0){S();return}let{directConnection:a}=null!=e?e:{directConnection:!1};(null==t?void 0:t.length)===1||(null==t?void 0:t.length)>0&&a?(S(),await N(t[0])):y(t)},[S,N,n]);return(0,s.useEffect)(()=>{let e=setTimeout(async()=>{!x.current&&(console.log("settings.autoConnect",p.autoConnect),p.autoConnect&&(x.current=!0,await C({directConnection:!0})))},500);return()=>{clearTimeout(e)}},[p.autoConnect]),(0,a.jsx)(r.Zb,{children:(0,a.jsxs)(r.aY,{className:"flex flex-col flex-wrap gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-row flex-wrap justify-between",children:[(0,a.jsxs)(o.Vq,{children:[(0,a.jsx)(o.hg,{asChild:!0,children:(0,a.jsx)(i.z,{onClick:()=>C(),children:"Connect Wallet"})}),(0,a.jsxs)(o.cZ,{children:[(0,a.jsx)(o.GG,{ref:m}),(0,a.jsxs)(o.fK,{children:[(0,a.jsx)(o.$N,{children:"选择钱包开始连接"}),!!b&&b.map(e=>{var n;return(0,a.jsx)(o.GG,{asChild:!0,children:(0,a.jsxs)(i.z,{onClick:()=>N(e),className:"gap-2",children:[e.logo&&(0,a.jsx)("img",{alt:e.name,src:e.logo,className:"w-5 h-5 rounded-full"}),(0,a.jsx)("span",{className:"font-medium",children:e.name}),null===(n=e.tags)||void 0===n?void 0:n.map(e=>(0,a.jsx)("span",{className:"text-xs font-light",children:e},e))]})},e.id)}),!b||0===b.length&&(0,a.jsxs)(o.Be,{children:["没有钱包可用，请安装 OneKey Extension",(0,a.jsx)("a",{target:"_blank",href:"https://www.onekey.so/download/",children:"Install OneKey Extension →"})]})]})]})]}),h&&(0,a.jsx)(i.z,{variant:"destructive",onClick:T,children:"断开链接"})]}),v&&(0,a.jsx)("div",{className:"flex grid-cols-1 xl:grid-cols-2 flex-wrap gap-x-6 gap-y-3 mt-4",children:Object.keys(v).map(e=>{var n;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{children:["".concat(null!==(n=null==g?void 0:g[e])&&void 0!==n?n:e),": "]}),(0,a.jsx)("span",{className:"font-normal flex flex-wrap text-break",children:"".concat(null==v?void 0:v[e])})]},e)})})]})})}},53617:function(e,n,t){"use strict";t.d(n,{$N:function(){return p},Be:function(){return m},GG:function(){return u},Vq:function(){return c},cZ:function(){return g},fK:function(){return DialogHeader},hg:function(){return l}});var a=t(85893),s=t(67294),i=t(12854),r=t(41352),o=t(13441);let c=i.fC,l=i.xz,d=i.h_,u=i.x8,f=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)(i.aV,{ref:n,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});f.displayName=i.aV.displayName;let g=s.forwardRef((e,n)=>{let{className:t,children:s,...c}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(f,{}),(0,a.jsxs)(i.VY,{ref:n,className:(0,o.cn)("fixed left-[50%] top-[35%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[s,(0,a.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});g.displayName=i.VY.displayName;let DialogHeader=e=>{let{className:n,...t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n),...t})};DialogHeader.displayName="DialogHeader";let p=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)(i.Dx,{ref:n,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});p.displayName=i.Dx.displayName;let m=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)(i.dk,{ref:n,className:(0,o.cn)("text-sm text-muted-foreground",t),...s})});m.displayName=i.dk.displayName},46601:function(){},89214:function(){},85568:function(){},52361:function(){},94616:function(){}}]);
//# sourceMappingURL=4273.6a5aa09ee44abff1.js.map