"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9632],{6793:function(e,n,a){var t=a(85893);a(67294);var s=a(41664),i=a.n(s),l=a(51731);n.Z=e=>{let{dapps:n}=e;return(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.ll,{className:"text-xl",children:"Dapp Bookmarks"}),(0,t.jsx)(l.aY,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.map((e,n)=>(0,t.jsx)("div",{className:"border p-2 rounded-lg shadow-sm hover:shadow-md",children:(0,t.jsx)(i(),{href:e.url,legacyBehavior:!0,children:(0,t.jsxs)("a",{className:"text-blue-500 hover:underline text-lg block",children:[e.name," →"]})})},n))})]})}},50615:function(e,n,a){a.d(n,{Z:function(){return InfoLayout}});var t=a(85893),s=a(51731);function InfoLayout(e){let{title:n,children:a}=e;return(0,t.jsxs)(s.Zb,{children:[n&&(0,t.jsx)(s.Ol,{className:"font-medium",children:n}),(0,t.jsx)(s.aY,{className:"flex flex-col flex-wrap gap-3 break-all",children:a})]})}},49632:function(e,n,a){a.r(n),a.d(n,{default:function(){return Example}});var t=a(85893);let s=[{name:"Osmosis",url:"https://app.osmosis.zone/"},{name:"JunoSwap",url:"https://junoswap.com/"}];var i=a(6912),l=a(67294),o=a(66409),r=a(72574),d=a(26815),c=a(2387),u=a(43720),f=a.n(u),m=a(98994),b=a(53862),g=a(29639),x=a(99710),p=a(23225),y=a(6793),v=a(50615),h=a(49333),j=a(76749),w=a(87066);let CosmosNodeClient=class CosmosNodeClient{async getAccountInfo(e){let n=await this.axios.get("/cosmos/auth/v1beta1/accounts/".concat(e));return 404===n.status?null:n.data.account}async encodeAmino(e){let n=JSON.stringify(JSON.parse(e)),a=await this.axios.post("/cosmos/tx/v1beta1/encode/amino",{amino_json:n});return 404===a.status?null:a.data.amino_binary}constructor(e){this.axios=w.Z.create({baseURL:e.endsWith("/")?e.slice(0,-1):e,timeout:3e4})}};var N=a(96544),S=a(48764).Buffer;function Example(){let e=(0,l.useRef)([{uuid:"injected",name:"Injected Wallet",inject:"bbnwallet"},{uuid:"injected-onekey",name:"Injected OneKey",inject:"$onekey.bbnCosmos"}]),{provider:n,account:a}=(0,p.O)(),[u,w]=(0,l.useState)(null),[k,C]=(0,l.useState)(j.Q[0]);(0,l.useEffect)(()=>{(null==k?void 0:k.rest)!==""&&w(new CosmosNodeClient(k.rest))},[null==k?void 0:k.rest]);let O=(0,l.useCallback)(async n=>{var a;let t=null===(a=e.current)||void 0===a?void 0:a.find(e=>e.uuid===n.id);if(!t)return Promise.reject("Wallet not found");let s=(0,d.Z)(window,t.inject);if(!s){(0,N.Am)({title:"Wallet not found",description:"Please install the wallet extension"});return}console.log("connect network",k.id),await (null==s?void 0:s.connectWallet());let i=await (null==s?void 0:s.getPublicKeyHex()),l=await (null==s?void 0:s.getAddress());return{provider:s,address:l,publicKey:i}},[k.id]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{title:"Base Info",children:(0,t.jsxs)(h.Ph,{defaultValue:k.id,onValueChange:e=>{let n=j.Q.find(n=>n.id===e);n&&C(n)},children:[(0,t.jsx)(h.i4,{className:"w-full",children:(0,t.jsx)(h.ki,{className:"text-base font-medium",placeholder:"选择参数"})}),(0,t.jsx)(h.Bw,{children:j.Q.map(e=>(0,t.jsx)(h.Ql,{value:e.id,className:"text-base font-medium",children:e.name},e.id))})]})}),(0,t.jsx)(i.Z,{fetchWallets:()=>Promise.resolve(e.current.map(e=>({id:e.uuid,name:e.inject?e.name:"".concat(e.name)}))),onConnect:O}),(0,t.jsxs)(x.s,{title:"Basics",children:[(0,t.jsx)(x.u,{title:"connectWallet",description:"connectWallet",onExecute:async e=>{let a=await (null==n?void 0:n.connectWallet());return JSON.stringify(a)}}),(0,t.jsx)(x.u,{title:"getKey",description:"获取账户权限",onExecute:async e=>await (null==n?void 0:n.getPublicKeyHex())}),(0,t.jsx)(x.u,{title:"getAddress",description:"获取账户地址",onExecute:async e=>await (null==n?void 0:n.getAddress())}),(0,t.jsx)(x.u,{title:"getWalletProviderName",description:"获取钱包提供者名称",onExecute:async e=>await (null==n?void 0:n.getWalletProviderName())}),(0,t.jsx)(x.u,{title:"getWalletProviderIcon",description:"获取钱包提供者图标",onExecute:async e=>await (null==n?void 0:n.getWalletProviderIcon())})]}),(0,t.jsxs)(x.s,{title:"Transfer",children:[(0,t.jsx)(x.u,{title:"signAmino",description:"signAmino",presupposeParams:j.Z.signAmino(null==a?void 0:a.address,null==a?void 0:a.address,k.denom),onExecute:async e=>{if(!u)return JSON.stringify({error:"nodeClient is null"});if(!a)return JSON.stringify({error:"account is null"});let t=await u.getAccountInfo(null==a?void 0:a.address),s=JSON.parse(e),i={chain_id:k.id,account_number:null==t?void 0:t.account_number,sequence:null==t?void 0:t.sequence,fee:s.fee,memo:s.memo,msgs:s.msgs},l=await (null==n?void 0:n.getOfflineSigner());return await l.signAmino(a.address,i)},onValidate:async(e,n)=>await u.encodeAmino(n)}),(0,t.jsx)(x.u,{title:"signDirect",description:"signDirect simple",presupposeParams:j.Z.signDirect_simple(null==a?void 0:a.address,null==a?void 0:a.address,k.denom),onExecute:async e=>{var t;let s=await u.getAccountInfo(null==a?void 0:a.address),i=JSON.parse(e),l=b.Any.fromPartial({typeUrl:s.pub_key["@type"],value:S.from(s.pub_key.key,"base64")}),o=null===(t=i.msgs)||void 0===t?void 0:t.map(e=>{var n,a;let t=e.value;return"/cosmos.bank.v1beta1.MsgSend"===e.type?{typeUrl:"/cosmos.bank.v1beta1.MsgSend",value:m.MsgSend.encode(m.MsgSend.fromPartial({fromAddress:t.from_address,toAddress:t.to_address,amount:null===(n=t.amount)||void 0===n?void 0:n.map(e=>({amount:e.amount,denom:e.denom}))})).finish()}:"/cosmwasm.wasm.v1.MsgExecuteContract"===e.type?{typeUrl:"/cosmwasm.wasm.v1.MsgExecuteContract",value:c.$n.encode(c.$n.fromPartial({sender:t.sender,contract:t.contract,msg:S.from(JSON.stringify(function removeNull(e){return null!==e&&"object"==typeof e?Object.entries(e).filter(e=>{let[,n]=e;return null!=n}).reduce((e,n)=>{let[a,t]=n;return{...e,[a]:t!==Object(t)||Array.isArray(t)?t:removeNull(t)}},{}):e}(t.msg))),funds:null===(a=t.funds)||void 0===a?void 0:a.map(e=>({amount:e.amount,denom:e.denom}))})).finish()}:void 0});if(!o)return JSON.stringify({error:"msgs is null"});let x=g.TxBody.encode(g.TxBody.fromPartial({messages:null==o?void 0:o.map(e=>({typeUrl:e.typeUrl,value:e.value})),memo:i.memo})).finish();console.log("bodyBytes",x);let p=g.AuthInfo.encode({signerInfos:[g.SignerInfo.fromPartial({publicKey:l,modeInfo:{single:{mode:r.SignMode.SIGN_MODE_DIRECT}},sequence:BigInt(null==s?void 0:s.sequence)})],fee:g.Fee.fromPartial({amount:i.fee.amount.map(e=>({amount:e.amount,denom:e.denom})),gasLimit:BigInt((0,d.Z)(i,"fee.gas","0"))})}).finish();console.log("authInfoBytes",p);let y=await (null==n?void 0:n.getOfflineSigner()),v=await y.signDirect(a.address,{bodyBytes:x,authInfoBytes:p,chainId:k.id,accountNumber:f().fromString(null==s?void 0:s.account_number)});return v},onValidate:async(e,a)=>{let t=(0,o.nr)(a),s=await (null==n?void 0:n.sendTx(k.id,t,"Sync"));return JSON.stringify(s)}}),(0,t.jsx)(x.u,{title:"signDirect-purity",description:"signDirect 直接调用接口",presupposeParams:j.Z.signDirect(null==a?void 0:a.address,null==a?void 0:a.address,k.denom),onExecute:async e=>{let t=JSON.parse(e),s=t.signDoc,i=await (null==n?void 0:n.getOfflineSigner()),l=await i.signDirect(a.address,{bodyBytes:S.from(s.bodyBytes,"hex"),authInfoBytes:S.from(s.authInfoBytes,"hex"),chainId:s.chainId,accountNumber:f().fromString(s.accountNumber)});return l},onValidate:async(e,a)=>{let t=(0,o.nr)(a),s=await (null==n?void 0:n.sendTx(k.id,t,"Sync"));return JSON.stringify(s)}})]}),(0,t.jsx)(y.Z,{dapps:s})]})}},76749:function(e,n,a){a.d(n,{Q:function(){return t}});let t=[{name:"Babylon Testnet",id:"bbn-test-5",rest:"https://babylon-testnet-api.nodes.guru",denom:"ubbn"}];n.Z={enable:[{id:"enable",name:"enable",value:JSON.stringify("cosmoshub-4")},{id:"enable-multiple",name:"enable multiple",value:JSON.stringify(["cosmoshub-4","juno-1","osmosis-1"])}],signArbitrary:[{id:"signArbitrary",name:"signArbitrary",value:"010203"}],signAmino:(e,n,a)=>[{id:"signAmino-msgSend",name:"SignAmino MsgSend",value:JSON.stringify({fee:{amount:[{amount:"1",denom:a}],gas:"200000"},msgs:[{type:"cosmos-sdk/MsgSend",value:{from_address:e,to_address:n,amount:[{amount:"1000",denom:a}]}}],memo:""})},{id:"signAmino-executeContract",name:"SignAmino ExecuteContract",value:JSON.stringify({fee:{amount:[{amount:"1",denom:a}],gas:"200000"},msgs:[{type:"wasm/MsgExecuteContract",value:{from_address:e,contract:"cw1qyqxw2ep3r3jyly4k2jlyj3lq3jly4k2jlyj3lq",msg:{transfer:{recipient:n,amount:"1000"}},funds:[]}}],memo:""})}],signDirect_simple:(e,n,a)=>[{id:"signDirect-msgSend",name:"signDirect MsgSend",value:JSON.stringify({fee:{amount:[{amount:"1",denom:a}],gas:"200000"},msgs:[{type:"/cosmos.bank.v1beta1.MsgSend",value:{from_address:e,to_address:n,amount:[{amount:"1000",denom:a}]}}],memo:""})},{id:"signDirect-executeContract",name:"signDirect ExecuteContract CwToken",value:JSON.stringify({fee:{amount:[{amount:"1",denom:a}],gas:"200000"},msgs:[{type:"/cosmwasm.wasm.v1.MsgExecuteContract",value:{from_address:e,contract:"cw1qyqxw2ep3r3jyly4k2jlyj3lq3jly4k2jlyj3lq",msg:{transfer:{recipient:n,amount:"1000"}},funds:[]}}],memo:""})}],signDirect:(e,n,a)=>[{id:"signDirect-msgSend",name:"signDirect MsgSend",value:JSON.stringify({chainId:"bbn-test-5",signer:"bbn1uxd7fqht3qgeg80g20q0hfv0cqh4rcqpwgmkvq",signDoc:{bodyBytes:"0ae6060a2d2f626162796c6f6e2e6274637374616b696e672e76312e4d736743726561746542544344656c65676174696f6e12b4060a2a62626e31757864376671687433716765673830673230713068667630637168347263717077676d6b7671124508021241200110c948b9c573cc2499265b5e99e748cc32fd9a5ee17d3cf02365eef4b1fa964915c0193ba04f75a10f0b0d1afea76f6e7f378972be17d3bd7cfb2a7259201d1a20ead5c9942bc49655fc2234c55e9a61468bcd4ce599922a6bedf0eb3e5b9ee5322220d23c2c25e1fcf8fd1c21b9a402c19e2e309e531e45e92fb1e9805b6056b0cc762880f40330d086033a89010200000001a4876046ff402b8950373fed5952c6c14b88db57333d4a8e92be42a1b1e7fdba0100000000ffffffff0250c3000000000000225120700088b1166fa4c1a5e05a7677517eac01004f4343072fbff7b8d2dec576dc59c415880000000000225120773bdb0b0f631d71ae90465cb233b1c8285f327500516fb4072bfa8ddb3dd754000000004a7d0200000001dcb9294f16b86260a5833129d552faa3e75052d68a912bc7f8156bb74f5f281a0000000000ffffffff02c4090000000000001600145be12624d08a2b424095d7c07221c33450d14bf104a600000000000022512018fb8361aeff975f8b4a817c6b3050c7ee68d0d131991eae62a54b422577fc06000000005240fb9796c2433fb93ef2311b858bd792d3794b926d407e9088c737cef2ac32e890a594cc7f34fc2ea434226b72fbf6ecd4b48505039666159d195ab8f21fa525f958f007625e0200000001dcb9294f16b86260a5833129d552faa3e75052d68a912bc7f8156bb74f5f281a0000000000ffffffff0180bb00000000000022512041ce3c9f53d216681fc36d9d7e015076e1b0483bb8a5e557064205ece8dea368000000006880f702727d0200000001b4dfba7b6bf26c1ed08c8a4fd20f76001cac84226b92068834560711573c5dac0000000000ffffffff0260090000000000001600145be12624d08a2b424095d7c07221c33450d14bf1989e00000000000022512018fb8361aeff975f8b4a817c6b3050c7ee68d0d131991eae62a54b422577fc06000000007a4025917df4988fae03729bb92232749e84e3dbf87e6914726468b4efbcc59b6580984077e86a806cb24cefbe42ac89696558e83f81021ad6824c4e57bbec5f26d6",authInfoBytes:"0a500a460a1f2f636f736d6f732e63727970746f2e736563703235366b312e5075624b657912230a21038563d76bd72b9f140992e4f6ac7248e95ab19552fcef8f5492e33ba3172b210912040a020801180312130a0d0a047562626e1205313234343310c1bf6c",chainId:"bbn-test-5",accountNumber:"0"}})}]}},6912:function(e,n,a){a.d(n,{Z:function(){return ConnectButton}});var t=a(85893),s=a(67294),i=a(9663),l=a(51731),o=a(53617),r=a(23225),d=a(96544),c=a(27361),u=a.n(c),f=a(78299);let m={address:"地址",publicKey:"公钥",chainId:"网络"};function ConnectButton(e){let{fetchWallets:n,onConnect:a,onDisconnect:c}=e,{settings:b}=(0,f.r)(),g=(0,s.useRef)(null),x=(0,s.useRef)(!1),[p,y]=(0,s.useState)([]),{setProvider:v,setAccount:h,provider:j,account:w}=(0,r.O)(),N=(0,s.useCallback)(async e=>{try{let{provider:n,...t}=await a(e);v(n),h(t)}catch(e){console.log("connectWallet error",e),(0,d.Am)({title:"连接失败",description:u()(e,"message","")})}},[a,h,v]),S=(0,s.useCallback)(async()=>{x.current=!1,await (null==c?void 0:c()),v(null),h(null)},[c,h,v]),k=(0,s.useCallback)(()=>{setTimeout(()=>{try{var e;null===(e=g.current)||void 0===e||e.click()}catch(e){}},150)},[]),C=(0,s.useCallback)(async e=>{let a=await (null==n?void 0:n());if((null==a?void 0:a.length)===0){k();return}let{directConnection:t}=null!=e?e:{directConnection:!1};(null==a?void 0:a.length)===1||(null==a?void 0:a.length)>0&&t?(k(),await N(a[0])):y(a)},[k,N,n]);return(0,s.useEffect)(()=>{let e=setTimeout(async()=>{!x.current&&(console.log("settings.autoConnect",b.autoConnect),b.autoConnect&&(x.current=!0,await C({directConnection:!0})))},500);return()=>{clearTimeout(e)}},[b.autoConnect]),(0,t.jsx)(l.Zb,{children:(0,t.jsxs)(l.aY,{className:"flex flex-col flex-wrap gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-row flex-wrap justify-between",children:[(0,t.jsxs)(o.Vq,{children:[(0,t.jsx)(o.hg,{asChild:!0,children:(0,t.jsx)(i.z,{onClick:()=>C(),children:"Connect Wallet"})}),(0,t.jsxs)(o.cZ,{children:[(0,t.jsx)(o.GG,{ref:g}),(0,t.jsxs)(o.fK,{children:[(0,t.jsx)(o.$N,{children:"选择钱包开始连接"}),!!p&&p.map(e=>{var n;return(0,t.jsx)(o.GG,{asChild:!0,children:(0,t.jsxs)(i.z,{onClick:()=>N(e),className:"gap-2",children:[e.logo&&(0,t.jsx)("img",{alt:e.name,src:e.logo,className:"w-5 h-5 rounded-full"}),(0,t.jsx)("span",{className:"font-medium",children:e.name}),null===(n=e.tags)||void 0===n?void 0:n.map(e=>(0,t.jsx)("span",{className:"text-xs font-light",children:e},e))]})},e.id)}),!p||0===p.length&&(0,t.jsxs)(o.Be,{children:["没有钱包可用，请安装 OneKey Extension",(0,t.jsx)("a",{target:"_blank",href:"https://www.onekey.so/download/",children:"Install OneKey Extension →"})]})]})]})]}),j&&(0,t.jsx)(i.z,{variant:"destructive",onClick:S,children:"断开链接"})]}),w&&(0,t.jsx)("div",{className:"flex grid-cols-1 xl:grid-cols-2 flex-wrap gap-x-6 gap-y-3 mt-4",children:Object.keys(w).map(e=>{var n;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{children:["".concat(null!==(n=null==m?void 0:m[e])&&void 0!==n?n:e),": "]}),(0,t.jsx)("span",{className:"font-normal flex flex-wrap text-break",children:"".concat(null==w?void 0:w[e])})]},e)})})]})})}},53617:function(e,n,a){a.d(n,{$N:function(){return b},Be:function(){return g},GG:function(){return u},Vq:function(){return r},cZ:function(){return m},fK:function(){return DialogHeader},hg:function(){return d}});var t=a(85893),s=a(67294),i=a(12854),l=a(41352),o=a(13441);let r=i.fC,d=i.xz,c=i.h_,u=i.x8,f=s.forwardRef((e,n)=>{let{className:a,...s}=e;return(0,t.jsx)(i.aV,{ref:n,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});f.displayName=i.aV.displayName;let m=s.forwardRef((e,n)=>{let{className:a,children:s,...r}=e;return(0,t.jsxs)(c,{children:[(0,t.jsx)(f,{}),(0,t.jsxs)(i.VY,{ref:n,className:(0,o.cn)("fixed left-[50%] top-[35%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[s,(0,t.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(l.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=i.VY.displayName;let DialogHeader=e=>{let{className:n,...a}=e;return(0,t.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n),...a})};DialogHeader.displayName="DialogHeader";let b=s.forwardRef((e,n)=>{let{className:a,...s}=e;return(0,t.jsx)(i.Dx,{ref:n,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});b.displayName=i.Dx.displayName;let g=s.forwardRef((e,n)=>{let{className:a,...s}=e;return(0,t.jsx)(i.dk,{ref:n,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});g.displayName=i.dk.displayName}}]);
//# sourceMappingURL=9632.afe5b2507f4fd7e4.js.map