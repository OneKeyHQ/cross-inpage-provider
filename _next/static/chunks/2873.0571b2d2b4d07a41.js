"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2873],{22873:function(e,r,o){o.r(r),o.d(r,{default:function(){return IFrameHostExample}});var n=o(85893),a=o(67294),s=o(95245),l=o(56158),t=o(9663);function IFrameHostExample(){let e=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{var r,o;if(!e.current||!(null===(r=e.current)||void 0===r?void 0:r.contentWindow)){console.error("iframe not ready");return}window.hostBridge=new s.el({remoteFrame:null===(o=e.current)||void 0===o?void 0:o.contentWindow,remoteFrameName:"FRAME",selfFrameName:"HOST",channel:"onekey-js-sdk",receiveHandler(e){let{method:r,params:o}=e.data;if(console.log("receiveHandler >>>>> ",{method:r,params:o}),"hi"===r)return"from HOST: hahahah";if("hello"===r)return{message:"from HOST: okok"};if("error"===r)throw Error("from HOST: something is wrong")}})},[]),(0,n.jsxs)("div",{className:"h-full",children:[(0,n.jsx)("div",{className:"flex gap-2 flex-wrap",children:["hi","hello","error"].map((e,r)=>(0,n.jsxs)(t.z,{onClick:()=>{(0,l.b)({method:e,params:[{index:r}]},window.hostBridge)},children:["sendToFrame (",e,")"]},e))}),(0,n.jsx)("iframe",{ref:e,src:"/iframe/frame",className:"border-2 border-gray-300 m-2 h-40 w-full",frameBorder:0}),(0,n.jsx)("iframe",{src:"/",className:"border-2 border-gray-300 m-2 h-4/6 w-full"})]})}},56158:function(e,r,o){async function sendMethod(e,r){let{method:o,params:n}=e;try{let e=await (null==r?void 0:r.request({scope:"$hardware_sdk",data:{method:o,params:n}}));console.log("result >>>>",o," --> ",e)}catch(e){console.error("bridge send ERROR response: ",o," --> ",e)}}o.d(r,{b:function(){return sendMethod}}),o(67294)}}]);
//# sourceMappingURL=2873.0571b2d2b4d07a41.js.map