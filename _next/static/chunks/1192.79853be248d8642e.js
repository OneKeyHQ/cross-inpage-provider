(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1192],{18552:function(e,t,n){var r=n(10852)(n(55639),"DataView");e.exports=r},53818:function(e,t,n){var r=n(10852)(n(55639),"Promise");e.exports=r},58525:function(e,t,n){var r=n(10852)(n(55639),"Set");e.exports=r},70577:function(e,t,n){var r=n(10852)(n(55639),"WeakMap");e.exports=r},9454:function(e,t,n){var r=n(44239),s=n(37005);e.exports=function(e){return s(e)&&"[object Arguments]"==r(e)}},38749:function(e,t,n){var r=n(44239),s=n(41780),i=n(37005),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&s(e.length)&&!!o[r(e)]}},280:function(e,t,n){var r=n(25726),s=n(86916),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return s(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},7518:function(e){e.exports=function(e){return function(t){return e(t)}}},64160:function(e,t,n){var r=n(18552),s=n(57071),i=n(53818),o=n(58525),a=n(70577),u=n(44239),l=n(80346),c="[object Map]",d="[object Promise]",p="[object Set]",g="[object WeakMap]",f="[object DataView]",b=l(r),x=l(s),y=l(i),v=l(o),j=l(a),w=u;(r&&w(new r(new ArrayBuffer(1)))!=f||s&&w(new s)!=c||i&&w(i.resolve())!=d||o&&w(new o)!=p||a&&w(new a)!=g)&&(w=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case b:return f;case x:return c;case y:return d;case v:return p;case j:return g}return t}),e.exports=w},25726:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},86916:function(e,t,n){var r=n(5569)(Object.keys,Object);e.exports=r},31167:function(e,t,n){e=n.nmd(e);var r=n(31957),s=t&&!t.nodeType&&t,i=s&&e&&!e.nodeType&&e,o=i&&i.exports===s&&r.process,a=function(){try{var e=i&&i.require&&i.require("util").types;if(e)return e;return o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a},5569:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},35694:function(e,t,n){var r=n(9454),s=n(37005),i=Object.prototype,o=i.hasOwnProperty,a=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return s(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},98612:function(e,t,n){var r=n(23560),s=n(41780);e.exports=function(e){return null!=e&&s(e.length)&&!r(e)}},44144:function(e,t,n){e=n.nmd(e);var r=n(55639),s=n(95062),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,u=a?a.isBuffer:void 0;e.exports=u||s},41609:function(e,t,n){var r=n(280),s=n(64160),i=n(35694),o=n(1469),a=n(98612),u=n(44144),l=n(25726),c=n(36719),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||c(e)||i(e)))return!e.length;var t=s(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},41780:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},36719:function(e,t,n){var r=n(38749),s=n(7518),i=n(31167),o=i&&i.isTypedArray,a=o?s(o):r;e.exports=a},95062:function(e){e.exports=function(){return!1}},94187:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});let r=[{name:"Satflow",url:"https://satflow.com/connect"},{name:"UniSat",url:"https://unisat.io/"},{name:"Magiceden",url:"https://magiceden.io/ordinals"}]},51192:function(e,t,n){"use strict";n.a(e,async function(e,r){try{n.r(t),n.d(t,{default:function(){return BTCExample}});var s=n(85893),i=n(94187),o=n(6912),a=n(67294),u=n(27361),l=n.n(u),c=n(41609),d=n.n(c),p=n(99710),g=n(23225),f=n(6793),b=n(85318),x=n(15640),y=n(96544),v=n(17656),j=n(40293),w=n(44174),m=n(57208),h=e([w]);function BTCExample(){var e,t;let n=(0,a.useRef)([{uuid:"injected",name:"Injected Wallet",inject:"btcwallet"},{uuid:"injected-onekey",name:"Injected OneKey",inject:"$onekey.btcwallet"}]),{provider:r,setAccount:u,account:c}=(0,g.O)(),onConnectWallet=async e=>{var t;let r=null===(t=n.current)||void 0===t?void 0:t.find(t=>t.uuid===e.id);if(!r)return Promise.reject("Wallet not found");let s=l()(window,r.inject);if(!s){(0,y.Am)({title:"Wallet not found",description:"Please install the wallet extension"});return}let[i]=await (null==s?void 0:s.requestAccounts());return{provider:s,address:i}};return(0,a.useEffect)(()=>{let accountsChangedHandler=e=>{console.log("btc babylon [accountsChanged]",e),e.length&&u({...c,address:e[0]})},networkChangedHandler=e=>{console.log("btc babylon [networkChanged]",e),e&&u({...c,chainId:e})};return null==r||r.on("accountsChanged",accountsChangedHandler),null==r||r.on("networkChanged",networkChangedHandler),()=>{null==r||r.removeListener("accountsChanged",accountsChangedHandler),null==r||r.removeListener("networkChanged",networkChangedHandler)}},[c,r,u]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{fetchWallets:()=>Promise.resolve(n.current.map(e=>({id:e.uuid,name:e.name}))),onConnect:onConnectWallet}),(0,s.jsxs)(p.s,{title:"Basics",children:[(0,s.jsx)(p.u,{title:"connectWallet",description:"请求连接 Wallet 获取账户",disableRequestContent:!0,allowCallWithoutProvider:!0,onExecute:async e=>{let t=await (null==r?void 0:r.connectWallet());return console.log("connectWallet result:",t),JSON.stringify(t,(e,t)=>{if(-1===["bridge","config","debugLogger","_log"].indexOf(e))return t})}}),(0,s.jsx)(p.u,{title:"requestAccounts",description:"请求连接 Wallet 获取账户",disableRequestContent:!0,onExecute:async e=>{let t=await (null==r?void 0:r.requestAccounts());return JSON.stringify(t)}}),(0,s.jsx)(p.u,{title:"getAccounts",description:"获取当前账户地址",disableRequestContent:!0,onExecute:async()=>{let e=await (null==r?void 0:r.getAccounts());return JSON.stringify(e)}}),(0,s.jsx)(p.u,{title:"getAddress",description:"获取当前账户地址",disableRequestContent:!0,onExecute:async()=>{let e=await (null==r?void 0:r.getAddress());return e}}),(0,s.jsx)(p.u,{title:"getPublicKey",description:"获取当前账户公钥",disableRequestContent:!0,onExecute:async()=>{let e=await (null==r?void 0:r.getPublicKey());return e}}),(0,s.jsx)(p.u,{title:"getPublicKeyHex",description:"获取当前账户公钥",disableRequestContent:!0,onExecute:async()=>{let e=await (null==r?void 0:r.getPublicKeyHex());return e}}),(0,s.jsx)(p.u,{title:"getBalance",description:"获取当前账户余额",disableRequestContent:!0,onExecute:async()=>{let e=await (null==r?void 0:r.getBalance());return e.toString()}}),(0,s.jsx)(p.u,{title:"getUtxos",description:"获取当前账户 UTXO 列表",presupposeParams:b.Z.getUtxos(null!==(e=null==c?void 0:c.address)&&void 0!==e?e:""),onExecute:async e=>{let{address:t,amount:n}=JSON.parse(e),s=await (null==r?void 0:r.getUtxos(t,n));return JSON.stringify(s)}}),(0,s.jsx)(p.u,{title:"getWalletProviderName",description:"获取当前钱包提供商名称",disableRequestContent:!0,onExecute:async()=>{let e=await (null==r?void 0:r.getWalletProviderName());return e.toString()}}),(0,s.jsx)(p.u,{title:"getNetworkFees",description:"获取当前网络费用",disableRequestContent:!0,onExecute:async()=>{let e=await (null==r?void 0:r.getNetworkFees());return JSON.stringify(e)}}),(0,s.jsx)(p.u,{title:"getBTCTipHeight",description:"获取 BTC 区块高度",disableRequestContent:!0,onExecute:async()=>{let e=await (null==r?void 0:r.getBTCTipHeight());return null==e?void 0:e.toString()}}),(0,s.jsx)(p.u,{title:"getNetwork",description:"获取当前网络",disableRequestContent:!0,onExecute:async()=>{let e=await (null==r?void 0:r.getNetwork());return e}}),(0,s.jsx)(p.u,{title:"switchNetwork",description:"切换当前网络",presupposeParams:b.Z.switchNetwork,onExecute:async e=>{let t=await (null==r?void 0:r.switchNetwork(e));return JSON.stringify(t)}})]}),(0,s.jsxs)(p.s,{title:"Sign Message",children:[(0,s.jsx)(p.u,{title:"SignMessage",description:"签名消息",presupposeParams:b.Z.signMessage,onExecute:async e=>{let t=JSON.parse(e),n=await (null==r?void 0:r.signMessage(t.msg,t.type));return n},onValidate:async(e,t)=>{let n=JSON.parse(e),s=await (null==r?void 0:r.getPublicKey());return n.type&&"ecdsa"!==n.type?"bip322-simple"===n.type?m.Verifier.verifySignature(c.address,n.msg,t):"Dapp Example: 不支持的类型签字的验证":(0,x.n)(s,n.msg,t)}}),(0,s.jsx)(p.u,{title:"SignMessageBIP322",description:"签名消息 BIP322",presupposeParams:b.Z.signMessageBip322,onExecute:async e=>{let t=await (null==r?void 0:r.signMessageBIP322(e));return t},onValidate:async(e,t)=>Promise.resolve(m.Verifier.verifySignature(c.address,e,t))})]}),(0,s.jsxs)(p.s,{title:"Transaction",children:[(0,s.jsx)(p.u,{title:"SendBitcoin",description:"发送交易",presupposeParams:b.Z.sendBitcoin(null!==(t=null==c?void 0:c.address)&&void 0!==t?t:""),onExecute:async e=>{let t=JSON.parse(e),n=await (null==r?void 0:r.sendBitcoin(t.toAddress,t.satoshis));return JSON.stringify(n)}}),(0,s.jsx)(p.u,{title:"pushTx",description:"广播交易",onExecute:async e=>{if(!e||d()(e))throw(0,y.Am)({title:"Error",description:"请填写需要广播的交易信息"}),Error("request is empty");let t=await (null==r?void 0:r.pushTx({rawtx:e}));return JSON.stringify(t)}}),(0,s.jsx)(p.u,{title:"signPsbt",description:"signPsbt",presupposeParams:b.Z.signPsbt,onExecute:async e=>{let{psbtHex:t,options:n}=JSON.parse(e),s=await (null==r?void 0:r.signPsbt(t,n)),i=v.Psbt.fromHex(s);return(null==n?void 0:n.autoFinalized)||i.finalizeAllInputs(),i.toHex()},generateRequestFrom:()=>{var e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.I,{label:"收款地址",type:"text",name:"toAddress",defaultValue:null!==(e=null==c?void 0:c.address)&&void 0!==e?e:""}),(0,s.jsx)(j.I,{label:"转账金额",type:"number",name:"amount",defaultValue:"1000"}),(0,s.jsx)(j.I,{label:"手续费 sat/vB",type:"number",name:"gasPrice",defaultValue:"20"})]})},onGenerateRequest:async e=>{var t,n;let s=e.toAddress,i=parseInt(e.amount),o=parseInt(null!==(t=e.gasPrice)&&void 0!==t?t:"20");if(!s||!i)throw Error("toAddress or amount is required");let a=await r.getNetwork(),u=(0,w.X)(null!==(n=null==c?void 0:c.address)&&void 0!==n?n:"",s,i,o,"livenet"===a?v.networks.bitcoin:v.networks.testnet);return Promise.resolve(u)},onValidate:async(e,t)=>{let n=await (null==r?void 0:r.pushPsbt(t));return JSON.stringify(n)}}),(0,s.jsx)(p.u,{title:"signPsbts",description:"signPsbts",presupposeParams:b.Z.signPsbts,onExecute:async e=>{let{psbtHexs:t,options:n}=JSON.parse(e),s=await (null==r?void 0:r.signPsbts(t,n)),i=[];return s.forEach((e,t)=>{var r;let s=v.Psbt.fromHex(e);(null==n?void 0:null===(r=n[t])||void 0===r?void 0:r.autoFinalized)||s.finalizeAllInputs(),i.push(s.toHex())}),JSON.stringify(i)},generateRequestFrom:()=>{var e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.I,{label:"收款地址",type:"text",name:"toAddress",defaultValue:null!==(e=null==c?void 0:c.address)&&void 0!==e?e:""}),(0,s.jsx)(j.I,{label:"转账金额",type:"number",name:"amount",defaultValue:"1000"}),(0,s.jsx)(j.I,{label:"手续费 sat/vB",type:"number",name:"gasPrice",defaultValue:"20"})]})},onGenerateRequest:async e=>{var t,n;let s=e.toAddress,i=parseInt(e.amount),o=parseInt(null!==(t=e.gasPrice)&&void 0!==t?t:"20");if(!s||!i)throw Error("toAddress or amount is required");let a=await r.getNetwork(),u=await (0,w.X)(null!==(n=null==c?void 0:c.address)&&void 0!==n?n:"",s,i,o,"livenet"===a?v.networks.bitcoin:v.networks.testnet),l=JSON.parse(u);return Promise.resolve(JSON.stringify({psbtHexs:[l.psbtHex],options:[l.options]}))},onValidate:async(e,t)=>{let[n]=JSON.parse(t);return await (null==r?void 0:r.pushPsbt(n))}}),(0,s.jsx)(p.u,{title:"pushPsbt",description:"pushPsbt",onExecute:async e=>{if(!e||d()(e))throw(0,y.Am)({title:"Error",description:"请填写需要广播的交易信息"}),Error("request is empty");let t=await (null==r?void 0:r.pushPsbt(e));return t}})]}),(0,s.jsx)(f.Z,{dapps:i.F})]})}w=(h.then?(await h)():h)[0],r()}catch(e){r(e)}})},85318:function(e,t,n){"use strict";var r=n(92602);t.Z={...r.Z,getUtxos:e=>[{id:"getUtxos",name:"getUtxos",value:JSON.stringify({address:e,amount:1e3})}],signMessageBip322:[{id:"signMessageBip322",name:"signMessageBip322",value:"Hello World"}]}}}]);
//# sourceMappingURL=1192.79853be248d8642e.js.map