(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7769],{6793:function(e,n,t){"use strict";var s=t(85893);t(67294);var a=t(41664),r=t.n(a),i=t(51731);n.Z=e=>{let{dapps:n}=e;return(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.ll,{className:"text-xl",children:"Dapp Bookmarks"}),(0,s.jsx)(i.aY,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.map((e,n)=>(0,s.jsx)("div",{className:"border p-2 rounded-lg shadow-sm hover:shadow-md",children:(0,s.jsx)(r(),{href:e.url,legacyBehavior:!0,children:(0,s.jsxs)("a",{className:"text-blue-500 hover:underline text-lg block",children:[e.name," →"]})})},n))})]})}},50615:function(e,n,t){"use strict";t.d(n,{Z:function(){return InfoLayout}});var s=t(85893),a=t(51731);function InfoLayout(e){let{title:n,children:t}=e;return(0,s.jsxs)(a.Zb,{children:[n&&(0,s.jsx)(a.Ol,{className:"font-medium",children:n}),(0,s.jsx)(a.aY,{className:"flex flex-col flex-wrap gap-3 break-all",children:t})]})}},51587:function(e,n,t){"use strict";t.d(n,{Fb:function(){return hasVersionedTx},QM:function(){return createVersionedTransaction},QS:function(){return createTransferTransaction},UP:function(){return createVersionedLegacyTransaction},aN:function(){return createTokenTransferTransaction}});var s=t(59917),a=t(45423),r=t(72655);let createTransferTransaction=(e,n,t,a)=>{let r=new s.nh(n),i=new s.YW().add(s.yc.transfer({fromPubkey:e,toPubkey:r,lamports:a}));return i.feePayer=e,i.recentBlockhash=t,i},hasVersionedTx=e=>"version"in e,createVersionedLegacyTransaction=(e,n,t,a)=>{let r=new s.nh(n),i=[s.yc.createAccount({fromPubkey:e,newAccountPubkey:r,lamports:a,space:0,programId:s.yc.programId}),s.yc.transfer({fromPubkey:e,toPubkey:r,lamports:a})],o=new s.$Z({payerKey:e,recentBlockhash:t,instructions:i}).compileToLegacyMessage(),l=new s.GS(o);return l},createVersionedTransaction=(e,n,t,a)=>{let r=new s.nh(n),i=[s.yc.transfer({fromPubkey:e,toPubkey:r,lamports:a})],o=new s.$Z({payerKey:e,recentBlockhash:t,instructions:i}).compileToV0Message(),l=new s.GS(o);return l},createTokenTransferTransaction=async(e,n,t,i,o,l,c)=>{let u=new s.YW,d=await (0,a.Am)(i,n),g=await (0,a.Am)(i,t);return u.add((0,r.$B)(d,g,n,BigInt(l*Math.pow(10,c)))),u.feePayer=n,u.recentBlockhash=o,u}},72269:function(e,n){"use strict";let t=[{symbol:"USDT",tokenMint:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",decimals:6},{symbol:"USDC",tokenMint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",decimals:6}];n.Z={signMessage:[{id:"signMessage",name:"signMessage",value:"Hello OneKey"}],signAndSendTransaction:e=>[{id:"signAndSendTransaction",name:"Normal Transaction",value:JSON.stringify({toPubkey:e,amount:100})}],signAndSendTokenTransaction:e=>t.map(n=>({id:"signAndSendTokenTransaction_".concat(n.symbol),name:"Send ".concat(n.symbol," Token"),value:JSON.stringify({tokenMint:n.tokenMint,toPubkey:e,amount:1e-6,decimals:n.decimals})})),signMultipleTransaction:e=>[{id:"signMultipleTransaction",name:"Sign Multiple Transaction",value:JSON.stringify([{toPubkey:e,amount:100},{toPubkey:e,amount:100}])}],signRawTransaction:[{id:"sign raw tx Transaction",name:"stake io",value:JSON.stringify({message:"78NZKdHqXG3dk1M3BzEuRStNSqZs7R7HpJqDC4XseXJdjvXCyY637Gpod7K2qSccnHkBiNoNLbjtDp5CAXzZNhY35qhfdW6imBpT8UwJJArJukctXz9uGFezAMpmHC8qyeUKeeW9DL9UpVLPrjRcq8UXxv4NaoGLsTenuziN76voXyd5Lo44EsLysFNBGELtHKzGXGznAhmabQnqnBJn64HadjRfZvjprcNiy6nbcrvjQQEZnDEXZ4WunuR7zfCZZPk1TUW2KFDymfyLYcY44cJvYi9L5VZdxvG1ifHRrxXefagfwAjL5a1wTRConmZTcVx5ayZ2SYDGxVdkrGDqLaFonGHxrzJmk1gs1mrLjqiQvQn79EQdxyvZyUDgUEMzV18yjm6nya57VXQfvei93zPDesRQTYs3yQzD1aYSjy2up3cgFNhRPt9vYZFHNBFnd9v1kPzffGbyMeNbeK8M3TPBbCxP6NEgzxmDsihB2s9bajKb3tpgaVUKQQrJiK8c5AvXWcewVFfSWBk6R7whTunRfUVXotR4d9VRfCoYgVUFZoUpSHGh111kKd4aygt4q9vh2MzoNkyoPJU32WtA899rXZ1baNKrkoeLmS7FxaSBa6jJLr1F3BHMLCnzWvPG2EE3y1afpjwkKz7Hf59rfSQFMghkHYc9DJPkbLiE4DcZiBf4q1gAva32ZZaSBruzFwLMjkm5roBx7CsmQ5tFnBtcYrF5eTke9TNNRxSLeZwU6ht1yMBsScKogN9Kmgq5uXFyAQ8BXnero7UaV7CYxeYjzeCSvsv3R"})}]}},76894:function(e,n,t){"use strict";t.d(n,{D:function(){return OffchainMessage}});var s=t(48764).Buffer;let OffchainMessage=class OffchainMessage{static guessMessageFormat(e){if("[object Uint8Array]"===Object.prototype.toString.call(e)){if(e.length<=1212){if(OffchainMessage.isPrintableASCII(e))return 0;if(OffchainMessage.isUTF8(e))return 1}else if(e.length<=65515&&OffchainMessage.isUTF8(e))return 2}}static isPrintableASCII(e){return e&&e.every(e=>e>=32&&e<=126)}static isUTF8(e){return e&&function(e){let n=e.length,t=0;for(;t<n;)if(e[t]<128)++t;else if((224&e[t])==192){if(t+1>=n||(192&e[t+1])!=128||(254&e[t])==192)return!1;t+=2}else if((240&e[t])==224){if(t+2>=n||(192&e[t+1])!=128||(192&e[t+2])!=128||224==e[t]&&(224&e[t+1])==128||237==e[t]&&(224&e[t+1])==160||239==e[t]&&191==e[t+1]&&(254&e[t+2])==190)return!1;t+=3}else{if((248&e[t])!=240||t+3>=n||(192&e[t+1])!=128||(192&e[t+2])!=128||(192&e[t+3])!=128||240==e[t]&&(240&e[t+1])==128||244==e[t]&&e[t+1]>143||e[t]>244)return!1;t+=4}return!0}(e)}isValid(){if(0!==this.version||!this.message)return!1;let e=OffchainMessage.guessMessageFormat(this.message);return null!=e&&e===this.messageFormat}isLedgerSupported(e){return this.isValid()&&(0===this.messageFormat||1===this.messageFormat&&e)}serialize(){if(!this.isValid())throw Error("Invalid OffchainMessage: ".concat(JSON.stringify(this)));let e=s.alloc(4),n=e.writeUInt8(this.version);return n=e.writeUInt8(this.messageFormat,n),n=e.writeUInt16LE(this.message.length,n),s.concat([s.from([255]),s.from("solana offchain"),e,this.message])}constructor(e){if(this.version=0,this.messageFormat=void 0,this.message=void 0,!e)return;e.version&&(this.version=e.version),e.messageFormat&&(this.messageFormat=e.messageFormat),e.message&&(this.message=s.from(e.message),0!==this.version||this.messageFormat||(this.messageFormat=OffchainMessage.guessMessageFormat(this.message)))}}},3810:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return App}});var s=t(85893);let a=[{name:"Magic Eden",url:"https://magiceden.io/"},{name:"Mean Finance",url:"https://app.meanfi.com/"},{name:"Saber",url:"https://app.saber.so/"},{name:"ORCA",url:"https://www.orca.so/"},{name:"Rarible",url:"https://rarible.com/connect"},{name:"Raydium",url:"https://raydium.io/swap/"}];var r=t(67294),i=t(99710),o=t(23225),l=t(6793),c=t(72269),u=t(32671),d=t(14489),g=t(16247),f=t(16009),m=t(42644),h=t(44718),p=t(54306),v=t(50615),y=t(51587),x=t(16984),S=t(50780),w=t.n(S),k=t(59917),T=t(76894),b=t(70252),j=t(48764).Buffer;function Example(){var e,n,t,u,d,g,m,S,b,N,M;let{setProvider:B}=(0,o.O)(),{connection:P}=(0,h.R)(),{connected:F,publicKey:A,wallet:E,disconnect:O,signMessage:V,signTransaction:Z,signAllTransactions:J,sendTransaction:L,signIn:C}=(0,p.O)();return(0,r.useEffect)(()=>{F?B(!0):B(!1)},[F,B]),(0,r.useEffect)(()=>{var e,n,t,s,a,r,i,o,l,c,u,d;null==E||null===(s=E.adapter)||void 0===s||null===(t=s.wallet)||void 0===t||null===(n=t.features)||void 0===n||null===(e=n["standard:events"])||void 0===e||e.on("connect",e=>{console.log("sol connect event",e)}),null==E||null===(o=E.adapter)||void 0===o||null===(i=o.wallet)||void 0===i||null===(r=i.features)||void 0===r||null===(a=r["standard:events"])||void 0===a||a.on("disconnect",e=>{console.log("sol disconnect event",e)}),null==E||null===(d=E.adapter)||void 0===d||null===(u=d.wallet)||void 0===u||null===(c=u.features)||void 0===c||null===(l=c["standard:events"])||void 0===l||l.on("accountChanged",e=>{console.log("sol accountChanged event",e)})},[null==E?void 0:null===(e=E.adapter)||void 0===e?void 0:e.wallet]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.a,{}),(0,s.jsxs)(v.Z,{title:"Base Info",children:[A&&(0,s.jsxs)("p",{children:["PublicKey: ",A.toBase58()]}),(null==E?void 0:E.adapter)&&(0,s.jsxs)("p",{children:["Wallet Name: ",null==E?void 0:null===(n=E.adapter)||void 0===n?void 0:n.name]}),(null==E?void 0:E.adapter)&&(0,s.jsxs)("p",{children:["Wallet Api Version: ",null==E?void 0:null===(d=E.adapter)||void 0===d?void 0:null===(u=d.wallet)||void 0===u?void 0:null===(t=u.version)||void 0===t?void 0:t.toString()]}),(null==E?void 0:E.adapter)&&(0,s.jsxs)("p",{children:["Accounts: ",JSON.stringify(null!==(N=null==E?void 0:null===(m=E.adapter)||void 0===m?void 0:null===(g=m.wallet)||void 0===g?void 0:g.accounts)&&void 0!==N?N:[])]}),(null==E?void 0:E.adapter)&&(0,s.jsxs)("p",{children:["Support chains: ",JSON.stringify(null!==(M=null==E?void 0:null===(b=E.adapter)||void 0===b?void 0:null===(S=b.wallet)||void 0===S?void 0:S.chains)&&void 0!==M?M:[])]}),(null==E?void 0:E.adapter)&&(0,s.jsxs)("p",{children:["Wallet Icon: ",(0,s.jsx)("img",{src:null==E?void 0:E.adapter.icon})]})]}),(0,s.jsx)(i.s,{title:"Basic Info",children:(0,s.jsx)(i.u,{title:"disconnect",description:"断开链接",disableRequestContent:!0,onExecute:async()=>{let e=await O();return JSON.stringify(e)}})}),(0,s.jsxs)(i.s,{title:"Sign Message",children:[(0,s.jsx)(i.u,{title:"signMessage",description:"签名消息",presupposeParams:c.Z.signMessage,onExecute:async e=>await V(j.from(e,"utf8")),onValidate:(e,n)=>{let t=new Uint8Array(JSON.parse(n)),s=w().sign.detached.verify(j.from(e,"utf8"),t,A.toBytes());if(s)return Promise.resolve("Phantom: true (软件钱包标准)");{let n=new T.D({message:j.from(e,"utf8")}),s=w().sign.detached.verify(n.serialize(),t,A.toBytes());if(s)return Promise.resolve("OffchainMessage: true (Ledger 硬件钱包标准)")}return Promise.resolve("false")}}),(0,s.jsx)(i.u,{title:"signIn",description:"(暂不支持) Sign In With Solana EIP-4361",onGenerateRequest:()=>{let e=new Date,n=e.toISOString(),t=window.location.href,s=new URL(t),a=s.host;return Promise.resolve(JSON.stringify({domain:a,statement:"Approve this wallet is owned by you.",version:"1",nonce:"oBbLoEldZs",chainId:"solana:mainnet",issuedAt:n,resources:["https://onekey.so"]}))},onExecute:async e=>{let n=JSON.parse(e),t=await C(n);return JSON.stringify(t)},onValidate:async(e,n)=>{let t=JSON.parse(e),s=JSON.parse(n),a={account:{publicKey:A.toBuffer()},signature:new Uint8Array(j.from(s.signature.data)),signedMessage:new Uint8Array(j.from(s.signedMessage.data))},r=(0,x.HS)(t,a);return Promise.resolve(r.toString())}})]}),(0,s.jsxs)(i.s,{title:"Transfer",children:[(0,s.jsx)(i.u,{title:"signAndSendTransaction",description:"签署并发送交易",presupposeParams:c.Z.signAndSendTransaction((null==A?void 0:A.toBase58())||""),onExecute:async e=>{let{toPubkey:n,amount:t}=JSON.parse(e),s=(await P.getLatestBlockhash()).blockhash,a=(0,y.QS)(A,n,s,t),r=await L(a,P);return JSON.stringify(r)}}),(0,s.jsx)(i.u,{title:"signTransaction",description:"签署交易",presupposeParams:c.Z.signAndSendTransaction((null==A?void 0:A.toBase58())||""),onExecute:async e=>{let{toPubkey:n,amount:t}=JSON.parse(e),s=(await P.getLatestBlockhash()).blockhash,a=(0,y.QS)(A,n,s,t),r=await Z(a);return(0,y.Fb)(r)?"error: Tx is VersionedTransaction":j.from(r.serialize()).toString("hex")},onValidate:async(e,n)=>{let t=k.YW.from(j.from(n,"hex")),s=t.verifySignatures(),a=await P.simulateTransaction(t);return{success:null===a.value.err,verified:s,tryRun:a,tx:t}}}),(0,s.jsx)(i.u,{title:"signTransaction (Versioned)",description:"签署 Versioned 交易",presupposeParams:c.Z.signAndSendTransaction(null==A?void 0:A.toBase58()),onExecute:async e=>{let{toPubkey:n,amount:t}=JSON.parse(e),s=(await P.getLatestBlockhash()).blockhash,a=(0,y.QM)(A,n,s,t),r=await Z(a);return(0,y.Fb)(r)?j.from(r.serialize()).toString("hex"):"error: Tx is legacy Transaction"},onValidate:async(e,n)=>{let t=k.GS.deserialize(j.from(n,"hex")),s=await P.simulateTransaction(t);return{success:null===s.value.err,tryRun:s,tx:t}}}),(0,s.jsx)(i.u,{title:"signTransaction (Versioned legacy)",description:"签署 Versioned legacy 交易, legacy 旧版本交易，但是返回值是 Versioned 的 Tx",presupposeParams:c.Z.signAndSendTransaction(null==A?void 0:A.toBase58()),onExecute:async e=>{let{toPubkey:n,amount:t}=JSON.parse(e),s=(await P.getLatestBlockhash()).blockhash,a=(0,y.UP)(A,n,s,t);console.log("transfer",a);let r=await Z(a);return(console.log("res",r),(0,y.Fb)(r))?j.from(r.serialize()).toString("hex"):"error:Tx is legacy Transaction"},onValidate:async(e,n)=>{let t=k.GS.deserialize(j.from(n,"hex")),s=await P.simulateTransaction(t);return{success:null===s.value.err,tryRun:s,tx:t}}}),(0,s.jsx)(i.u,{title:"signAllTransactions",description:"签署多个交易",presupposeParams:c.Z.signMultipleTransaction((null==A?void 0:A.toBase58())||""),onExecute:async e=>{let n=JSON.parse(e),t=(await P.getLatestBlockhash()).blockhash,s=n.map(e=>(0,y.QS)(A,e.toPubkey,t,e.amount)),a=await J(s);return a.map(e=>j.from(e.serialize()).toString("hex"))},onValidate:async(e,n)=>{let t=JSON.parse(n),s=t.map(e=>k.YW.from(j.from(e,"hex"))),a=[];for(let e of s){let n=e.verifySignatures(),t=await P.simulateTransaction(e);a.push({success:null===t.value.err,verified:n,tryRun:t})}return a}})]}),(0,s.jsx)(l.Z,{dapps:a})]})}function App(){let e=g.Q.Mainnet,n=(0,r.useMemo)(()=>"https://go.getblock.io/".concat((0,b.P)("DEwWFkUCHktXRF8YWw1QCQQcEgQWTE1QDlgKRRVDRw8=")),[]),t=(0,r.useMemo)(()=>[],[e]);return(0,s.jsx)(u.U,{endpoint:n,children:(0,s.jsx)(d.n,{wallets:t,autoConnect:!0,localStorageKey:"onekey_sol_dapp_example",children:(0,s.jsx)(m.s,{children:(0,s.jsx)(Example,{})})})})}t(98588)},70252:function(e,n,t){"use strict";t.d(n,{P:function(){return function getApiKey(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(n){let n=s.from(e,"base64").toString();return getApiKey(n,!1)}let t="";for(let n=0;n<e.length;n++){let s=e.charCodeAt(n),r=a.charCodeAt(n%a.length);t+=String.fromCharCode(s^r)}return t}}});var s=t(48764).Buffer;let a="https://api.onekeytest.com"},46601:function(){}}]);
//# sourceMappingURL=7769.da2686b1ba5bda37.js.map