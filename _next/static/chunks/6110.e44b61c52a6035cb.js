"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6110],{6793:function(e,n,t){var a=t(85893);t(67294);var s=t(41664),i=t.n(s),r=t(51731);n.Z=e=>{let{dapps:n}=e;return(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.ll,{className:"text-xl",children:"Dapp Bookmarks"}),(0,a.jsx)(r.aY,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.map((e,n)=>(0,a.jsx)("div",{className:"border p-2 rounded-lg shadow-sm hover:shadow-md",children:(0,a.jsx)(i(),{href:e.url,legacyBehavior:!0,children:(0,a.jsxs)("a",{className:"text-blue-500 hover:underline text-lg block",children:[e.name," →"]})})},n))})]})}},16110:function(e,n,t){t.r(n),t.d(n,{default:function(){return BTCExample}});var a=t(85893);let s=[{name:"OpenSea",url:"https://opensea.io/"}];var i=t(6912),r=t(67294),o=t(27361),l=t.n(o),c=t(99710),u=t(23225),d=t(6793),f={lnurl:[{id:"lnurl",name:"lnurl",value:"LNURL1DP68GURN8GHJ7UM9WFMXJCM99E3K7MF0V9CXJ0M385EKVCENXC6R2C35XVUKXEFCV5MKVV34X5EKZD3EV56NYD3HXQURZEPEXEJXXEPNXSCRVWFNV9NXZCN9XQ6XYEFHVGCXXCMYXYMNSERXFQ5FNS"}],signMessage:[{id:"signMessage",name:"signMessage",value:"Sample message"}],makeInvoice:[{id:"makeInvoice",name:"Make normal invoice",value:JSON.stringify({amount:1e3,defaultMemo:"Test invoice"})},{id:"makeInvoice-default",name:"Make normal default invoice",value:JSON.stringify({amount:1e3,defaultAmount:1001,defaultMemo:"Test invoice"})},{id:"makeInvoice-max",name:"Make Max invoice",value:JSON.stringify({defaultAmount:1001,maximumAmount:1e3,defaultMemo:"Test max invoice"})},{id:"makeInvoice-min",name:"Make Min invoice",value:JSON.stringify({defaultAmount:10,minimumAmount:100,defaultMemo:"Test min invoice"})}],keysend:[{id:"keysend",name:"keysend",value:JSON.stringify({destination:"03006fcf3312dae8d068ea297f58e2bd00ec1ffe214b793eda46966b6294a53ce6",amount:"1",customRecords:{34349334:"HELLO AMBOSS"}})}]},g=t(96544);function BTCExample(){let e=(0,r.useRef)([{uuid:"injected",name:"Injected Wallet",inject:"webln"},{uuid:"injected-onekey",name:"Injected OneKey",inject:"$onekey.webln"}]),{provider:n,setAccount:t,account:o}=(0,u.O)(),onConnectWallet=async n=>{var t;let a=null===(t=e.current)||void 0===t?void 0:t.find(e=>e.uuid===n.id);if(!a)return Promise.reject("Wallet not found");let s=l()(window,a.inject);await (null==s?void 0:s.enable());let{node:{pubkey:i,alias:r}}=await (null==s?void 0:s.getInfo());return{provider:s,pubkey:null!=i?i:r}};return(0,r.useEffect)(()=>{let accountsChangedHandler=e=>{console.log("webln accountsChanged",e),e.length&&t({...o,address:e})};return null==n||n.on("accountsChanged",accountsChangedHandler),()=>{null==n||n.off("accountsChanged",accountsChangedHandler)}},[o,n,t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{fetchWallets:()=>Promise.resolve(e.current.map(e=>({id:e.uuid,name:e.name}))),onConnect:onConnectWallet}),(0,a.jsxs)(c.s,{title:"Basics",children:[(0,a.jsx)(c.u,{title:"enable",description:"连接钱包",onExecute:async e=>(await (null==n?void 0:n.enable()),"success")}),(0,a.jsx)(c.u,{title:"isEnabled",description:"（暂不支持）连接钱包",onExecute:async e=>{let t=await (null==n?void 0:n.isEnabled());return JSON.stringify(t)}}),(0,a.jsx)(c.u,{title:"getInfo",description:"获取 Info 信息",onExecute:async()=>{let e=await (null==n?void 0:n.getInfo());return JSON.stringify(e)}}),(0,a.jsx)(c.u,{title:"getBalance",description:"获取余额",onExecute:async()=>{let e=await (null==n?void 0:n.getBalance());return JSON.stringify(e)}}),(0,a.jsx)(c.u,{title:"lnurl",description:"lnurl",presupposeParams:f.lnurl,onExecute:async e=>{let t=await (null==n?void 0:n.lnurl(e));return JSON.stringify(t)}})]}),(0,a.jsxs)(c.s,{title:"Message",children:[(0,a.jsx)(c.u,{title:"signMessage",description:"signMessage",presupposeParams:f.signMessage,onExecute:async e=>{let t=await (null==n?void 0:n.signMessage(e));return JSON.stringify(t)}}),(0,a.jsx)(c.u,{title:"verifyMessage",description:"verifyMessage",presupposeParams:f.signMessage,onExecute:async e=>{let t=await (null==n?void 0:n.signMessage(e));return await (null==n?void 0:n.verifyMessage(t.signature,t.message)),"success"}})]}),(0,a.jsxs)(c.s,{title:"Invoice",children:[(0,a.jsx)(c.u,{title:"makeInvoice",description:"makeInvoice",presupposeParams:f.makeInvoice,onExecute:async e=>{let t=JSON.parse(e),a=await (null==n?void 0:n.makeInvoice(t));return JSON.stringify(a)}}),(0,a.jsx)(c.u,{title:"sendPayment",description:"支付 invoice，要通过 makeInvoice 生成 invoice，复制 paymentRequest 到 request 中",onExecute:async e=>{if(!e){(0,g.Am)({title:"请通过 makeInvoice 生成 invoice，复制 paymentRequest 到 request 中"});return}let t=await (null==n?void 0:n.sendPayment(e));return JSON.stringify(t)}}),(0,a.jsx)(c.u,{title:"sendPaymentAsync",description:"（暂不支持）支付 invoice，要通过 makeInvoice 生成 invoice，复制 paymentRequest 到 request 中",onExecute:e=>{if(!e){(0,g.Am)({title:"请通过 makeInvoice 生成 invoice，复制 paymentRequest 到 request 中"});return}return null==n||n.sendPaymentAsync(e),Promise.resolve("success")}}),(0,a.jsx)(c.u,{title:"keysend",description:"（暂不支持）keysend",presupposeParams:f.keysend,onExecute:async e=>{let t=JSON.parse(e),a=await (null==n?void 0:n.keysend(t));return JSON.stringify(a)}})]}),(0,a.jsx)(d.Z,{dapps:s})]})}},6912:function(e,n,t){t.d(n,{Z:function(){return ConnectButton}});var a=t(85893),s=t(67294),i=t(9663),r=t(51731),o=t(53617),l=t(23225),c=t(96544),u=t(27361),d=t.n(u),f=t(78299);let g={address:"地址",publicKey:"公钥",chainId:"网络"};function ConnectButton(e){let{fetchWallets:n,onConnect:t,onDisconnect:u}=e,{settings:m}=(0,f.r)(),p=(0,s.useRef)(null),x=(0,s.useRef)(!1),[v,y]=(0,s.useState)([]),{setProvider:h,setAccount:j,provider:N,account:w}=(0,l.O)(),C=(0,s.useCallback)(async e=>{try{let{provider:n,...a}=await t(e);h(n),j(a)}catch(e){console.log("connectWallet error",e),(0,c.Am)({title:"连接失败",description:d()(e,"message","")})}},[t,j,h]),b=(0,s.useCallback)(async()=>{x.current=!1,await (null==u?void 0:u()),h(null),j(null)},[u,j,h]),k=(0,s.useCallback)(()=>{setTimeout(()=>{try{var e;null===(e=p.current)||void 0===e||e.click()}catch(e){}},150)},[]),D=(0,s.useCallback)(async e=>{let t=await (null==n?void 0:n());if((null==t?void 0:t.length)===0){k();return}let{directConnection:a}=null!=e?e:{directConnection:!1};(null==t?void 0:t.length)===1||(null==t?void 0:t.length)>0&&a?(k(),await C(t[0])):y(t)},[k,C,n]);return(0,s.useEffect)(()=>{let e=setTimeout(async()=>{!x.current&&(console.log("settings.autoConnect",m.autoConnect),m.autoConnect&&(x.current=!0,await D({directConnection:!0})))},500);return()=>{clearTimeout(e)}},[m.autoConnect]),(0,a.jsx)(r.Zb,{children:(0,a.jsxs)(r.aY,{className:"flex flex-col flex-wrap gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-row flex-wrap justify-between",children:[(0,a.jsxs)(o.Vq,{children:[(0,a.jsx)(o.hg,{asChild:!0,children:(0,a.jsx)(i.z,{onClick:()=>D(),children:"Connect Wallet"})}),(0,a.jsxs)(o.cZ,{children:[(0,a.jsx)(o.GG,{ref:p}),(0,a.jsxs)(o.fK,{children:[(0,a.jsx)(o.$N,{children:"选择钱包开始连接"}),!!v&&v.map(e=>{var n;return(0,a.jsx)(o.GG,{asChild:!0,children:(0,a.jsxs)(i.z,{onClick:()=>C(e),className:"gap-2",children:[e.logo&&(0,a.jsx)("img",{alt:e.name,src:e.logo,className:"w-5 h-5 rounded-full"}),(0,a.jsx)("span",{className:"font-medium",children:e.name}),null===(n=e.tags)||void 0===n?void 0:n.map(e=>(0,a.jsx)("span",{className:"text-xs font-light",children:e},e))]})},e.id)}),!v||0===v.length&&(0,a.jsxs)(o.Be,{children:["没有钱包可用，请安装 OneKey Extension",(0,a.jsx)("a",{target:"_blank",href:"https://www.onekey.so/download/",children:"Install OneKey Extension →"})]})]})]})]}),N&&(0,a.jsx)(i.z,{variant:"destructive",onClick:b,children:"断开链接"})]}),w&&(0,a.jsx)("div",{className:"flex grid-cols-1 xl:grid-cols-2 flex-wrap gap-x-6 gap-y-3 mt-4",children:Object.keys(w).map(e=>{var n;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{children:["".concat(null!==(n=null==g?void 0:g[e])&&void 0!==n?n:e),": "]}),(0,a.jsx)("span",{className:"font-normal flex flex-wrap text-break",children:"".concat(null==w?void 0:w[e])})]},e)})})]})})}},53617:function(e,n,t){t.d(n,{$N:function(){return m},Be:function(){return p},GG:function(){return d},Vq:function(){return l},cZ:function(){return g},fK:function(){return DialogHeader},hg:function(){return c}});var a=t(85893),s=t(67294),i=t(12854),r=t(41352),o=t(13441);let l=i.fC,c=i.xz,u=i.h_,d=i.x8,f=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)(i.aV,{ref:n,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});f.displayName=i.aV.displayName;let g=s.forwardRef((e,n)=>{let{className:t,children:s,...l}=e;return(0,a.jsxs)(u,{children:[(0,a.jsx)(f,{}),(0,a.jsxs)(i.VY,{ref:n,className:(0,o.cn)("fixed left-[50%] top-[35%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[s,(0,a.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});g.displayName=i.VY.displayName;let DialogHeader=e=>{let{className:n,...t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n),...t})};DialogHeader.displayName="DialogHeader";let m=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)(i.Dx,{ref:n,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});m.displayName=i.Dx.displayName;let p=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)(i.dk,{ref:n,className:(0,o.cn)("text-sm text-muted-foreground",t),...s})});p.displayName=i.dk.displayName},12854:function(e,n,t){t.d(n,{Dx:function(){return U},VY:function(){return $},aV:function(){return Y},dk:function(){return L},fC:function(){return K},h_:function(){return G},x8:function(){return Q},xz:function(){return q}});var a=t(67294),s=t(36206),i=t(28771),r=t(25360),o=t(91276),l=t(77342),c=t(46063),u=t(95420),d=t(42651),f=t(29115),g=t(75320),m=t(27552),p=t(91202),x=t(23541),v=t(88426),y=t(85893),h="Dialog",[j,N]=(0,r.b)(h),[w,C]=j(h),Dialog=e=>{let{__scopeDialog:n,children:t,open:s,defaultOpen:i,onOpenChange:r,modal:c=!0}=e,u=a.useRef(null),d=a.useRef(null),[f=!1,g]=(0,l.T)({prop:s,defaultProp:i,onChange:r});return(0,y.jsx)(w,{scope:n,triggerRef:u,contentRef:d,contentId:(0,o.M)(),titleId:(0,o.M)(),descriptionId:(0,o.M)(),open:f,onOpenChange:g,onOpenToggle:a.useCallback(()=>g(e=>!e),[g]),modal:c,children:t})};Dialog.displayName=h;var b="DialogTrigger",k=a.forwardRef((e,n)=>{let{__scopeDialog:t,...a}=e,r=C(b,t),o=(0,i.e)(n,r.triggerRef);return(0,y.jsx)(g.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":getState(r.open),...a,ref:o,onClick:(0,s.M)(e.onClick,r.onOpenToggle)})});k.displayName=b;var D="DialogPortal",[E,M]=j(D,{forceMount:void 0}),DialogPortal=e=>{let{__scopeDialog:n,forceMount:t,children:s,container:i}=e,r=C(D,n);return(0,y.jsx)(E,{scope:n,forceMount:t,children:a.Children.map(s,e=>(0,y.jsx)(f.z,{present:t||r.open,children:(0,y.jsx)(d.h,{asChild:!0,container:i,children:e})}))})};DialogPortal.displayName=D;var R="DialogOverlay",I=a.forwardRef((e,n)=>{let t=M(R,e.__scopeDialog),{forceMount:a=t.forceMount,...s}=e,i=C(R,e.__scopeDialog);return i.modal?(0,y.jsx)(f.z,{present:a||i.open,children:(0,y.jsx)(O,{...s,ref:n})}):null});I.displayName=R;var O=a.forwardRef((e,n)=>{let{__scopeDialog:t,...a}=e,s=C(R,t);return(0,y.jsx)(p.Z,{as:v.g7,allowPinchZoom:!0,shards:[s.contentRef],children:(0,y.jsx)(g.WV.div,{"data-state":getState(s.open),...a,ref:n,style:{pointerEvents:"auto",...a.style}})})}),S="DialogContent",P=a.forwardRef((e,n)=>{let t=M(S,e.__scopeDialog),{forceMount:a=t.forceMount,...s}=e,i=C(S,e.__scopeDialog);return(0,y.jsx)(f.z,{present:a||i.open,children:i.modal?(0,y.jsx)(V,{...s,ref:n}):(0,y.jsx)(W,{...s,ref:n})})});P.displayName=S;var V=a.forwardRef((e,n)=>{let t=C(S,e.__scopeDialog),r=a.useRef(null),o=(0,i.e)(n,t.contentRef,r);return a.useEffect(()=>{let e=r.current;if(e)return(0,x.Ry)(e)},[]),(0,y.jsx)(F,{...e,ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.M)(e.onCloseAutoFocus,e=>{e.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:(0,s.M)(e.onPointerDownOutside,e=>{let n=e.detail.originalEvent,t=0===n.button&&!0===n.ctrlKey,a=2===n.button||t;a&&e.preventDefault()}),onFocusOutside:(0,s.M)(e.onFocusOutside,e=>e.preventDefault())})}),W=a.forwardRef((e,n)=>{let t=C(S,e.__scopeDialog),s=a.useRef(!1),i=a.useRef(!1);return(0,y.jsx)(F,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{e.onCloseAutoFocus?.(n),n.defaultPrevented||(s.current||t.triggerRef.current?.focus(),n.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:n=>{e.onInteractOutside?.(n),n.defaultPrevented||(s.current=!0,"pointerdown"!==n.detail.originalEvent.type||(i.current=!0));let a=n.target,r=t.triggerRef.current?.contains(a);r&&n.preventDefault(),"focusin"===n.detail.originalEvent.type&&i.current&&n.preventDefault()}})}),F=a.forwardRef((e,n)=>{let{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:o,...l}=e,d=C(S,t),f=a.useRef(null),g=(0,i.e)(n,f);return(0,m.EW)(),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.M,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:o,children:(0,y.jsx)(c.XB,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":getState(d.open),...l,ref:g,onDismiss:()=>d.onOpenChange(!1)})}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(TitleWarning,{titleId:d.titleId}),(0,y.jsx)(DescriptionWarning,{contentRef:f,descriptionId:d.descriptionId})]})]})}),J="DialogTitle",X=a.forwardRef((e,n)=>{let{__scopeDialog:t,...a}=e,s=C(J,t);return(0,y.jsx)(g.WV.h2,{id:s.titleId,...a,ref:n})});X.displayName=J;var _="DialogDescription",A=a.forwardRef((e,n)=>{let{__scopeDialog:t,...a}=e,s=C(_,t);return(0,y.jsx)(g.WV.p,{id:s.descriptionId,...a,ref:n})});A.displayName=_;var T="DialogClose",B=a.forwardRef((e,n)=>{let{__scopeDialog:t,...a}=e,i=C(T,t);return(0,y.jsx)(g.WV.button,{type:"button",...a,ref:n,onClick:(0,s.M)(e.onClick,()=>i.onOpenChange(!1))})});function getState(e){return e?"open":"closed"}B.displayName=T;var Z="DialogTitleWarning",[z,H]=(0,r.k)(Z,{contentName:S,titleName:J,docsSlug:"dialog"}),TitleWarning=({titleId:e})=>{let n=H(Z),t=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return a.useEffect(()=>{if(e){let n=document.getElementById(e);n||console.error(t)}},[t,e]),null},DescriptionWarning=({contentRef:e,descriptionId:n})=>{let t=H("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${t.contentName}}.`;return a.useEffect(()=>{let t=e.current?.getAttribute("aria-describedby");if(n&&t){let e=document.getElementById(n);e||console.warn(s)}},[s,e,n]),null},K=Dialog,q=k,G=DialogPortal,Y=I,$=P,U=X,L=A,Q=B}}]);
//# sourceMappingURL=6110.e44b61c52a6035cb.js.map