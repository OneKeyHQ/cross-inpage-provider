(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7326],{6793:function(e,t,n){"use strict";var a=n(85893);n(67294);var s=n(41664),l=n.n(s),r=n(51731);t.Z=e=>{let{dapps:t}=e;return(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.ll,{className:"text-xl",children:"Dapp Bookmarks"}),(0,a.jsx)(r.aY,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:t.map((e,t)=>(0,a.jsx)("div",{className:"border p-2 rounded-lg shadow-sm hover:shadow-md",children:(0,a.jsx)(l(),{href:e.url,legacyBehavior:!0,children:(0,a.jsxs)("a",{className:"text-blue-500 hover:underline text-lg block",children:[e.name," →"]})})},t))})]})}},50615:function(e,t,n){"use strict";n.d(t,{Z:function(){return InfoLayout}});var a=n(85893),s=n(51731);function InfoLayout(e){let{title:t,children:n}=e;return(0,a.jsxs)(s.Zb,{children:[t&&(0,a.jsx)(s.Ol,{className:"font-medium",children:t}),(0,a.jsx)(s.aY,{className:"flex flex-col flex-wrap gap-3 break-all",children:n})]})}},60569:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Example}});var a=n(85893);let s=[{name:"Polkadot",addressPrefix:0,url:"wss://rpc.polkadot.io"},{name:"Kusama",addressPrefix:2,url:"wss://kusama-rpc.polkadot.io"},{name:"Astar",addressPrefix:5,url:"wss://rpc.astar.network"},{name:"Manta",addressPrefix:77,url:"wss://ws.manta.systems"},{name:"JoyStream",addressPrefix:126,url:"wss://rpc.joystream.org"}],l=[{name:"Polkadot.js",url:"https://polkadot.js.org/apps"},{name:"Bifrost",url:"https://bifrost.app/"},{name:"Polkaswap",url:"https://polkaswap.io/"}];var r=n(6912),i=n(67294),o=n(99710),d=n(23225),c=n(6793),u=n(95482),f=n(56398),p=n(65716),m=n(11898),x=n(43754),g=n(87265),v=n(49495),h=n(7738),w=n(72801),j=n(32499),y=n(96644),N={signRaw:[{id:"signRaw",name:"signRaw",value:"message to sign"}],signAndSend:e=>[{id:"signAndSend",name:"signAndSend",value:JSON.stringify({to:e,value:"1000"})}]},k=n(96544),b=n(50615),C=n(49333),P=n(48764).Buffer;function Example(){let e=(0,i.useRef)([]),{provider:t,setAccount:n,account:R}=(0,d.O)(),[S,E]=(0,i.useState)(),[A,O]=(0,i.useState)(""),Z=(0,i.useMemo)(()=>null==R?void 0:R.address,[R]),B=(0,i.useMemo)(()=>S,[S]),D=(0,i.useRef)();(0,i.useEffect)(()=>{if(void 0!==B){let e=s.find(e=>e.addressPrefix===B);if(e){let t=new w.U(e.url),n=new j.G({provider:t});console.log("polkadot newApiProvider [useEffect]",B,e.url),n.isReady.then(()=>(D.current=n,()=>{n.disconnect(),t.disconnect()}))}}else console.log("polkadot newApiProvider [useEffect] undefined"),D.current=void 0},[B]),(0,i.useEffect)(()=>{if(console.log("polkadot [useEffect]",Z,B),Z&&null!=B){let e=(0,x.MW)(Z),[t,n,a,l]=(0,g.l)(e),r=s.find(e=>e.addressPrefix===B);r&&O((0,v.m)(e.subarray(a,n),r.addressPrefix))}else O(void 0)},[Z,B]),(0,i.useEffect)(()=>{var e;if(!(null==R?void 0:R.address))return;let t=(0,x.MW)(null==R?void 0:R.address),[n,a,l,r]=(0,g.l)(t),i=s.find(e=>e.addressPrefix===r);E(null!==(e=null==i?void 0:i.addressPrefix)&&void 0!==e?e:s[0].addressPrefix)},[null==R?void 0:R.address,t]);let onConnectWallet=async t=>{var n,a,s,l,r,i;let o=null===(n=e.current)||void 0===n?void 0:n.find(e=>e.uuid===t.id);if(!o)return Promise.reject("Wallet not found");let d=o.provider;if(!d){(0,k.Am)({title:"Wallet not found",description:"Please install the wallet extension"});return}let c=await (null==d?void 0:null===(a=d.accounts)||void 0===a?void 0:a.get());console.log("polkadot [connect wallet]",null==c?void 0:null===(s=c[0])||void 0===s?void 0:s.address);let u=null==c?void 0:c[0];return{provider:d,address:null!==(l=null==u?void 0:u.address)&&void 0!==l?l:"",name:null!==(r=null==u?void 0:u.name)&&void 0!==r?r:"",type:null!==(i=null==u?void 0:u.type)&&void 0!==i?i:""}},K=(0,i.useRef)();return(0,i.useEffect)(()=>{if(t)return(0,u.Fm)(e=>{var t;if(console.log("polkadot [web3AccountsSubscribe]",e),0===e.length)return;let[a]=e;n({address:null==a?void 0:a.address,name:null==a?void 0:a.name,type:null!==(t=null==a?void 0:a.type)&&void 0!==t?t:""})}).then(e=>{K.current=e}),()=>{var e;null===(e=K.current)||void 0===e||e.call(K)}},[t,n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{fetchWallets:async()=>{let t=await (0,u.$y)("Test Dapp");return e.current=t.map(e=>({uuid:e.name,name:e.name,provider:e})),console.log("walletsRef.current",e.current),e.current.map(e=>({id:e.uuid,name:e.name}))},onConnect:onConnectWallet}),(0,a.jsxs)(b.Z,{title:"该内容是动态计算的",children:[(0,a.jsx)("p",{children:"只链接 Dot 账户即可，在这个切换不同网络即可发送不同网络的资产。"}),(0,a.jsxs)(C.Ph,{value:null==S?void 0:S.toString(),onValueChange:e=>{let t=s.find(t=>t.addressPrefix.toString()===e);E(null==t?void 0:t.addressPrefix)},children:[(0,a.jsx)(C.i4,{className:"w-[260px]",children:(0,a.jsx)(C.ki,{placeholder:"Change Polkadot Network"})}),(0,a.jsx)(C.Bw,{children:s.map(e=>(0,a.jsx)(C.Ql,{value:e.addressPrefix.toString(),children:(0,a.jsx)("span",{className:"font-medium",children:e.name})},e.name))})]}),A&&(0,a.jsxs)("p",{children:["地址: ",A]})]}),(0,a.jsxs)(o.s,{title:"Basics",children:[(0,a.jsx)(o.u,{title:"accounts.get",description:"获取账户权限",disableRequestContent:!0,onExecute:async e=>{let n=await (null==t?void 0:t.accounts.get());return JSON.stringify(n)}}),(0,a.jsx)(o.u,{title:"accounts.get (Manta dApp)",description:"Test Manta Connect (dApp)",disableRequestContent:!0,onExecute:async e=>{JSON.stringify(t);let n=null==t?void 0:t.accounts,a=await (null==n?void 0:n.get());return JSON.stringify(a)}}),(0,a.jsx)(o.u,{title:"signRaw",description:"签名消息",presupposeParams:N.signRaw,onExecute:async e=>{var t;let n=(0,y.$)(e),[a]=await (0,u.vK)(),s=await (0,u.R0)(null==a?void 0:null===(t=a.meta)||void 0===t?void 0:t.source),l=await s.signer.signRaw({data:n,address:A,type:"bytes"});return JSON.stringify(l)},onValidate:(e,t)=>{let n=(0,f.d)(e),{signature:a}=JSON.parse(t),{isValid:s}=(0,h.D)(P.from((0,p.Y)((0,m.Rl)(n))),a,R.address);return Promise.resolve(s)}}),(0,a.jsx)(o.u,{title:"signPayload",description:"签名并发送交易",presupposeParams:N.signAndSend(A||""),onExecute:async e=>{var t;let{to:n,value:a}=JSON.parse(e),[s]=await (0,u.vK)(),l=await (0,u.R0)(null==s?void 0:null===(t=s.meta)||void 0===t?void 0:t.source);return new Promise((e,t)=>{D.current.tx.balances.transferKeepAlive(n,a).signAndSend(Z,{signer:l.signer},t=>{e(t)}).catch(e=>{let{message:n}=e||{};t(n||e)})})}})]}),(0,a.jsx)(c.Z,{dapps:l})]})}},6912:function(e,t,n){"use strict";n.d(t,{Z:function(){return ConnectButton}});var a=n(85893),s=n(67294),l=n(9663),r=n(51731),i=n(53617),o=n(23225),d=n(96544),c=n(27361),u=n.n(c),f=n(78299);let p={address:"地址",publicKey:"公钥",chainId:"网络"};function ConnectButton(e){let{fetchWallets:t,onConnect:n,onDisconnect:c}=e,{settings:m}=(0,f.r)(),x=(0,s.useRef)(null),g=(0,s.useRef)(!1),[v,h]=(0,s.useState)([]),{setProvider:w,setAccount:j,provider:y,account:N}=(0,o.O)(),k=(0,s.useCallback)(async e=>{try{let{provider:t,...a}=await n(e);w(t),j(a)}catch(e){console.log("connectWallet error",e),(0,d.Am)({title:"连接失败",description:u()(e,"message","")})}},[n,j,w]),b=(0,s.useCallback)(async()=>{g.current=!1,await (null==c?void 0:c()),w(null),j(null)},[c,j,w]),C=(0,s.useCallback)(()=>{setTimeout(()=>{try{var e;null===(e=x.current)||void 0===e||e.click()}catch(e){}},150)},[]),P=(0,s.useCallback)(async e=>{let n=await (null==t?void 0:t());if((null==n?void 0:n.length)===0){C();return}let{directConnection:a}=null!=e?e:{directConnection:!1};(null==n?void 0:n.length)===1||(null==n?void 0:n.length)>0&&a?(C(),await k(n[0])):h(n)},[C,k,t]);return(0,s.useEffect)(()=>{let e=setTimeout(async()=>{!g.current&&(console.log("settings.autoConnect",m.autoConnect),m.autoConnect&&(g.current=!0,await P({directConnection:!0})))},500);return()=>{clearTimeout(e)}},[m.autoConnect]),(0,a.jsx)(r.Zb,{children:(0,a.jsxs)(r.aY,{className:"flex flex-col flex-wrap gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-row flex-wrap justify-between",children:[(0,a.jsxs)(i.Vq,{children:[(0,a.jsx)(i.hg,{asChild:!0,children:(0,a.jsx)(l.z,{onClick:()=>P(),children:"Connect Wallet"})}),(0,a.jsxs)(i.cZ,{children:[(0,a.jsx)(i.GG,{ref:x}),(0,a.jsxs)(i.fK,{children:[(0,a.jsx)(i.$N,{children:"选择钱包开始连接"}),!!v&&v.map(e=>{var t;return(0,a.jsx)(i.GG,{asChild:!0,children:(0,a.jsxs)(l.z,{onClick:()=>k(e),className:"gap-2",children:[e.logo&&(0,a.jsx)("img",{alt:e.name,src:e.logo,className:"w-5 h-5 rounded-full"}),(0,a.jsx)("span",{className:"font-medium",children:e.name}),null===(t=e.tags)||void 0===t?void 0:t.map(e=>(0,a.jsx)("span",{className:"text-xs font-light",children:e},e))]})},e.id)}),!v||0===v.length&&(0,a.jsxs)(i.Be,{children:["没有钱包可用，请安装 OneKey Extension",(0,a.jsx)("a",{target:"_blank",href:"https://www.onekey.so/download/",children:"Install OneKey Extension →"})]})]})]})]}),y&&(0,a.jsx)(l.z,{variant:"destructive",onClick:b,children:"断开链接"})]}),N&&(0,a.jsx)("div",{className:"flex grid-cols-1 xl:grid-cols-2 flex-wrap gap-x-6 gap-y-3 mt-4",children:Object.keys(N).map(e=>{var t;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{children:["".concat(null!==(t=null==p?void 0:p[e])&&void 0!==t?t:e),": "]}),(0,a.jsx)("span",{className:"font-normal flex flex-wrap text-break",children:"".concat(null==N?void 0:N[e])})]},e)})})]})})}},53617:function(e,t,n){"use strict";n.d(t,{$N:function(){return m},Be:function(){return x},GG:function(){return u},Vq:function(){return o},cZ:function(){return p},fK:function(){return DialogHeader},hg:function(){return d}});var a=n(85893),s=n(67294),l=n(12854),r=n(41352),i=n(13441);let o=l.fC,d=l.xz,c=l.h_,u=l.x8,f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s})});f.displayName=l.aV.displayName;let p=s.forwardRef((e,t)=>{let{className:n,children:s,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(f,{}),(0,a.jsxs)(l.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[35%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...o,children:[s,(0,a.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=l.VY.displayName;let DialogHeader=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};DialogHeader.displayName="DialogHeader";let m=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...s})});m.displayName=l.Dx.displayName;let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...s})});x.displayName=l.dk.displayName},46601:function(){}}]);
//# sourceMappingURL=7326.1abb06ee5dcfd6ec.js.map